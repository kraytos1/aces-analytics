import{t as Do,c as gs}from"./app-chunk-one-Dq9u3Mlt.js";var Ss={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.baseRunningPlayTypeConfigs=e.ballInPlayResultConfigs=e.PitchSpeedProvider=e.PitchResult=e.ReplaceRunnerFlavor=e.BaseballOffensiveLocation=e.BaseballOffensiveRole=void 0,function(n){n.Batter="batter",n.Runner="runner"}(e.BaseballOffensiveRole||(e.BaseballOffensiveRole={})),function(n){n.Batter="batter",n.RunnerOnFirst="runner_first",n.RunnerOnSecond="runner_second",n.RunnerOnThird="runner_third"}(e.BaseballOffensiveLocation||(e.BaseballOffensiveLocation={})),function(n){n.SpecialPinchRunner="special_pinch_runner",n.RetroactiveSubstitution="retroactive_sub"}(e.ReplaceRunnerFlavor||(e.ReplaceRunnerFlavor={})),function(n){n.Ball="ball",n.IntentionalBall="intentional_ball",n.StrikeSwinging="strike_swinging",n.StrikeLooking="strike_looking",n.Foul="foul",n.BallInPlay="ball_in_play",n.IllegalPitch="illegal_pitch",n.FoulTip="foul_tip",n.FoulBunt="foul_bunt"}(e.PitchResult||(e.PitchResult={})),function(n){n.POCKET_RADAR="pocket_radar",n.USER="user"}(e.PitchSpeedProvider||(e.PitchSpeedProvider={})),e.ballInPlayResultConfigs={single:{bases:1,batterOut:!1,error:!1},double:{bases:2,batterOut:!1,error:!1},triple:{bases:3,batterOut:!1,error:!1},home_run:{bases:4,batterOut:!1,error:!1},dropped_third_strike:{bases:1,batterOut:!1,error:!1},dropped_third_strike_batter_out:{bases:1,batterOut:!0,error:!1},fielders_choice:{bases:1,batterOut:!1,error:!1},error:{bases:1,batterOut:!1,error:!0},sacrifice_bunt:{bases:1,batterOut:!1,error:!1},sacrifice_fly:{bases:1,batterOut:!0,error:!1},sacrifice_bunt_error:{bases:1,batterOut:!1,error:!0},sacrifice_fly_error:{bases:1,batterOut:!1,error:!0},batter_out:{bases:0,batterOut:!0,error:!1},batter_out_advance_runners:{bases:1,batterOut:!0,error:!1},offensive_interference:{bases:0,batterOut:!0,error:!1},infield_fly:{bases:0,batterOut:!0,error:!1},other_out:{bases:0,batterOut:!0,error:!1},foul_tip_out:{bases:0,batterOut:!0,error:!1}},e.baseRunningPlayTypeConfigs={offensive_interference:{runnerOut:!0,error:!1},stole_base:{runnerOut:!1,error:!1},defensive_indifference:{runnerOut:!1,error:!1},passed_ball:{runnerOut:!1,error:!1},on_same_pitch:{runnerOut:!1,error:!1},wild_pitch:{runnerOut:!1,error:!1},attempted_pickoff:{runnerOut:!1,error:!1},fielders_choice_attempted_pickoff:{runnerOut:!1,error:!1},advanced_on_error:{runnerOut:!1,error:!0},on_same_error:{runnerOut:!1,error:!1},out_on_appeal:{runnerOut:!0,error:!1},caught_stealing:{runnerOut:!0,error:!1},other_out:{runnerOut:!0,error:!1},other_advance:{runnerOut:!1,error:!1},picked_off:{runnerOut:!0,error:!1},did_not_score:{runnerOut:!1,error:!1},advanced_on_last_play:{runnerOut:!1,error:!1},remained_on_last_play:{runnerOut:!1,error:!1},out_on_last_play:{runnerOut:!0,error:!1}}})(Ss);var Es={},gn=function(e,n){return gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},gn(e,n)};function ko(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");gn(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var dr=function(){return dr=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},dr.apply(this,arguments)};function Go(e,n){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]]);return i}function Uo(e,n,i,o){var s=arguments.length,f=s<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,n,i,o);else for(var l=e.length-1;l>=0;l--)(d=e[l])&&(f=(s<3?d(f):s>3?d(n,i,f):d(n,i))||f);return s>3&&f&&Object.defineProperty(n,i,f),f}function Ko(e,n){return function(i,o){n(i,o,e)}}function jo(e,n,i,o,s,f){function d(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=o.kind,g=l==="getter"?"get":l==="setter"?"set":"value",S=!n&&e?o.static?e:e.prototype:null,R=n||(S?Object.getOwnPropertyDescriptor(S,o.name):{}),T,z=!1,A=i.length-1;A>=0;A--){var b={};for(var E in o)b[E]=E==="access"?{}:o[E];for(var E in o.access)b.access[E]=o.access[E];b.addInitializer=function(y){if(z)throw new TypeError("Cannot add initializers after decoration has completed");f.push(d(y||null))};var p=(0,i[A])(l==="accessor"?{get:R.get,set:R.set}:R[g],b);if(l==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(T=d(p.get))&&(R.get=T),(T=d(p.set))&&(R.set=T),(T=d(p.init))&&s.unshift(T)}else(T=d(p))&&(l==="field"?s.unshift(T):R[g]=T)}S&&Object.defineProperty(S,o.name,R),z=!0}function $o(e,n,i){for(var o=arguments.length>2,s=0;s<n.length;s++)i=o?n[s].call(e,i):n[s].call(e);return o?i:void 0}function Vo(e){return typeof e=="symbol"?e:"".concat(e)}function Wo(e,n,i){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",n):n})}function Jo(e,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,n)}function Yo(e,n,i,o){function s(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function l(R){try{S(o.next(R))}catch(T){d(T)}}function g(R){try{S(o.throw(R))}catch(T){d(T)}}function S(R){R.done?f(R.value):s(R.value).then(l,g)}S((o=o.apply(e,n||[])).next())})}function Xo(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,s,f,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=l(0),d.throw=l(1),d.return=l(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function l(S){return function(R){return g([S,R])}}function g(S){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,S[0]&&(i=0)),i;)try{if(o=1,s&&(f=S[0]&2?s.return:S[0]?s.throw||((f=s.return)&&f.call(s),0):s.next)&&!(f=f.call(s,S[1])).done)return f;switch(s=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return i.label++,{value:S[1],done:!1};case 5:i.label++,s=S[1],S=[0];continue;case 7:S=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){i=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){i.label=S[1];break}if(S[0]===6&&i.label<f[1]){i.label=f[1],f=S;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(S);break}f[2]&&i.ops.pop(),i.trys.pop();continue}S=n.call(e,i)}catch(R){S=[6,R],s=0}finally{o=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}var Er=Object.create?function(e,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(e,o,s)}:function(e,n,i,o){o===void 0&&(o=i),e[o]=n[i]};function Qo(e,n){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&Er(n,e,i)}function vr(e){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&e[n],o=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(e,n){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var o=i.call(e),s,f=[],d;try{for(;(n===void 0||n-- >0)&&!(s=o.next()).done;)f.push(s.value)}catch(l){d={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(d)throw d.error}}return f}function Zo(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Tn(arguments[n]));return e}function xo(){for(var e=0,n=0,i=arguments.length;n<i;n++)e+=arguments[n].length;for(var o=Array(e),s=0,n=0;n<i;n++)for(var f=arguments[n],d=0,l=f.length;d<l;d++,s++)o[s]=f[d];return o}function Ho(e,n,i){if(i||arguments.length===2)for(var o=0,s=n.length,f;o<s;o++)(f||!(o in n))&&(f||(f=Array.prototype.slice.call(n,0,o)),f[o]=n[o]);return e.concat(f||Array.prototype.slice.call(n))}function Pe(e){return this instanceof Pe?(this.v=e,this):new Pe(e)}function ta(e,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(e,n||[]),s,f=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(A){return function(b){return Promise.resolve(b).then(A,T)}}function l(A,b){o[A]&&(s[A]=function(E){return new Promise(function(p,y){f.push([A,E,p,y])>1||g(A,E)})},b&&(s[A]=b(s[A])))}function g(A,b){try{S(o[A](b))}catch(E){z(f[0][3],E)}}function S(A){A.value instanceof Pe?Promise.resolve(A.value.v).then(R,T):z(f[0][2],A)}function R(A){g("next",A)}function T(A){g("throw",A)}function z(A,b){A(b),f.shift(),f.length&&g(f[0][0],f[0][1])}}function ea(e){var n,i;return n={},o("next"),o("throw",function(s){throw s}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(s,f){n[s]=e[s]?function(d){return(i=!i)?{value:Pe(e[s](d)),done:!1}:f?f(d):d}:f}}function ra(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],i;return n?n.call(e):(e=typeof vr=="function"?vr(e):e[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(f){i[f]=e[f]&&function(d){return new Promise(function(l,g){d=e[f](d),s(l,g,d.done,d.value)})}}function s(f,d,l,g){Promise.resolve(g).then(function(S){f({value:S,done:l})},d)}}function na(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var Is=Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n},Sn=function(e){return Sn=Object.getOwnPropertyNames||function(n){var i=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[i.length]=o);return i},Sn(e)};function ia(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i=Sn(e),o=0;o<i.length;o++)i[o]!=="default"&&Er(n,e,i[o]);return Is(n,e),n}function oa(e){return e&&e.__esModule?e:{default:e}}function aa(e,n,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!o:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(e):o?o.value:n.get(e)}function ua(e,n,i,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(e,i):s?s.value=i:n.set(e,i),i}function sa(e,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?n===e:e.has(n)}function ca(e,n,i){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var o,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=n[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=n[Symbol.dispose],i&&(s=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");s&&(o=function(){try{s.call(this)}catch(f){return Promise.reject(f)}}),e.stack.push({value:n,dispose:o,async:i})}else i&&e.stack.push({async:!0});return n}var ws=typeof SuppressedError=="function"?SuppressedError:function(e,n,i){var o=new Error(i);return o.name="SuppressedError",o.error=e,o.suppressed=n,o};function fa(e){function n(f){e.error=e.hasError?new ws(f,e.error,"An error was suppressed during disposal."):f,e.hasError=!0}var i,o=0;function s(){for(;i=e.stack.pop();)try{if(!i.async&&o===1)return o=0,e.stack.push(i),Promise.resolve().then(s);if(i.dispose){var f=i.dispose.call(i.value);if(i.async)return o|=2,Promise.resolve(f).then(s,function(d){return n(d),s()})}else o|=1}catch(d){n(d)}if(o===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function ha(e,n){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,o,s,f,d){return o?n?".jsx":".js":s&&(!f||!d)?i:s+f+"."+d.toLowerCase()+"js"}):e}const Ts={__extends:ko,__assign:dr,__rest:Go,__decorate:Uo,__param:Ko,__esDecorate:jo,__runInitializers:$o,__propKey:Vo,__setFunctionName:Wo,__metadata:Jo,__awaiter:Yo,__generator:Xo,__createBinding:Er,__exportStar:Qo,__values:vr,__read:Tn,__spread:Zo,__spreadArrays:xo,__spreadArray:Ho,__await:Pe,__asyncGenerator:ta,__asyncDelegator:ea,__asyncValues:ra,__makeTemplateObject:na,__importStar:ia,__importDefault:oa,__classPrivateFieldGet:aa,__classPrivateFieldSet:ua,__classPrivateFieldIn:sa,__addDisposableResource:ca,__disposeResources:fa,__rewriteRelativeImportExtension:ha},Ps=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ca,get __assign(){return dr},__asyncDelegator:ea,__asyncGenerator:ta,__asyncValues:ra,__await:Pe,__awaiter:Yo,__classPrivateFieldGet:aa,__classPrivateFieldIn:sa,__classPrivateFieldSet:ua,__createBinding:Er,__decorate:Uo,__disposeResources:fa,__esDecorate:jo,__exportStar:Qo,__extends:ko,__generator:Xo,__importDefault:oa,__importStar:ia,__makeTemplateObject:na,__metadata:Jo,__param:Ko,__propKey:Vo,__read:Tn,__rest:Go,__rewriteRelativeImportExtension:ha,__runInitializers:$o,__setFunctionName:Wo,__spread:Zo,__spreadArray:Ho,__spreadArrays:xo,__values:vr,default:Ts},Symbol.toStringTag,{value:"Module"})),re=Do(Ps);var ln={exports:{}},po;function la(){return po||(po=1,function(e,n){(function(i,o){e.exports=o()})(gs,function(){var i=Array.prototype.slice;function o(t,r){r&&(t.prototype=Object.create(r.prototype)),t.prototype.constructor=t}function s(t){return g(t)?t:pt(t)}o(f,s);function f(t){return S(t)?t:Bt(t)}o(d,s);function d(t){return R(t)?t:st(t)}o(l,s);function l(t){return g(t)&&!T(t)?t:Ut(t)}function g(t){return!!(t&&t[A])}function S(t){return!!(t&&t[b])}function R(t){return!!(t&&t[E])}function T(t){return S(t)||R(t)}function z(t){return!!(t&&t[p])}s.isIterable=g,s.isKeyed=S,s.isIndexed=R,s.isAssociative=T,s.isOrdered=z,s.Keyed=f,s.Indexed=d,s.Set=l;var A="@@__IMMUTABLE_ITERABLE__@@",b="@@__IMMUTABLE_KEYED__@@",E="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",y="delete",_=5,O=1<<_,P=O-1,C={},V={value:!1},U={value:!1};function G(t){return t.value=!1,t}function k(t){t&&(t.value=!0)}function nt(){}function H(t,r){r=r||0;for(var a=Math.max(0,t.length-r),u=new Array(a),c=0;c<a;c++)u[c]=t[c+r];return u}function j(t){return t.size===void 0&&(t.size=t.__iterate(Z)),t.size}function $(t,r){if(typeof r!="number"){var a=r>>>0;if(""+a!==r||a===4294967295)return NaN;r=a}return r<0?j(t)+r:r}function Z(){return!0}function F(t,r,a){return(t===0||a!==void 0&&t<=-a)&&(r===void 0||a!==void 0&&r>=a)}function B(t,r){return L(t,r,0)}function q(t,r){return L(t,r,r)}function L(t,r,a){return t===void 0?a:t<0?Math.max(0,r+t):r===void 0?t:Math.min(r,t)}var Q=0,tt=1,ut=2,Nt=typeof Symbol=="function"&&Symbol.iterator,ae="@@iterator",Re=Nt||ae;function Y(t){this.next=t}Y.prototype.toString=function(){return"[Iterator]"},Y.KEYS=Q,Y.VALUES=tt,Y.ENTRIES=ut,Y.prototype.inspect=Y.prototype.toSource=function(){return this.toString()},Y.prototype[Re]=function(){return this};function rt(t,r,a,u){var c=t===0?r:t===1?a:[r,a];return u?u.value=c:u={value:c,done:!1},u}function Tt(){return{value:void 0,done:!0}}function hi(t){return!!li(t)}function tr(t){return t&&typeof t.next=="function"}function Fe(t){var r=li(t);return r&&r.call(t)}function li(t){var r=t&&(Nt&&t[Nt]||t[ae]);if(typeof r=="function")return r}function pi(t){return t&&typeof t.length=="number"}o(pt,s);function pt(t){return t==null?er():g(t)?t.toSeq():$u(t)}pt.of=function(){return pt(arguments)},pt.prototype.toSeq=function(){return this},pt.prototype.toString=function(){return this.__toString("Seq {","}")},pt.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},pt.prototype.__iterate=function(t,r){return mi(this,t,r,!0)},pt.prototype.__iterator=function(t,r){return gi(this,t,r,!0)},o(Bt,pt);function Bt(t){return t==null?er().toKeyedSeq():g(t)?S(t)?t.toSeq():t.fromEntrySeq():yi(t)}Bt.prototype.toKeyedSeq=function(){return this},o(st,pt);function st(t){return t==null?er():g(t)?S(t)?t.entrySeq():t.toIndexedSeq():Br(t)}st.of=function(){return st(arguments)},st.prototype.toIndexedSeq=function(){return this},st.prototype.toString=function(){return this.__toString("Seq [","]")},st.prototype.__iterate=function(t,r){return mi(this,t,r,!1)},st.prototype.__iterator=function(t,r){return gi(this,t,r,!1)},o(Ut,pt);function Ut(t){return(t==null?er():g(t)?S(t)?t.entrySeq():t:Br(t)).toSetSeq()}Ut.of=function(){return Ut(arguments)},Ut.prototype.toSetSeq=function(){return this},pt.isSeq=Cr,pt.Keyed=Bt,pt.Set=Ut,pt.Indexed=st;var di="@@__IMMUTABLE_SEQ__@@";pt.prototype[di]=!0,o(Kt,st);function Kt(t){this._array=t,this.size=t.length}Kt.prototype.get=function(t,r){return this.has(t)?this._array[$(this,t)]:r},Kt.prototype.__iterate=function(t,r){for(var a=this._array,u=a.length-1,c=0;c<=u;c++)if(t(a[r?u-c:c],c,this)===!1)return c+1;return c},Kt.prototype.__iterator=function(t,r){var a=this._array,u=a.length-1,c=0;return new Y(function(){return c>u?Tt():rt(t,c,a[r?u-c++:c++])})},o(Qt,Bt);function Qt(t){var r=Object.keys(t);this._object=t,this._keys=r,this.size=r.length}Qt.prototype.get=function(t,r){return r!==void 0&&!this.has(t)?r:this._object[t]},Qt.prototype.has=function(t){return this._object.hasOwnProperty(t)},Qt.prototype.__iterate=function(t,r){for(var a=this._object,u=this._keys,c=u.length-1,h=0;h<=c;h++){var v=u[r?c-h:h];if(t(a[v],v,this)===!1)return h+1}return h},Qt.prototype.__iterator=function(t,r){var a=this._object,u=this._keys,c=u.length-1,h=0;return new Y(function(){var v=u[r?c-h:h];return h++>c?Tt():rt(t,v,a[v])})},Qt.prototype[p]=!0,o(Ce,st);function Ce(t){this._iterable=t,this.size=t.length||t.size}Ce.prototype.__iterateUncached=function(t,r){if(r)return this.cacheResult().__iterate(t,r);var a=this._iterable,u=Fe(a),c=0;if(tr(u))for(var h;!(h=u.next()).done&&t(h.value,c++,this)!==!1;);return c},Ce.prototype.__iteratorUncached=function(t,r){if(r)return this.cacheResult().__iterator(t,r);var a=this._iterable,u=Fe(a);if(!tr(u))return new Y(Tt);var c=0;return new Y(function(){var h=u.next();return h.done?h:rt(t,c++,h.value)})},o(Be,st);function Be(t){this._iterator=t,this._iteratorCache=[]}Be.prototype.__iterateUncached=function(t,r){if(r)return this.cacheResult().__iterate(t,r);for(var a=this._iterator,u=this._iteratorCache,c=0;c<u.length;)if(t(u[c],c++,this)===!1)return c;for(var h;!(h=a.next()).done;){var v=h.value;if(u[c]=v,t(v,c++,this)===!1)break}return c},Be.prototype.__iteratorUncached=function(t,r){if(r)return this.cacheResult().__iterator(t,r);var a=this._iterator,u=this._iteratorCache,c=0;return new Y(function(){if(c>=u.length){var h=a.next();if(h.done)return h;u[c]=h.value}return rt(t,c,u[c++])})};function Cr(t){return!!(t&&t[di])}var vi;function er(){return vi||(vi=new Kt([]))}function yi(t){var r=Array.isArray(t)?new Kt(t).fromEntrySeq():tr(t)?new Be(t).fromEntrySeq():hi(t)?new Ce(t).fromEntrySeq():typeof t=="object"?new Qt(t):void 0;if(!r)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return r}function Br(t){var r=_i(t);if(!r)throw new TypeError("Expected Array or iterable object of values: "+t);return r}function $u(t){var r=_i(t)||typeof t=="object"&&new Qt(t);if(!r)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return r}function _i(t){return pi(t)?new Kt(t):tr(t)?new Be(t):hi(t)?new Ce(t):void 0}function mi(t,r,a,u){var c=t._cache;if(c){for(var h=c.length-1,v=0;v<=h;v++){var m=c[a?h-v:v];if(r(m[1],u?m[0]:v,t)===!1)return v+1}return v}return t.__iterateUncached(r,a)}function gi(t,r,a,u){var c=t._cache;if(c){var h=c.length-1,v=0;return new Y(function(){var m=c[a?h-v:v];return v++>h?Tt():rt(r,u?m[0]:v-1,m[1])})}return t.__iteratorUncached(r,a)}function qr(t,r){return r?zr(r,t,"",{"":t}):Nr(t)}function zr(t,r,a,u){return Array.isArray(r)?t.call(u,a,st(r).map(function(c,h){return zr(t,c,h,r)})):Si(r)?t.call(u,a,Bt(r).map(function(c,h){return zr(t,c,h,r)})):r}function Nr(t){return Array.isArray(t)?st(t).map(Nr).toList():Si(t)?Bt(t).map(Nr).toMap():t}function Si(t){return t&&(t.constructor===Object||t.constructor===void 0)}function ht(t,r){if(t===r||t!==t&&r!==r)return!0;if(!t||!r)return!1;if(typeof t.valueOf=="function"&&typeof r.valueOf=="function"){if(t=t.valueOf(),r=r.valueOf(),t===r||t!==t&&r!==r)return!0;if(!t||!r)return!1}return!!(typeof t.equals=="function"&&typeof r.equals=="function"&&t.equals(r))}function Lr(t,r){if(t===r)return!0;if(!g(r)||t.size!==void 0&&r.size!==void 0&&t.size!==r.size||t.__hash!==void 0&&r.__hash!==void 0&&t.__hash!==r.__hash||S(t)!==S(r)||R(t)!==R(r)||z(t)!==z(r))return!1;if(t.size===0&&r.size===0)return!0;var a=!T(t);if(z(t)){var u=t.entries();return r.every(function(I,w){var M=u.next().value;return M&&ht(M[1],I)&&(a||ht(M[0],w))})&&u.next().done}var c=!1;if(t.size===void 0)if(r.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{c=!0;var h=t;t=r,r=h}var v=!0,m=r.__iterate(function(I,w){if(a?!t.has(I):c?!ht(I,t.get(w,C)):!ht(t.get(w,C),I))return v=!1,!1});return v&&t.size===m}o(mt,st);function mt(t,r){if(!(this instanceof mt))return new mt(t,r);if(this._value=t,this.size=r===void 0?1/0:Math.max(0,r),this.size===0){if(Dr)return Dr;Dr=this}}mt.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},mt.prototype.get=function(t,r){return this.has(t)?this._value:r},mt.prototype.includes=function(t){return ht(this._value,t)},mt.prototype.slice=function(t,r){var a=this.size;return F(t,r,a)?this:new mt(this._value,q(r,a)-B(t,a))},mt.prototype.reverse=function(){return this},mt.prototype.indexOf=function(t){return ht(this._value,t)?0:-1},mt.prototype.lastIndexOf=function(t){return ht(this._value,t)?this.size:-1},mt.prototype.__iterate=function(t,r){for(var a=0;a<this.size;a++)if(t(this._value,a,this)===!1)return a+1;return a},mt.prototype.__iterator=function(t,r){var a=this,u=0;return new Y(function(){return u<a.size?rt(t,u++,a._value):Tt()})},mt.prototype.equals=function(t){return t instanceof mt?ht(this._value,t._value):Lr(t)};var Dr;function rr(t,r){if(!t)throw new Error(r)}o(vt,st);function vt(t,r,a){if(!(this instanceof vt))return new vt(t,r,a);if(rr(a!==0,"Cannot step a Range by 0"),t=t||0,r===void 0&&(r=1/0),a=a===void 0?1:Math.abs(a),r<t&&(a=-a),this._start=t,this._end=r,this._step=a,this.size=Math.max(0,Math.ceil((r-t)/a-1)+1),this.size===0){if(kr)return kr;kr=this}}vt.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},vt.prototype.get=function(t,r){return this.has(t)?this._start+$(this,t)*this._step:r},vt.prototype.includes=function(t){var r=(t-this._start)/this._step;return r>=0&&r<this.size&&r===Math.floor(r)},vt.prototype.slice=function(t,r){return F(t,r,this.size)?this:(t=B(t,this.size),r=q(r,this.size),r<=t?new vt(0,0):new vt(this.get(t,this._end),this.get(r,this._end),this._step))},vt.prototype.indexOf=function(t){var r=t-this._start;if(r%this._step===0){var a=r/this._step;if(a>=0&&a<this.size)return a}return-1},vt.prototype.lastIndexOf=function(t){return this.indexOf(t)},vt.prototype.__iterate=function(t,r){for(var a=this.size-1,u=this._step,c=r?this._start+a*u:this._start,h=0;h<=a;h++){if(t(c,h,this)===!1)return h+1;c+=r?-u:u}return h},vt.prototype.__iterator=function(t,r){var a=this.size-1,u=this._step,c=r?this._start+a*u:this._start,h=0;return new Y(function(){var v=c;return c+=r?-u:u,h>a?Tt():rt(t,h++,v)})},vt.prototype.equals=function(t){return t instanceof vt?this._start===t._start&&this._end===t._end&&this._step===t._step:Lr(this,t)};var kr;o(Zt,s);function Zt(){throw TypeError("Abstract")}o(qe,Zt);function qe(){}o(de,Zt);function de(){}o(nr,Zt);function nr(){}Zt.Keyed=qe,Zt.Indexed=de,Zt.Set=nr;var ze=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(r,a){r=r|0,a=a|0;var u=r&65535,c=a&65535;return u*c+((r>>>16)*c+u*(a>>>16)<<16>>>0)|0};function Gr(t){return t>>>1&1073741824|t&3221225471}function At(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var r=typeof t;if(r==="number"){if(t!==t||t===1/0)return 0;var a=t|0;for(a!==t&&(a^=t*4294967295);t>4294967295;)t/=4294967295,a^=t;return Gr(a)}if(r==="string")return t.length>Yu?Vu(t):Ur(t);if(typeof t.hashCode=="function")return t.hashCode();if(r==="object")return Wu(t);if(typeof t.toString=="function")return Ur(t.toString());throw new Error("Value type "+r+" cannot be hashed.")}function Vu(t){var r=Wr[t];return r===void 0&&(r=Ur(t),Vr===Xu&&(Vr=0,Wr={}),Vr++,Wr[t]=r),r}function Ur(t){for(var r=0,a=0;a<t.length;a++)r=31*r+t.charCodeAt(a)|0;return Gr(r)}function Wu(t){var r;if(Kr&&(r=jr.get(t),r!==void 0)||(r=t[ue],r!==void 0)||!Ii&&(r=t.propertyIsEnumerable&&t.propertyIsEnumerable[ue],r!==void 0||(r=Ju(t),r!==void 0)))return r;if(r=++$r,$r&1073741824&&($r=0),Kr)jr.set(t,r);else{if(Ei!==void 0&&Ei(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Ii)Object.defineProperty(t,ue,{enumerable:!1,configurable:!1,writable:!1,value:r});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[ue]=r;else if(t.nodeType!==void 0)t[ue]=r;else throw new Error("Unable to set a non-enumerable property on object.")}return r}var Ei=Object.isExtensible,Ii=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Ju(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Kr=typeof WeakMap=="function",jr;Kr&&(jr=new WeakMap);var $r=0,ue="__immutablehash__";typeof Symbol=="function"&&(ue=Symbol(ue));var Yu=16,Xu=255,Vr=0,Wr={};function bt(t){rr(t!==1/0,"Cannot perform this action with an infinite size.")}o(X,qe);function X(t){return t==null?Lt():Jr(t)&&!z(t)?t:Lt().withMutations(function(r){var a=f(t);bt(a.size),a.forEach(function(u,c){return r.set(c,u)})})}X.of=function(){var t=i.call(arguments,0);return Lt().withMutations(function(r){for(var a=0;a<t.length;a+=2){if(a+1>=t.length)throw new Error("Missing value for key: "+t[a]);r.set(t[a],t[a+1])}})},X.prototype.toString=function(){return this.__toString("Map {","}")},X.prototype.get=function(t,r){return this._root?this._root.get(0,void 0,t,r):r},X.prototype.set=function(t,r){return Oi(this,t,r)},X.prototype.setIn=function(t,r){return this.updateIn(t,C,function(){return r})},X.prototype.remove=function(t){return Oi(this,t,C)},X.prototype.deleteIn=function(t){return this.updateIn(t,function(){return C})},X.prototype.update=function(t,r,a){return arguments.length===1?t(this):this.updateIn([t],r,a)},X.prototype.updateIn=function(t,r,a){a||(a=r,r=void 0);var u=Fi(this,xi(t),r,a);return u===C?void 0:u},X.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Lt()},X.prototype.merge=function(){return ir(this,void 0,arguments)},X.prototype.mergeWith=function(t){var r=i.call(arguments,1);return ir(this,t,r)},X.prototype.mergeIn=function(t){var r=i.call(arguments,1);return this.updateIn(t,Lt(),function(a){return typeof a.merge=="function"?a.merge.apply(a,r):r[r.length-1]})},X.prototype.mergeDeep=function(){return ir(this,bi,arguments)},X.prototype.mergeDeepWith=function(t){var r=i.call(arguments,1);return ir(this,Mi(t),r)},X.prototype.mergeDeepIn=function(t){var r=i.call(arguments,1);return this.updateIn(t,Lt(),function(a){return typeof a.mergeDeep=="function"?a.mergeDeep.apply(a,r):r[r.length-1]})},X.prototype.sort=function(t){return ct(Ee(this,t))},X.prototype.sortBy=function(t,r){return ct(Ee(this,r,t))},X.prototype.withMutations=function(t){var r=this.asMutable();return t(r),r.wasAltered()?r.__ensureOwner(this.__ownerID):this},X.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new nt)},X.prototype.asImmutable=function(){return this.__ensureOwner()},X.prototype.wasAltered=function(){return this.__altered},X.prototype.__iterator=function(t,r){return new Yr(this,t,r)},X.prototype.__iterate=function(t,r){var a=this,u=0;return this._root&&this._root.iterate(function(c){return u++,t(c[1],c[0],a)},r),u},X.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qr(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function Jr(t){return!!(t&&t[wi])}X.isMap=Jr;var wi="@@__IMMUTABLE_MAP__@@",J=X.prototype;J[wi]=!0,J[y]=J.remove,J.removeIn=J.deleteIn;function Ne(t,r){this.ownerID=t,this.entries=r}Ne.prototype.get=function(t,r,a,u){for(var c=this.entries,h=0,v=c.length;h<v;h++)if(ht(a,c[h][0]))return c[h][1];return u},Ne.prototype.update=function(t,r,a,u,c,h,v){for(var m=c===C,I=this.entries,w=0,M=I.length;w<M&&!ht(u,I[w][0]);w++);var N=w<M;if(N?I[w][1]===c:m)return this;if(k(v),(m||!N)&&k(h),!(m&&I.length===1)){if(!N&&!m&&I.length>=es)return Qu(t,I,u,c);var D=t&&t===this.ownerID,K=D?I:H(I);return N?m?w===M-1?K.pop():K[w]=K.pop():K[w]=[u,c]:K.push([u,c]),D?(this.entries=K,this):new Ne(t,K)}};function ve(t,r,a){this.ownerID=t,this.bitmap=r,this.nodes=a}ve.prototype.get=function(t,r,a,u){r===void 0&&(r=At(a));var c=1<<((t===0?r:r>>>t)&P),h=this.bitmap;return h&c?this.nodes[Ci(h&c-1)].get(t+_,r,a,u):u},ve.prototype.update=function(t,r,a,u,c,h,v){a===void 0&&(a=At(u));var m=(r===0?a:a>>>r)&P,I=1<<m,w=this.bitmap,M=(w&I)!==0;if(!M&&c===C)return this;var N=Ci(w&I-1),D=this.nodes,K=M?D[N]:void 0,W=Zr(K,t,r+_,a,u,c,h,v);if(W===K)return this;if(!M&&W&&D.length>=rs)return xu(t,D,w,m,W);if(M&&!W&&D.length===2&&Ai(D[N^1]))return D[N^1];if(M&&W&&D.length===1&&Ai(W))return W;var at=t&&t===this.ownerID,Dt=M?W?w:w^I:w|I,Wt=M?W?Bi(D,N,W,at):ts(D,N,at):Hu(D,N,W,at);return at?(this.bitmap=Dt,this.nodes=Wt,this):new ve(t,Dt,Wt)};function Le(t,r,a){this.ownerID=t,this.count=r,this.nodes=a}Le.prototype.get=function(t,r,a,u){r===void 0&&(r=At(a));var c=(t===0?r:r>>>t)&P,h=this.nodes[c];return h?h.get(t+_,r,a,u):u},Le.prototype.update=function(t,r,a,u,c,h,v){a===void 0&&(a=At(u));var m=(r===0?a:a>>>r)&P,I=c===C,w=this.nodes,M=w[m];if(I&&!M)return this;var N=Zr(M,t,r+_,a,u,c,h,v);if(N===M)return this;var D=this.count;if(!M)D++;else if(!N&&(D--,D<ns))return Zu(t,w,D,m);var K=t&&t===this.ownerID,W=Bi(w,m,N,K);return K?(this.count=D,this.nodes=W,this):new Le(t,D,W)};function ye(t,r,a){this.ownerID=t,this.keyHash=r,this.entries=a}ye.prototype.get=function(t,r,a,u){for(var c=this.entries,h=0,v=c.length;h<v;h++)if(ht(a,c[h][0]))return c[h][1];return u},ye.prototype.update=function(t,r,a,u,c,h,v){a===void 0&&(a=At(u));var m=c===C;if(a!==this.keyHash)return m?this:(k(v),k(h),xr(this,t,r,a,[u,c]));for(var I=this.entries,w=0,M=I.length;w<M&&!ht(u,I[w][0]);w++);var N=w<M;if(N?I[w][1]===c:m)return this;if(k(v),(m||!N)&&k(h),m&&M===2)return new Jt(t,this.keyHash,I[w^1]);var D=t&&t===this.ownerID,K=D?I:H(I);return N?m?w===M-1?K.pop():K[w]=K.pop():K[w]=[u,c]:K.push([u,c]),D?(this.entries=K,this):new ye(t,this.keyHash,K)};function Jt(t,r,a){this.ownerID=t,this.keyHash=r,this.entry=a}Jt.prototype.get=function(t,r,a,u){return ht(a,this.entry[0])?this.entry[1]:u},Jt.prototype.update=function(t,r,a,u,c,h,v){var m=c===C,I=ht(u,this.entry[0]);if(I?c===this.entry[1]:m)return this;if(k(v),m){k(h);return}return I?t&&t===this.ownerID?(this.entry[1]=c,this):new Jt(t,this.keyHash,[u,c]):(k(h),xr(this,t,r,At(u),[u,c]))},Ne.prototype.iterate=ye.prototype.iterate=function(t,r){for(var a=this.entries,u=0,c=a.length-1;u<=c;u++)if(t(a[r?c-u:u])===!1)return!1},ve.prototype.iterate=Le.prototype.iterate=function(t,r){for(var a=this.nodes,u=0,c=a.length-1;u<=c;u++){var h=a[r?c-u:u];if(h&&h.iterate(t,r)===!1)return!1}},Jt.prototype.iterate=function(t,r){return t(this.entry)},o(Yr,Y);function Yr(t,r,a){this._type=r,this._reverse=a,this._stack=t._root&&Ti(t._root)}Yr.prototype.next=function(){for(var t=this._type,r=this._stack;r;){var a=r.node,u=r.index++,c;if(a.entry){if(u===0)return Xr(t,a.entry)}else if(a.entries){if(c=a.entries.length-1,u<=c)return Xr(t,a.entries[this._reverse?c-u:u])}else if(c=a.nodes.length-1,u<=c){var h=a.nodes[this._reverse?c-u:u];if(h){if(h.entry)return Xr(t,h.entry);r=this._stack=Ti(h,r)}continue}r=this._stack=this._stack.__prev}return Tt()};function Xr(t,r){return rt(t,r[0],r[1])}function Ti(t,r){return{node:t,index:0,__prev:r}}function Qr(t,r,a,u){var c=Object.create(J);return c.size=t,c._root=r,c.__ownerID=a,c.__hash=u,c.__altered=!1,c}var Pi;function Lt(){return Pi||(Pi=Qr(0))}function Oi(t,r,a){var u,c;if(t._root){var h=G(V),v=G(U);if(u=Zr(t._root,t.__ownerID,0,void 0,r,a,h,v),!v.value)return t;c=t.size+(h.value?a===C?-1:1:0)}else{if(a===C)return t;c=1,u=new Ne(t.__ownerID,[[r,a]])}return t.__ownerID?(t.size=c,t._root=u,t.__hash=void 0,t.__altered=!0,t):u?Qr(c,u):Lt()}function Zr(t,r,a,u,c,h,v,m){return t?t.update(r,a,u,c,h,v,m):h===C?t:(k(m),k(v),new Jt(r,u,[c,h]))}function Ai(t){return t.constructor===Jt||t.constructor===ye}function xr(t,r,a,u,c){if(t.keyHash===u)return new ye(r,u,[t.entry,c]);var h=(a===0?t.keyHash:t.keyHash>>>a)&P,v=(a===0?u:u>>>a)&P,m,I=h===v?[xr(t,r,a+_,u,c)]:(m=new Jt(r,u,c),h<v?[t,m]:[m,t]);return new ve(r,1<<h|1<<v,I)}function Qu(t,r,a,u){t||(t=new nt);for(var c=new Jt(t,At(a),[a,u]),h=0;h<r.length;h++){var v=r[h];c=c.update(t,0,void 0,v[0],v[1])}return c}function Zu(t,r,a,u){for(var c=0,h=0,v=new Array(a),m=0,I=1,w=r.length;m<w;m++,I<<=1){var M=r[m];M!==void 0&&m!==u&&(c|=I,v[h++]=M)}return new ve(t,c,v)}function xu(t,r,a,u,c){for(var h=0,v=new Array(O),m=0;a!==0;m++,a>>>=1)v[m]=a&1?r[h++]:void 0;return v[u]=c,new Le(t,h+1,v)}function ir(t,r,a){for(var u=[],c=0;c<a.length;c++){var h=a[c],v=f(h);g(h)||(v=v.map(function(m){return qr(m)})),u.push(v)}return Ri(t,r,u)}function bi(t,r,a){return t&&t.mergeDeep&&g(r)?t.mergeDeep(r):ht(t,r)?t:r}function Mi(t){return function(r,a,u){if(r&&r.mergeDeepWith&&g(a))return r.mergeDeepWith(t,a);var c=t(r,a,u);return ht(r,c)?r:c}}function Ri(t,r,a){return a=a.filter(function(u){return u.size!==0}),a.length===0?t:t.size===0&&!t.__ownerID&&a.length===1?t.constructor(a[0]):t.withMutations(function(u){for(var c=r?function(v,m){u.update(m,C,function(I){return I===C?v:r(I,v,m)})}:function(v,m){u.set(m,v)},h=0;h<a.length;h++)a[h].forEach(c)})}function Fi(t,r,a,u){var c=t===C,h=r.next();if(h.done){var v=c?a:t,m=u(v);return m===v?t:m}rr(c||t&&t.set,"invalid keyPath");var I=h.value,w=c?C:t.get(I,C),M=Fi(w,r,a,u);return M===w?t:M===C?t.remove(I):(c?Lt():t).set(I,M)}function Ci(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function Bi(t,r,a,u){var c=u?t:H(t);return c[r]=a,c}function Hu(t,r,a,u){var c=t.length+1;if(u&&r+1===c)return t[r]=a,t;for(var h=new Array(c),v=0,m=0;m<c;m++)m===r?(h[m]=a,v=-1):h[m]=t[m+v];return h}function ts(t,r,a){var u=t.length-1;if(a&&r===u)return t.pop(),t;for(var c=new Array(u),h=0,v=0;v<u;v++)v===r&&(h=1),c[v]=t[v+h];return c}var es=O/4,rs=O/2,ns=O/4;o(it,de);function it(t){var r=Hr();if(t==null)return r;if(qi(t))return t;var a=d(t),u=a.size;return u===0?r:(bt(u),u>0&&u<O?ke(0,u,_,null,new xt(a.toArray())):r.withMutations(function(c){c.setSize(u),a.forEach(function(h,v){return c.set(v,h)})}))}it.of=function(){return this(arguments)},it.prototype.toString=function(){return this.__toString("List [","]")},it.prototype.get=function(t,r){if(t=$(this,t),t>=0&&t<this.size){t+=this._origin;var a=Di(this,t);return a&&a.array[t&P]}return r},it.prototype.set=function(t,r){return is(this,t,r)},it.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},it.prototype.insert=function(t,r){return this.splice(t,0,r)},it.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=_,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Hr()},it.prototype.push=function(){var t=arguments,r=this.size;return this.withMutations(function(a){Ht(a,0,r+t.length);for(var u=0;u<t.length;u++)a.set(r+u,t[u])})},it.prototype.pop=function(){return Ht(this,0,-1)},it.prototype.unshift=function(){var t=arguments;return this.withMutations(function(r){Ht(r,-t.length);for(var a=0;a<t.length;a++)r.set(a,t[a])})},it.prototype.shift=function(){return Ht(this,1)},it.prototype.merge=function(){return or(this,void 0,arguments)},it.prototype.mergeWith=function(t){var r=i.call(arguments,1);return or(this,t,r)},it.prototype.mergeDeep=function(){return or(this,bi,arguments)},it.prototype.mergeDeepWith=function(t){var r=i.call(arguments,1);return or(this,Mi(t),r)},it.prototype.setSize=function(t){return Ht(this,0,t)},it.prototype.slice=function(t,r){var a=this.size;return F(t,r,a)?this:Ht(this,B(t,a),q(r,a))},it.prototype.__iterator=function(t,r){var a=0,u=Ni(this,r);return new Y(function(){var c=u();return c===De?Tt():rt(t,a++,c)})},it.prototype.__iterate=function(t,r){for(var a=0,u=Ni(this,r),c;(c=u())!==De&&t(c,a++,this)!==!1;);return a},it.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ke(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function qi(t){return!!(t&&t[zi])}it.isList=qi;var zi="@@__IMMUTABLE_LIST__@@",Et=it.prototype;Et[zi]=!0,Et[y]=Et.remove,Et.setIn=J.setIn,Et.deleteIn=Et.removeIn=J.removeIn,Et.update=J.update,Et.updateIn=J.updateIn,Et.mergeIn=J.mergeIn,Et.mergeDeepIn=J.mergeDeepIn,Et.withMutations=J.withMutations,Et.asMutable=J.asMutable,Et.asImmutable=J.asImmutable,Et.wasAltered=J.wasAltered;function xt(t,r){this.array=t,this.ownerID=r}xt.prototype.removeBefore=function(t,r,a){if(a===r?1<<r:this.array.length===0)return this;var u=a>>>r&P;if(u>=this.array.length)return new xt([],t);var c=u===0,h;if(r>0){var v=this.array[u];if(h=v&&v.removeBefore(t,r-_,a),h===v&&c)return this}if(c&&!h)return this;var m=_e(this,t);if(!c)for(var I=0;I<u;I++)m.array[I]=void 0;return h&&(m.array[u]=h),m},xt.prototype.removeAfter=function(t,r,a){if(a===(r?1<<r:0)||this.array.length===0)return this;var u=a-1>>>r&P;if(u>=this.array.length)return this;var c;if(r>0){var h=this.array[u];if(c=h&&h.removeAfter(t,r-_,a),c===h&&u===this.array.length-1)return this}var v=_e(this,t);return v.array.splice(u+1),c&&(v.array[u]=c),v};var De={};function Ni(t,r){var a=t._origin,u=t._capacity,c=Ge(u),h=t._tail;return v(t._root,t._level,0);function v(w,M,N){return M===0?m(w,N):I(w,M,N)}function m(w,M){var N=M===c?h&&h.array:w&&w.array,D=M>a?0:a-M,K=u-M;return K>O&&(K=O),function(){if(D===K)return De;var W=r?--K:D++;return N&&N[W]}}function I(w,M,N){var D,K=w&&w.array,W=N>a?0:a-N>>M,at=(u-N>>M)+1;return at>O&&(at=O),function(){do{if(D){var Dt=D();if(Dt!==De)return Dt;D=null}if(W===at)return De;var Wt=r?--at:W++;D=v(K&&K[Wt],M-_,N+(Wt<<M))}while(!0)}}}function ke(t,r,a,u,c,h,v){var m=Object.create(Et);return m.size=r-t,m._origin=t,m._capacity=r,m._level=a,m._root=u,m._tail=c,m.__ownerID=h,m.__hash=v,m.__altered=!1,m}var Li;function Hr(){return Li||(Li=ke(0,0,_))}function is(t,r,a){if(r=$(t,r),r!==r)return t;if(r>=t.size||r<0)return t.withMutations(function(v){r<0?Ht(v,r).set(0,a):Ht(v,0,r+1).set(r,a)});r+=t._origin;var u=t._tail,c=t._root,h=G(U);return r>=Ge(t._capacity)?u=tn(u,t.__ownerID,0,r,a,h):c=tn(c,t.__ownerID,t._level,r,a,h),h.value?t.__ownerID?(t._root=c,t._tail=u,t.__hash=void 0,t.__altered=!0,t):ke(t._origin,t._capacity,t._level,c,u):t}function tn(t,r,a,u,c,h){var v=u>>>a&P,m=t&&v<t.array.length;if(!m&&c===void 0)return t;var I;if(a>0){var w=t&&t.array[v],M=tn(w,r,a-_,u,c,h);return M===w?t:(I=_e(t,r),I.array[v]=M,I)}return m&&t.array[v]===c?t:(k(h),I=_e(t,r),c===void 0&&v===I.array.length-1?I.array.pop():I.array[v]=c,I)}function _e(t,r){return r&&t&&r===t.ownerID?t:new xt(t?t.array.slice():[],r)}function Di(t,r){if(r>=Ge(t._capacity))return t._tail;if(r<1<<t._level+_){for(var a=t._root,u=t._level;a&&u>0;)a=a.array[r>>>u&P],u-=_;return a}}function Ht(t,r,a){r!==void 0&&(r=r|0),a!==void 0&&(a=a|0);var u=t.__ownerID||new nt,c=t._origin,h=t._capacity,v=c+r,m=a===void 0?h:a<0?h+a:c+a;if(v===c&&m===h)return t;if(v>=m)return t.clear();for(var I=t._level,w=t._root,M=0;v+M<0;)w=new xt(w&&w.array.length?[void 0,w]:[],u),I+=_,M+=1<<I;M&&(v+=M,c+=M,m+=M,h+=M);for(var N=Ge(h),D=Ge(m);D>=1<<I+_;)w=new xt(w&&w.array.length?[w]:[],u),I+=_;var K=t._tail,W=D<N?Di(t,m-1):D>N?new xt([],u):K;if(K&&D>N&&v<h&&K.array.length){w=_e(w,u);for(var at=w,Dt=I;Dt>_;Dt-=_){var Wt=N>>>Dt&P;at=at.array[Wt]=_e(at.array[Wt],u)}at.array[N>>>_&P]=K}if(m<h&&(W=W&&W.removeAfter(u,0,m)),v>=D)v-=D,m-=D,I=_,w=null,W=W&&W.removeBefore(u,0,v);else if(v>c||D<N){for(M=0;w;){var lr=v>>>I&P;if(lr!==D>>>I&P)break;lr&&(M+=(1<<I)*lr),I-=_,w=w.array[lr]}w&&v>c&&(w=w.removeBefore(u,I,v-M)),w&&D<N&&(w=w.removeAfter(u,I,D-M)),M&&(v-=M,m-=M)}return t.__ownerID?(t.size=m-v,t._origin=v,t._capacity=m,t._level=I,t._root=w,t._tail=W,t.__hash=void 0,t.__altered=!0,t):ke(v,m,I,w,W)}function or(t,r,a){for(var u=[],c=0,h=0;h<a.length;h++){var v=a[h],m=d(v);m.size>c&&(c=m.size),g(v)||(m=m.map(function(I){return qr(I)})),u.push(m)}return c>t.size&&(t=t.setSize(c)),Ri(t,r,u)}function Ge(t){return t<O?0:t-1>>>_<<_}o(ct,X);function ct(t){return t==null?ar():ki(t)?t:ar().withMutations(function(r){var a=f(t);bt(a.size),a.forEach(function(u,c){return r.set(c,u)})})}ct.of=function(){return this(arguments)},ct.prototype.toString=function(){return this.__toString("OrderedMap {","}")},ct.prototype.get=function(t,r){var a=this._map.get(t);return a!==void 0?this._list.get(a)[1]:r},ct.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ar()},ct.prototype.set=function(t,r){return Ui(this,t,r)},ct.prototype.remove=function(t){return Ui(this,t,C)},ct.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},ct.prototype.__iterate=function(t,r){var a=this;return this._list.__iterate(function(u){return u&&t(u[1],u[0],a)},r)},ct.prototype.__iterator=function(t,r){return this._list.fromEntrySeq().__iterator(t,r)},ct.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var r=this._map.__ensureOwner(t),a=this._list.__ensureOwner(t);return t?en(r,a,t,this.__hash):(this.__ownerID=t,this._map=r,this._list=a,this)};function ki(t){return Jr(t)&&z(t)}ct.isOrderedMap=ki,ct.prototype[p]=!0,ct.prototype[y]=ct.prototype.remove;function en(t,r,a,u){var c=Object.create(ct.prototype);return c.size=t?t.size:0,c._map=t,c._list=r,c.__ownerID=a,c.__hash=u,c}var Gi;function ar(){return Gi||(Gi=en(Lt(),Hr()))}function Ui(t,r,a){var u=t._map,c=t._list,h=u.get(r),v=h!==void 0,m,I;if(a===C){if(!v)return t;c.size>=O&&c.size>=u.size*2?(I=c.filter(function(w,M){return w!==void 0&&h!==M}),m=I.toKeyedSeq().map(function(w){return w[0]}).flip().toMap(),t.__ownerID&&(m.__ownerID=I.__ownerID=t.__ownerID)):(m=u.remove(r),I=h===c.size-1?c.pop():c.set(h,void 0))}else if(v){if(a===c.get(h)[1])return t;m=u,I=c.set(h,[r,a])}else m=u.set(r,c.size),I=c.set(c.size,[r,a]);return t.__ownerID?(t.size=m.size,t._map=m,t._list=I,t.__hash=void 0,t):en(m,I)}o(qt,Bt);function qt(t,r){this._iter=t,this._useKeys=r,this.size=t.size}qt.prototype.get=function(t,r){return this._iter.get(t,r)},qt.prototype.has=function(t){return this._iter.has(t)},qt.prototype.valueSeq=function(){return this._iter.valueSeq()},qt.prototype.reverse=function(){var t=this,r=rn(this,!0);return this._useKeys||(r.valueSeq=function(){return t._iter.toSeq().reverse()}),r},qt.prototype.map=function(t,r){var a=this,u=ji(this,t,r);return this._useKeys||(u.valueSeq=function(){return a._iter.toSeq().map(t,r)}),u},qt.prototype.__iterate=function(t,r){var a=this,u;return this._iter.__iterate(this._useKeys?function(c,h){return t(c,h,a)}:(u=r?Xi(this):0,function(c){return t(c,r?--u:u++,a)}),r)},qt.prototype.__iterator=function(t,r){if(this._useKeys)return this._iter.__iterator(t,r);var a=this._iter.__iterator(tt,r),u=r?Xi(this):0;return new Y(function(){var c=a.next();return c.done?c:rt(t,r?--u:u++,c.value,c)})},qt.prototype[p]=!0,o(me,st);function me(t){this._iter=t,this.size=t.size}me.prototype.includes=function(t){return this._iter.includes(t)},me.prototype.__iterate=function(t,r){var a=this,u=0;return this._iter.__iterate(function(c){return t(c,u++,a)},r)},me.prototype.__iterator=function(t,r){var a=this._iter.__iterator(tt,r),u=0;return new Y(function(){var c=a.next();return c.done?c:rt(t,u++,c.value,c)})},o(ge,Ut);function ge(t){this._iter=t,this.size=t.size}ge.prototype.has=function(t){return this._iter.includes(t)},ge.prototype.__iterate=function(t,r){var a=this;return this._iter.__iterate(function(u){return t(u,u,a)},r)},ge.prototype.__iterator=function(t,r){var a=this._iter.__iterator(tt,r);return new Y(function(){var u=a.next();return u.done?u:rt(t,u.value,u.value,u)})},o(Se,Bt);function Se(t){this._iter=t,this.size=t.size}Se.prototype.entrySeq=function(){return this._iter.toSeq()},Se.prototype.__iterate=function(t,r){var a=this;return this._iter.__iterate(function(u){if(u){Yi(u);var c=g(u);return t(c?u.get(1):u[1],c?u.get(0):u[0],a)}},r)},Se.prototype.__iterator=function(t,r){var a=this._iter.__iterator(tt,r);return new Y(function(){for(;;){var u=a.next();if(u.done)return u;var c=u.value;if(c){Yi(c);var h=g(c);return rt(t,h?c.get(0):c[0],h?c.get(1):c[1],u)}}})},me.prototype.cacheResult=qt.prototype.cacheResult=ge.prototype.cacheResult=Se.prototype.cacheResult=an;function Ki(t){var r=jt(t);return r._iter=t,r.size=t.size,r.flip=function(){return t},r.reverse=function(){var a=t.reverse.apply(this);return a.flip=function(){return t.reverse()},a},r.has=function(a){return t.includes(a)},r.includes=function(a){return t.has(a)},r.cacheResult=an,r.__iterateUncached=function(a,u){var c=this;return t.__iterate(function(h,v){return a(v,h,c)!==!1},u)},r.__iteratorUncached=function(a,u){if(a===ut){var c=t.__iterator(a,u);return new Y(function(){var h=c.next();if(!h.done){var v=h.value[0];h.value[0]=h.value[1],h.value[1]=v}return h})}return t.__iterator(a===tt?Q:tt,u)},r}function ji(t,r,a){var u=jt(t);return u.size=t.size,u.has=function(c){return t.has(c)},u.get=function(c,h){var v=t.get(c,C);return v===C?h:r.call(a,v,c,t)},u.__iterateUncached=function(c,h){var v=this;return t.__iterate(function(m,I,w){return c(r.call(a,m,I,w),I,v)!==!1},h)},u.__iteratorUncached=function(c,h){var v=t.__iterator(ut,h);return new Y(function(){var m=v.next();if(m.done)return m;var I=m.value,w=I[0];return rt(c,w,r.call(a,I[1],w,t),m)})},u}function rn(t,r){var a=jt(t);return a._iter=t,a.size=t.size,a.reverse=function(){return t},t.flip&&(a.flip=function(){var u=Ki(t);return u.reverse=function(){return t.flip()},u}),a.get=function(u,c){return t.get(r?u:-1-u,c)},a.has=function(u){return t.has(r?u:-1-u)},a.includes=function(u){return t.includes(u)},a.cacheResult=an,a.__iterate=function(u,c){var h=this;return t.__iterate(function(v,m){return u(v,m,h)},!c)},a.__iterator=function(u,c){return t.__iterator(u,!c)},a}function $i(t,r,a,u){var c=jt(t);return u&&(c.has=function(h){var v=t.get(h,C);return v!==C&&!!r.call(a,v,h,t)},c.get=function(h,v){var m=t.get(h,C);return m!==C&&r.call(a,m,h,t)?m:v}),c.__iterateUncached=function(h,v){var m=this,I=0;return t.__iterate(function(w,M,N){if(r.call(a,w,M,N))return I++,h(w,u?M:I-1,m)},v),I},c.__iteratorUncached=function(h,v){var m=t.__iterator(ut,v),I=0;return new Y(function(){for(;;){var w=m.next();if(w.done)return w;var M=w.value,N=M[0],D=M[1];if(r.call(a,D,N,t))return rt(h,u?N:I++,D,w)}})},c}function os(t,r,a){var u=X().asMutable();return t.__iterate(function(c,h){u.update(r.call(a,c,h,t),0,function(v){return v+1})}),u.asImmutable()}function as(t,r,a){var u=S(t),c=(z(t)?ct():X()).asMutable();t.__iterate(function(v,m){c.update(r.call(a,v,m,t),function(I){return I=I||[],I.push(u?[m,v]:v),I})});var h=Qi(t);return c.map(function(v){return et(t,h(v))})}function nn(t,r,a,u){var c=t.size;if(r!==void 0&&(r=r|0),a!==void 0&&(a===1/0?a=c:a=a|0),F(r,a,c))return t;var h=B(r,c),v=q(a,c);if(h!==h||v!==v)return nn(t.toSeq().cacheResult(),r,a,u);var m=v-h,I;m===m&&(I=m<0?0:m);var w=jt(t);return w.size=I===0?I:t.size&&I||void 0,!u&&Cr(t)&&I>=0&&(w.get=function(M,N){return M=$(this,M),M>=0&&M<I?t.get(M+h,N):N}),w.__iterateUncached=function(M,N){var D=this;if(I===0)return 0;if(N)return this.cacheResult().__iterate(M,N);var K=0,W=!0,at=0;return t.__iterate(function(Dt,Wt){if(!(W&&(W=K++<h)))return at++,M(Dt,u?Wt:at-1,D)!==!1&&at!==I}),at},w.__iteratorUncached=function(M,N){if(I!==0&&N)return this.cacheResult().__iterator(M,N);var D=I!==0&&t.__iterator(M,N),K=0,W=0;return new Y(function(){for(;K++<h;)D.next();if(++W>I)return Tt();var at=D.next();return u||M===tt?at:M===Q?rt(M,W-1,void 0,at):rt(M,W-1,at.value[1],at)})},w}function us(t,r,a){var u=jt(t);return u.__iterateUncached=function(c,h){var v=this;if(h)return this.cacheResult().__iterate(c,h);var m=0;return t.__iterate(function(I,w,M){return r.call(a,I,w,M)&&++m&&c(I,w,v)}),m},u.__iteratorUncached=function(c,h){var v=this;if(h)return this.cacheResult().__iterator(c,h);var m=t.__iterator(ut,h),I=!0;return new Y(function(){if(!I)return Tt();var w=m.next();if(w.done)return w;var M=w.value,N=M[0],D=M[1];return r.call(a,D,N,v)?c===ut?w:rt(c,N,D,w):(I=!1,Tt())})},u}function Vi(t,r,a,u){var c=jt(t);return c.__iterateUncached=function(h,v){var m=this;if(v)return this.cacheResult().__iterate(h,v);var I=!0,w=0;return t.__iterate(function(M,N,D){if(!(I&&(I=r.call(a,M,N,D))))return w++,h(M,u?N:w-1,m)}),w},c.__iteratorUncached=function(h,v){var m=this;if(v)return this.cacheResult().__iterator(h,v);var I=t.__iterator(ut,v),w=!0,M=0;return new Y(function(){var N,D,K;do{if(N=I.next(),N.done)return u||h===tt?N:h===Q?rt(h,M++,void 0,N):rt(h,M++,N.value[1],N);var W=N.value;D=W[0],K=W[1],w&&(w=r.call(a,K,D,m))}while(w);return h===ut?N:rt(h,D,K,N)})},c}function ss(t,r){var a=S(t),u=[t].concat(r).map(function(v){return g(v)?a&&(v=f(v)):v=a?yi(v):Br(Array.isArray(v)?v:[v]),v}).filter(function(v){return v.size!==0});if(u.length===0)return t;if(u.length===1){var c=u[0];if(c===t||a&&S(c)||R(t)&&R(c))return c}var h=new Kt(u);return a?h=h.toKeyedSeq():R(t)||(h=h.toSetSeq()),h=h.flatten(!0),h.size=u.reduce(function(v,m){if(v!==void 0){var I=m.size;if(I!==void 0)return v+I}},0),h}function Wi(t,r,a){var u=jt(t);return u.__iterateUncached=function(c,h){var v=0,m=!1;function I(w,M){var N=this;w.__iterate(function(D,K){return(!r||M<r)&&g(D)?I(D,M+1):c(D,a?K:v++,N)===!1&&(m=!0),!m},h)}return I(t,0),v},u.__iteratorUncached=function(c,h){var v=t.__iterator(c,h),m=[],I=0;return new Y(function(){for(;v;){var w=v.next();if(w.done!==!1){v=m.pop();continue}var M=w.value;if(c===ut&&(M=M[1]),(!r||m.length<r)&&g(M))m.push(v),v=M.__iterator(c,h);else return a?w:rt(c,I++,M,w)}return Tt()})},u}function cs(t,r,a){var u=Qi(t);return t.toSeq().map(function(c,h){return u(r.call(a,c,h,t))}).flatten(!0)}function fs(t,r){var a=jt(t);return a.size=t.size&&t.size*2-1,a.__iterateUncached=function(u,c){var h=this,v=0;return t.__iterate(function(m,I){return(!v||u(r,v++,h)!==!1)&&u(m,v++,h)!==!1},c),v},a.__iteratorUncached=function(u,c){var h=t.__iterator(tt,c),v=0,m;return new Y(function(){return(!m||v%2)&&(m=h.next(),m.done)?m:v%2?rt(u,v++,r):rt(u,v++,m.value,m)})},a}function Ee(t,r,a){r||(r=Zi);var u=S(t),c=0,h=t.toSeq().map(function(v,m){return[m,v,c++,a?a(v,m,t):v]}).toArray();return h.sort(function(v,m){return r(v[3],m[3])||v[2]-m[2]}).forEach(u?function(v,m){h[m].length=2}:function(v,m){h[m]=v[1]}),u?Bt(h):R(t)?st(h):Ut(h)}function ur(t,r,a){if(r||(r=Zi),a){var u=t.toSeq().map(function(c,h){return[c,a(c,h,t)]}).reduce(function(c,h){return Ji(r,c[1],h[1])?h:c});return u&&u[0]}else return t.reduce(function(c,h){return Ji(r,c,h)?h:c})}function Ji(t,r,a){var u=t(a,r);return u===0&&a!==r&&(a==null||a!==a)||u>0}function on(t,r,a){var u=jt(t);return u.size=new Kt(a).map(function(c){return c.size}).min(),u.__iterate=function(c,h){for(var v=this.__iterator(tt,h),m,I=0;!(m=v.next()).done&&c(m.value,I++,this)!==!1;);return I},u.__iteratorUncached=function(c,h){var v=a.map(function(w){return w=s(w),Fe(h?w.reverse():w)}),m=0,I=!1;return new Y(function(){var w;return I||(w=v.map(function(M){return M.next()}),I=w.some(function(M){return M.done})),I?Tt():rt(c,m++,r.apply(null,w.map(function(M){return M.value})))})},u}function et(t,r){return Cr(t)?r:t.constructor(r)}function Yi(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Xi(t){return bt(t.size),j(t)}function Qi(t){return S(t)?f:R(t)?d:l}function jt(t){return Object.create((S(t)?Bt:R(t)?st:Ut).prototype)}function an(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):pt.prototype.cacheResult.call(this)}function Zi(t,r){return t>r?1:t<r?-1:0}function xi(t){var r=Fe(t);if(!r){if(!pi(t))throw new TypeError("Expected iterable or array-like: "+t);r=Fe(s(t))}return r}o(Mt,qe);function Mt(t,r){var a,u=function(v){if(v instanceof u)return v;if(!(this instanceof u))return new u(v);if(!a){a=!0;var m=Object.keys(t);hs(c,m),c.size=m.length,c._name=r,c._keys=m,c._defaultValues=t}this._map=X(v)},c=u.prototype=Object.create(yt);return c.constructor=u,u}Mt.prototype.toString=function(){return this.__toString(Hi(this)+" {","}")},Mt.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Mt.prototype.get=function(t,r){if(!this.has(t))return r;var a=this._defaultValues[t];return this._map?this._map.get(t,a):a},Mt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=sr(this,Lt()))},Mt.prototype.set=function(t,r){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Hi(this));if(this._map&&!this._map.has(t)){var a=this._defaultValues[t];if(r===a)return this}var u=this._map&&this._map.set(t,r);return this.__ownerID||u===this._map?this:sr(this,u)},Mt.prototype.remove=function(t){if(!this.has(t))return this;var r=this._map&&this._map.remove(t);return this.__ownerID||r===this._map?this:sr(this,r)},Mt.prototype.wasAltered=function(){return this._map.wasAltered()},Mt.prototype.__iterator=function(t,r){var a=this;return f(this._defaultValues).map(function(u,c){return a.get(c)}).__iterator(t,r)},Mt.prototype.__iterate=function(t,r){var a=this;return f(this._defaultValues).map(function(u,c){return a.get(c)}).__iterate(t,r)},Mt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var r=this._map&&this._map.__ensureOwner(t);return t?sr(this,r,t):(this.__ownerID=t,this._map=r,this)};var yt=Mt.prototype;yt[y]=yt.remove,yt.deleteIn=yt.removeIn=J.removeIn,yt.merge=J.merge,yt.mergeWith=J.mergeWith,yt.mergeIn=J.mergeIn,yt.mergeDeep=J.mergeDeep,yt.mergeDeepWith=J.mergeDeepWith,yt.mergeDeepIn=J.mergeDeepIn,yt.setIn=J.setIn,yt.update=J.update,yt.updateIn=J.updateIn,yt.withMutations=J.withMutations,yt.asMutable=J.asMutable,yt.asImmutable=J.asImmutable;function sr(t,r,a){var u=Object.create(Object.getPrototypeOf(t));return u._map=r,u.__ownerID=a,u}function Hi(t){return t._name||t.constructor.name||"Record"}function hs(t,r){try{r.forEach(ls.bind(void 0,t))}catch{}}function ls(t,r){Object.defineProperty(t,r,{get:function(){return this.get(r)},set:function(a){rr(this.__ownerID,"Cannot set on an immutable record."),this.set(r,a)}})}o(ot,nr);function ot(t){return t==null?cn():un(t)&&!z(t)?t:cn().withMutations(function(r){var a=l(t);bt(a.size),a.forEach(function(u){return r.add(u)})})}ot.of=function(){return this(arguments)},ot.fromKeys=function(t){return this(f(t).keySeq())},ot.prototype.toString=function(){return this.__toString("Set {","}")},ot.prototype.has=function(t){return this._map.has(t)},ot.prototype.add=function(t){return sn(this,this._map.set(t,!0))},ot.prototype.remove=function(t){return sn(this,this._map.remove(t))},ot.prototype.clear=function(){return sn(this,this._map.clear())},ot.prototype.union=function(){var t=i.call(arguments,0);return t=t.filter(function(r){return r.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(r){for(var a=0;a<t.length;a++)l(t[a]).forEach(function(u){return r.add(u)})})},ot.prototype.intersect=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(a){return l(a)});var r=this;return this.withMutations(function(a){r.forEach(function(u){t.every(function(c){return c.includes(u)})||a.remove(u)})})},ot.prototype.subtract=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(a){return l(a)});var r=this;return this.withMutations(function(a){r.forEach(function(u){t.some(function(c){return c.includes(u)})&&a.remove(u)})})},ot.prototype.merge=function(){return this.union.apply(this,arguments)},ot.prototype.mergeWith=function(t){var r=i.call(arguments,1);return this.union.apply(this,r)},ot.prototype.sort=function(t){return $t(Ee(this,t))},ot.prototype.sortBy=function(t,r){return $t(Ee(this,r,t))},ot.prototype.wasAltered=function(){return this._map.wasAltered()},ot.prototype.__iterate=function(t,r){var a=this;return this._map.__iterate(function(u,c){return t(c,c,a)},r)},ot.prototype.__iterator=function(t,r){return this._map.map(function(a,u){return u}).__iterator(t,r)},ot.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var r=this._map.__ensureOwner(t);return t?this.__make(r,t):(this.__ownerID=t,this._map=r,this)};function un(t){return!!(t&&t[to])}ot.isSet=un;var to="@@__IMMUTABLE_SET__@@",Rt=ot.prototype;Rt[to]=!0,Rt[y]=Rt.remove,Rt.mergeDeep=Rt.merge,Rt.mergeDeepWith=Rt.mergeWith,Rt.withMutations=J.withMutations,Rt.asMutable=J.asMutable,Rt.asImmutable=J.asImmutable,Rt.__empty=cn,Rt.__make=eo;function sn(t,r){return t.__ownerID?(t.size=r.size,t._map=r,t):r===t._map?t:r.size===0?t.__empty():t.__make(r)}function eo(t,r){var a=Object.create(Rt);return a.size=t?t.size:0,a._map=t,a.__ownerID=r,a}var ro;function cn(){return ro||(ro=eo(Lt()))}o($t,ot);function $t(t){return t==null?fn():no(t)?t:fn().withMutations(function(r){var a=l(t);bt(a.size),a.forEach(function(u){return r.add(u)})})}$t.of=function(){return this(arguments)},$t.fromKeys=function(t){return this(f(t).keySeq())},$t.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function no(t){return un(t)&&z(t)}$t.isOrderedSet=no;var cr=$t.prototype;cr[p]=!0,cr.__empty=fn,cr.__make=io;function io(t,r){var a=Object.create(cr);return a.size=t?t.size:0,a._map=t,a.__ownerID=r,a}var oo;function fn(){return oo||(oo=io(ar()))}o(lt,de);function lt(t){return t==null?hn():ao(t)?t:hn().unshiftAll(t)}lt.of=function(){return this(arguments)},lt.prototype.toString=function(){return this.__toString("Stack [","]")},lt.prototype.get=function(t,r){var a=this._head;for(t=$(this,t);a&&t--;)a=a.next;return a?a.value:r},lt.prototype.peek=function(){return this._head&&this._head.value},lt.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,r=this._head,a=arguments.length-1;a>=0;a--)r={value:arguments[a],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ue(t,r)},lt.prototype.pushAll=function(t){if(t=d(t),t.size===0)return this;bt(t.size);var r=this.size,a=this._head;return t.reverse().forEach(function(u){r++,a={value:u,next:a}}),this.__ownerID?(this.size=r,this._head=a,this.__hash=void 0,this.__altered=!0,this):Ue(r,a)},lt.prototype.pop=function(){return this.slice(1)},lt.prototype.unshift=function(){return this.push.apply(this,arguments)},lt.prototype.unshiftAll=function(t){return this.pushAll(t)},lt.prototype.shift=function(){return this.pop.apply(this,arguments)},lt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):hn()},lt.prototype.slice=function(t,r){if(F(t,r,this.size))return this;var a=B(t,this.size),u=q(r,this.size);if(u!==this.size)return de.prototype.slice.call(this,t,r);for(var c=this.size-a,h=this._head;a--;)h=h.next;return this.__ownerID?(this.size=c,this._head=h,this.__hash=void 0,this.__altered=!0,this):Ue(c,h)},lt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ue(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},lt.prototype.__iterate=function(t,r){if(r)return this.reverse().__iterate(t);for(var a=0,u=this._head;u&&t(u.value,a++,this)!==!1;)u=u.next;return a},lt.prototype.__iterator=function(t,r){if(r)return this.reverse().__iterator(t);var a=0,u=this._head;return new Y(function(){if(u){var c=u.value;return u=u.next,rt(t,a++,c)}return Tt()})};function ao(t){return!!(t&&t[uo])}lt.isStack=ao;var uo="@@__IMMUTABLE_STACK__@@",Ie=lt.prototype;Ie[uo]=!0,Ie.withMutations=J.withMutations,Ie.asMutable=J.asMutable,Ie.asImmutable=J.asImmutable,Ie.wasAltered=J.wasAltered;function Ue(t,r,a,u){var c=Object.create(Ie);return c.size=t,c._head=r,c.__ownerID=a,c.__hash=u,c.__altered=!1,c}var so;function hn(){return so||(so=Ue(0))}function Vt(t,r){var a=function(u){t.prototype[u]=r[u]};return Object.keys(r).forEach(a),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(a),t}s.Iterator=Y,Vt(s,{toArray:function(){bt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(r,a){t[a]=r}),t},toIndexedSeq:function(){return new me(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new qt(this,!0)},toMap:function(){return X(this.toKeyedSeq())},toObject:function(){bt(this.size);var t={};return this.__iterate(function(r,a){t[a]=r}),t},toOrderedMap:function(){return ct(this.toKeyedSeq())},toOrderedSet:function(){return $t(S(this)?this.valueSeq():this)},toSet:function(){return ot(S(this)?this.valueSeq():this)},toSetSeq:function(){return new ge(this)},toSeq:function(){return R(this)?this.toIndexedSeq():S(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return lt(S(this)?this.valueSeq():this)},toList:function(){return it(S(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,r){return this.size===0?t+r:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){var t=i.call(arguments,0);return et(this,ss(this,t))},includes:function(t){return this.some(function(r){return ht(r,t)})},entries:function(){return this.__iterator(ut)},every:function(t,r){bt(this.size);var a=!0;return this.__iterate(function(u,c,h){if(!t.call(r,u,c,h))return a=!1,!1}),a},filter:function(t,r){return et(this,$i(this,t,r,!0))},find:function(t,r,a){var u=this.findEntry(t,r);return u?u[1]:a},forEach:function(t,r){return bt(this.size),this.__iterate(r?t.bind(r):t)},join:function(t){bt(this.size),t=t!==void 0?""+t:",";var r="",a=!0;return this.__iterate(function(u){a?a=!1:r+=t,r+=u!=null?u.toString():""}),r},keys:function(){return this.__iterator(Q)},map:function(t,r){return et(this,ji(this,t,r))},reduce:function(t,r,a){bt(this.size);var u,c;return arguments.length<2?c=!0:u=r,this.__iterate(function(h,v,m){c?(c=!1,u=h):u=t.call(a,u,h,v,m)}),u},reduceRight:function(t,r,a){var u=this.toKeyedSeq().reverse();return u.reduce.apply(u,arguments)},reverse:function(){return et(this,rn(this,!0))},slice:function(t,r){return et(this,nn(this,t,r,!0))},some:function(t,r){return!this.every(hr(t),r)},sort:function(t){return et(this,Ee(this,t))},values:function(){return this.__iterator(tt)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,r){return j(t?this.toSeq().filter(t,r):this)},countBy:function(t,r){return os(this,t,r)},equals:function(t){return Lr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Kt(t._cache);var r=t.toSeq().map(ds).toIndexedSeq();return r.fromEntrySeq=function(){return t.toSeq()},r},filterNot:function(t,r){return this.filter(hr(t),r)},findEntry:function(t,r,a){var u=a;return this.__iterate(function(c,h,v){if(t.call(r,c,h,v))return u=[h,c],!1}),u},findKey:function(t,r){var a=this.findEntry(t,r);return a&&a[0]},findLast:function(t,r,a){return this.toKeyedSeq().reverse().find(t,r,a)},findLastEntry:function(t,r,a){return this.toKeyedSeq().reverse().findEntry(t,r,a)},findLastKey:function(t,r){return this.toKeyedSeq().reverse().findKey(t,r)},first:function(){return this.find(Z)},flatMap:function(t,r){return et(this,cs(this,t,r))},flatten:function(t){return et(this,Wi(this,t,!0))},fromEntrySeq:function(){return new Se(this)},get:function(t,r){return this.find(function(a,u){return ht(u,t)},void 0,r)},getIn:function(t,r){for(var a=this,u=xi(t),c;!(c=u.next()).done;){var h=c.value;if(a=a&&a.get?a.get(h,C):C,a===C)return r}return a},groupBy:function(t,r){return as(this,t,r)},has:function(t){return this.get(t,C)!==C},hasIn:function(t){return this.getIn(t,C)!==C},isSubset:function(t){return t=typeof t.includes=="function"?t:s(t),this.every(function(r){return t.includes(r)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:s(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(r){return ht(r,t)})},keySeq:function(){return this.toSeq().map(ps).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ur(this,t)},maxBy:function(t,r){return ur(this,r,t)},min:function(t){return ur(this,t?co(t):ho)},minBy:function(t,r){return ur(this,r?co(r):ho,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return et(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,r){return et(this,Vi(this,t,r,!0))},skipUntil:function(t,r){return this.skipWhile(hr(t),r)},sortBy:function(t,r){return et(this,Ee(this,r,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return et(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,r){return et(this,us(this,t,r))},takeUntil:function(t,r){return this.takeWhile(hr(t),r)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ys(this))}});var It=s.prototype;It[A]=!0,It[Re]=It.values,It.__toJS=It.toArray,It.__toStringMapper=fo,It.inspect=It.toSource=function(){return this.toString()},It.chain=It.flatMap,It.contains=It.includes,Vt(f,{flip:function(){return et(this,Ki(this))},mapEntries:function(t,r){var a=this,u=0;return et(this,this.toSeq().map(function(c,h){return t.call(r,[h,c],u++,a)}).fromEntrySeq())},mapKeys:function(t,r){var a=this;return et(this,this.toSeq().flip().map(function(u,c){return t.call(r,u,c,a)}).flip())}});var fr=f.prototype;fr[b]=!0,fr[Re]=It.entries,fr.__toJS=It.toObject,fr.__toStringMapper=function(t,r){return JSON.stringify(r)+": "+fo(t)},Vt(d,{toKeyedSeq:function(){return new qt(this,!1)},filter:function(t,r){return et(this,$i(this,t,r,!1))},findIndex:function(t,r){var a=this.findEntry(t,r);return a?a[0]:-1},indexOf:function(t){var r=this.keyOf(t);return r===void 0?-1:r},lastIndexOf:function(t){var r=this.lastKeyOf(t);return r===void 0?-1:r},reverse:function(){return et(this,rn(this,!1))},slice:function(t,r){return et(this,nn(this,t,r,!1))},splice:function(t,r){var a=arguments.length;if(r=Math.max(r|0,0),a===0||a===2&&!r)return this;t=B(t,t<0?this.count():this.size);var u=this.slice(0,t);return et(this,a===1?u:u.concat(H(arguments,2),this.slice(t+r)))},findLastIndex:function(t,r){var a=this.findLastEntry(t,r);return a?a[0]:-1},first:function(){return this.get(0)},flatten:function(t){return et(this,Wi(this,t,!1))},get:function(t,r){return t=$(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?r:this.find(function(a,u){return u===t},void 0,r)},has:function(t){return t=$(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return et(this,fs(this,t))},interleave:function(){var t=[this].concat(H(arguments)),r=on(this.toSeq(),st.of,t),a=r.flatten(!0);return r.size&&(a.size=r.size*t.length),et(this,a)},keySeq:function(){return vt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,r){return et(this,Vi(this,t,r,!1))},zip:function(){var t=[this].concat(H(arguments));return et(this,on(this,vs,t))},zipWith:function(t){var r=H(arguments);return r[0]=this,et(this,on(this,t,r))}}),d.prototype[E]=!0,d.prototype[p]=!0,Vt(l,{get:function(t,r){return this.has(t)?t:r},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),l.prototype.has=It.includes,l.prototype.contains=l.prototype.includes,Vt(Bt,f.prototype),Vt(st,d.prototype),Vt(Ut,l.prototype),Vt(qe,f.prototype),Vt(de,d.prototype),Vt(nr,l.prototype);function ps(t,r){return r}function ds(t,r){return[r,t]}function hr(t){return function(){return!t.apply(this,arguments)}}function co(t){return function(){return-t.apply(this,arguments)}}function fo(t){return typeof t=="string"?JSON.stringify(t):String(t)}function vs(){return H(arguments)}function ho(t,r){return t<r?1:t>r?-1:0}function ys(t){if(t.size===1/0)return 0;var r=z(t),a=S(t),u=r?1:0,c=t.__iterate(a?r?function(h,v){u=31*u+lo(At(h),At(v))|0}:function(h,v){u=u+lo(At(h),At(v))|0}:r?function(h){u=31*u+At(h)|0}:function(h){u=u+At(h)|0});return _s(c,u)}function _s(t,r){return r=ze(r,3432918353),r=ze(r<<15|r>>>-15,461845907),r=ze(r<<13|r>>>-13,5),r=(r+3864292196|0)^t,r=ze(r^r>>>16,2246822507),r=ze(r^r>>>13,3266489909),r=Gr(r^r>>>16),r}function lo(t,r){return t^r+2654435769+(t<<6)+(t>>2)|0}var ms={Iterable:s,Seq:pt,Collection:Zt,Map:X,OrderedMap:ct,List:it,Stack:lt,Set:ot,OrderedSet:$t,Record:Mt,Range:vt,Repeat:mt,is:ht,fromJS:qr};return ms})}(ln)),ln.exports}var kt={},pr={},Pn="1.13.7",vo=typeof self=="object"&&self.self===self&&self||typeof pr=="object"&&pr.global===pr&&pr||Function("return this")()||{},Ir=Array.prototype,On=Object.prototype,yo=typeof Symbol<"u"?Symbol.prototype:null,Os=Ir.push,Ze=Ir.slice,Ve=On.toString,As=On.hasOwnProperty,pa=typeof ArrayBuffer<"u",bs=typeof DataView<"u",Ms=Array.isArray,_o=Object.keys,mo=Object.create,go=pa&&ArrayBuffer.isView,Rs=isNaN,Fs=isFinite,da=!{toString:null}.propertyIsEnumerable("toString"),So=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Cs=Math.pow(2,53)-1;function wt(e,n){return n=n==null?e.length-1:+n,function(){for(var i=Math.max(arguments.length-n,0),o=Array(i),s=0;s<i;s++)o[s]=arguments[s+n];switch(n){case 0:return e.call(this,o);case 1:return e.call(this,arguments[0],o);case 2:return e.call(this,arguments[0],arguments[1],o)}var f=Array(n+1);for(s=0;s<n;s++)f[s]=arguments[s];return f[n]=o,e.apply(this,f)}}function ne(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function va(e){return e===null}function An(e){return e===void 0}function bn(e){return e===!0||e===!1||Ve.call(e)==="[object Boolean]"}function ya(e){return!!(e&&e.nodeType===1)}function St(e){var n="[object "+e+"]";return function(i){return Ve.call(i)===n}}const wr=St("String"),Mn=St("Number"),_a=St("Date"),ma=St("RegExp"),ga=St("Error"),Rn=St("Symbol"),Fn=St("ArrayBuffer");var Sa=St("Function"),Bs=vo.document&&vo.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Bs!="function"&&(Sa=function(e){return typeof e=="function"||!1});const gt=Sa,Ea=St("Object");var Ia=bs&&(!/\[native code\]/.test(String(DataView))||Ea(new DataView(new ArrayBuffer(8)))),Cn=typeof Map<"u"&&Ea(new Map),qs=St("DataView");function zs(e){return e!=null&&gt(e.getInt8)&&Fn(e.buffer)}const We=Ia?zs:qs,ie=Ms||St("Array");function oe(e,n){return e!=null&&As.call(e,n)}var En=St("Arguments");(function(){En(arguments)||(En=function(e){return oe(e,"callee")})})();const Tr=En;function wa(e){return!Rn(e)&&Fs(e)&&!isNaN(parseFloat(e))}function Bn(e){return Mn(e)&&Rs(e)}function qn(e){return function(){return e}}function Ta(e){return function(n){var i=e(n);return typeof i=="number"&&i>=0&&i<=Cs}}function Pa(e){return function(n){return n==null?void 0:n[e]}}const yr=Pa("byteLength"),Ns=Ta(yr);var Ls=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Ds(e){return go?go(e)&&!We(e):Ns(e)&&Ls.test(Ve.call(e))}const zn=pa?Ds:qn(!1),Pt=Pa("length");function ks(e){for(var n={},i=e.length,o=0;o<i;++o)n[e[o]]=!0;return{contains:function(s){return n[s]===!0},push:function(s){return n[s]=!0,e.push(s)}}}function Oa(e,n){n=ks(n);var i=So.length,o=e.constructor,s=gt(o)&&o.prototype||On,f="constructor";for(oe(e,f)&&!n.contains(f)&&n.push(f);i--;)f=So[i],f in e&&e[f]!==s[f]&&!n.contains(f)&&n.push(f)}function dt(e){if(!ne(e))return[];if(_o)return _o(e);var n=[];for(var i in e)oe(e,i)&&n.push(i);return da&&Oa(e,n),n}function Aa(e){if(e==null)return!0;var n=Pt(e);return typeof n=="number"&&(ie(e)||wr(e)||Tr(e))?n===0:Pt(dt(e))===0}function Nn(e,n){var i=dt(n),o=i.length;if(e==null)return!o;for(var s=Object(e),f=0;f<o;f++){var d=i[f];if(n[d]!==s[d]||!(d in s))return!1}return!0}function x(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e}x.VERSION=Pn;x.prototype.value=function(){return this._wrapped};x.prototype.valueOf=x.prototype.toJSON=x.prototype.value;x.prototype.toString=function(){return String(this._wrapped)};function Eo(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,yr(e))}var Io="[object DataView]";function In(e,n,i,o){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var s=typeof e;return s!=="function"&&s!=="object"&&typeof n!="object"?!1:ba(e,n,i,o)}function ba(e,n,i,o){e instanceof x&&(e=e._wrapped),n instanceof x&&(n=n._wrapped);var s=Ve.call(e);if(s!==Ve.call(n))return!1;if(Ia&&s=="[object Object]"&&We(e)){if(!We(n))return!1;s=Io}switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return yo.valueOf.call(e)===yo.valueOf.call(n);case"[object ArrayBuffer]":case Io:return ba(Eo(e),Eo(n),i,o)}var f=s==="[object Array]";if(!f&&zn(e)){var d=yr(e);if(d!==yr(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;f=!0}if(!f){if(typeof e!="object"||typeof n!="object")return!1;var l=e.constructor,g=n.constructor;if(l!==g&&!(gt(l)&&l instanceof l&&gt(g)&&g instanceof g)&&"constructor"in e&&"constructor"in n)return!1}i=i||[],o=o||[];for(var S=i.length;S--;)if(i[S]===e)return o[S]===n;if(i.push(e),o.push(n),f){if(S=e.length,S!==n.length)return!1;for(;S--;)if(!In(e[S],n[S],i,o))return!1}else{var R=dt(e),T;if(S=R.length,dt(n).length!==S)return!1;for(;S--;)if(T=R[S],!(oe(n,T)&&In(e[T],n[T],i,o)))return!1}return i.pop(),o.pop(),!0}function Ma(e,n){return In(e,n)}function be(e){if(!ne(e))return[];var n=[];for(var i in e)n.push(i);return da&&Oa(e,n),n}function Ln(e){var n=Pt(e);return function(i){if(i==null)return!1;var o=be(i);if(Pt(o))return!1;for(var s=0;s<n;s++)if(!gt(i[e[s]]))return!1;return e!==Ca||!gt(i[Dn])}}var Dn="forEach",Ra="has",kn=["clear","delete"],Fa=["get",Ra,"set"],Gs=kn.concat(Dn,Fa),Ca=kn.concat(Fa),Us=["add"].concat(kn,Dn,Ra);const Ba=Cn?Ln(Gs):St("Map"),qa=Cn?Ln(Ca):St("WeakMap"),za=Cn?Ln(Us):St("Set"),Na=St("WeakSet");function he(e){for(var n=dt(e),i=n.length,o=Array(i),s=0;s<i;s++)o[s]=e[n[s]];return o}function La(e){for(var n=dt(e),i=n.length,o=Array(i),s=0;s<i;s++)o[s]=[n[s],e[n[s]]];return o}function Gn(e){for(var n={},i=dt(e),o=0,s=i.length;o<s;o++)n[e[i[o]]]=i[o];return n}function Je(e){var n=[];for(var i in e)gt(e[i])&&n.push(i);return n.sort()}function Un(e,n){return function(i){var o=arguments.length;if(n&&(i=Object(i)),o<2||i==null)return i;for(var s=1;s<o;s++)for(var f=arguments[s],d=e(f),l=d.length,g=0;g<l;g++){var S=d[g];(!n||i[S]===void 0)&&(i[S]=f[S])}return i}}const Kn=Un(be),Oe=Un(dt),jn=Un(be,!0);function Ks(){return function(){}}function Da(e){if(!ne(e))return{};if(mo)return mo(e);var n=Ks();n.prototype=e;var i=new n;return n.prototype=null,i}function ka(e,n){var i=Da(e);return n&&Oe(i,n),i}function Ga(e){return ne(e)?ie(e)?e.slice():Kn({},e):e}function Ua(e,n){return n(e),e}function $n(e){return ie(e)?e:[e]}x.toPath=$n;function xe(e){return x.toPath(e)}function Vn(e,n){for(var i=n.length,o=0;o<i;o++){if(e==null)return;e=e[n[o]]}return i?e:void 0}function Wn(e,n,i){var o=Vn(e,xe(n));return An(o)?i:o}function Ka(e,n){n=xe(n);for(var i=n.length,o=0;o<i;o++){var s=n[o];if(!oe(e,s))return!1;e=e[s]}return!!i}function Pr(e){return e}function fe(e){return e=Oe({},e),function(n){return Nn(n,e)}}function Or(e){return e=xe(e),function(n){return Vn(n,e)}}function He(e,n,i){if(n===void 0)return e;switch(i??3){case 1:return function(o){return e.call(n,o)};case 3:return function(o,s,f){return e.call(n,o,s,f)};case 4:return function(o,s,f,d){return e.call(n,o,s,f,d)}}return function(){return e.apply(n,arguments)}}function ja(e,n,i){return e==null?Pr:gt(e)?He(e,n,i):ne(e)&&!ie(e)?fe(e):Or(e)}function Ar(e,n){return ja(e,n,1/0)}x.iteratee=Ar;function Ot(e,n,i){return x.iteratee!==Ar?x.iteratee(e,n):ja(e,n,i)}function $a(e,n,i){n=Ot(n,i);for(var o=dt(e),s=o.length,f={},d=0;d<s;d++){var l=o[d];f[l]=n(e[l],l,e)}return f}function Jn(){}function Va(e){return e==null?Jn:function(n){return Wn(e,n)}}function Wa(e,n,i){var o=Array(Math.max(0,e));n=He(n,i,1);for(var s=0;s<e;s++)o[s]=n(s);return o}function _r(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const Ae=Date.now||function(){return new Date().getTime()};function Ja(e){var n=function(f){return e[f]},i="(?:"+dt(e).join("|")+")",o=RegExp(i),s=RegExp(i,"g");return function(f){return f=f==null?"":""+f,o.test(f)?f.replace(s,n):f}}const Ya={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Xa=Ja(Ya),js=Gn(Ya),Qa=Ja(js),Za=x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var pn=/(.)^/,$s={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Vs=/\\|'|\r|\n|\u2028|\u2029/g;function Ws(e){return"\\"+$s[e]}var Js=/^\s*(\w|\$)+\s*$/;function xa(e,n,i){!n&&i&&(n=i),n=jn({},n,x.templateSettings);var o=RegExp([(n.escape||pn).source,(n.interpolate||pn).source,(n.evaluate||pn).source].join("|")+"|$","g"),s=0,f="__p+='";e.replace(o,function(S,R,T,z,A){return f+=e.slice(s,A).replace(Vs,Ws),s=A+S.length,R?f+=`'+
((__t=(`+R+`))==null?'':_.escape(__t))+
'`:T?f+=`'+
((__t=(`+T+`))==null?'':__t)+
'`:z&&(f+=`';
`+z+`
__p+='`),S}),f+=`';
`;var d=n.variable;if(d){if(!Js.test(d))throw new Error("variable is not a bare identifier: "+d)}else f=`with(obj||{}){
`+f+`}
`,d="obj";f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;var l;try{l=new Function(d,"_",f)}catch(S){throw S.source=f,S}var g=function(S){return l.call(this,S,x)};return g.source="function("+d+`){
`+f+"}",g}function Ha(e,n,i){n=xe(n);var o=n.length;if(!o)return gt(i)?i.call(e):i;for(var s=0;s<o;s++){var f=e==null?void 0:e[n[s]];f===void 0&&(f=i,s=o),e=gt(f)?f.call(e):f}return e}var Ys=0;function tu(e){var n=++Ys+"";return e?e+n:n}function eu(e){var n=x(e);return n._chain=!0,n}function ru(e,n,i,o,s){if(!(o instanceof n))return e.apply(i,s);var f=Da(e.prototype),d=e.apply(f,s);return ne(d)?d:f}var le=wt(function(e,n){var i=le.placeholder,o=function(){for(var s=0,f=n.length,d=Array(f),l=0;l<f;l++)d[l]=n[l]===i?arguments[s++]:n[l];for(;s<arguments.length;)d.push(arguments[s++]);return ru(e,o,this,this,d)};return o});le.placeholder=x;const Yn=wt(function(e,n,i){if(!gt(e))throw new TypeError("Bind must be called on a function");var o=wt(function(s){return ru(e,o,n,this,i.concat(s))});return o}),Ct=Ta(Pt);function pe(e,n,i,o){if(o=o||[],!n&&n!==0)n=1/0;else if(n<=0)return o.concat(e);for(var s=o.length,f=0,d=Pt(e);f<d;f++){var l=e[f];if(Ct(l)&&(ie(l)||Tr(l)))if(n>1)pe(l,n-1,i,o),s=o.length;else for(var g=0,S=l.length;g<S;)o[s++]=l[g++];else i||(o[s++]=l)}return o}const nu=wt(function(e,n){n=pe(n,!1,!1);var i=n.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var o=n[i];e[o]=Yn(e[o],e)}return e});function iu(e,n){var i=function(o){var s=i.cache,f=""+(n?n.apply(this,arguments):o);return oe(s,f)||(s[f]=e.apply(this,arguments)),s[f]};return i.cache={},i}const Xn=wt(function(e,n,i){return setTimeout(function(){return e.apply(null,i)},n)}),ou=le(Xn,x,1);function au(e,n,i){var o,s,f,d,l=0;i||(i={});var g=function(){l=i.leading===!1?0:Ae(),o=null,d=e.apply(s,f),o||(s=f=null)},S=function(){var R=Ae();!l&&i.leading===!1&&(l=R);var T=n-(R-l);return s=this,f=arguments,T<=0||T>n?(o&&(clearTimeout(o),o=null),l=R,d=e.apply(s,f),o||(s=f=null)):!o&&i.trailing!==!1&&(o=setTimeout(g,T)),d};return S.cancel=function(){clearTimeout(o),l=0,o=s=f=null},S}function uu(e,n,i){var o,s,f,d,l,g=function(){var R=Ae()-s;n>R?o=setTimeout(g,n-R):(o=null,i||(d=e.apply(l,f)),o||(f=l=null))},S=wt(function(R){return l=this,f=R,s=Ae(),o||(o=setTimeout(g,n),i&&(d=e.apply(l,f))),d});return S.cancel=function(){clearTimeout(o),o=f=l=null},S}function su(e,n){return le(n,e)}function br(e){return function(){return!e.apply(this,arguments)}}function cu(){var e=arguments,n=e.length-1;return function(){for(var i=n,o=e[n].apply(this,arguments);i--;)o=e[i].call(this,o);return o}}function fu(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function Qn(e,n){var i;return function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=null),i}}const hu=le(Qn,2);function Zn(e,n,i){n=Ot(n,i);for(var o=dt(e),s,f=0,d=o.length;f<d;f++)if(s=o[f],n(e[s],s,e))return s}function lu(e){return function(n,i,o){i=Ot(i,o);for(var s=Pt(n),f=e>0?0:s-1;f>=0&&f<s;f+=e)if(i(n[f],f,n))return f;return-1}}const Mr=lu(1),xn=lu(-1);function Hn(e,n,i,o){i=Ot(i,o,1);for(var s=i(n),f=0,d=Pt(e);f<d;){var l=Math.floor((f+d)/2);i(e[l])<s?f=l+1:d=l}return f}function pu(e,n,i){return function(o,s,f){var d=0,l=Pt(o);if(typeof f=="number")e>0?d=f>=0?f:Math.max(f+l,d):l=f>=0?Math.min(f+1,l):f+l+1;else if(i&&f&&l)return f=i(o,s),o[f]===s?f:-1;if(s!==s)return f=n(Ze.call(o,d,l),Bn),f>=0?f+d:-1;for(f=e>0?d:l-1;f>=0&&f<l;f+=e)if(o[f]===s)return f;return-1}}const ti=pu(1,Mr,Hn),du=pu(-1,xn);function Ye(e,n,i){var o=Ct(e)?Mr:Zn,s=o(e,n,i);if(s!==void 0&&s!==-1)return e[s]}function vu(e,n){return Ye(e,fe(n))}function Gt(e,n,i){n=He(n,i);var o,s;if(Ct(e))for(o=0,s=e.length;o<s;o++)n(e[o],o,e);else{var f=dt(e);for(o=0,s=f.length;o<s;o++)n(e[f[o]],f[o],e)}return e}function Xt(e,n,i){n=Ot(n,i);for(var o=!Ct(e)&&dt(e),s=(o||e).length,f=Array(s),d=0;d<s;d++){var l=o?o[d]:d;f[d]=n(e[l],l,e)}return f}function yu(e){var n=function(i,o,s,f){var d=!Ct(i)&&dt(i),l=(d||i).length,g=e>0?0:l-1;for(f||(s=i[d?d[g]:g],g+=e);g>=0&&g<l;g+=e){var S=d?d[g]:g;s=o(s,i[S],S,i)}return s};return function(i,o,s,f){var d=arguments.length>=3;return n(i,He(o,f,4),s,d)}}const we=yu(1),mr=yu(-1);function ee(e,n,i){var o=[];return n=Ot(n,i),Gt(e,function(s,f,d){n(s,f,d)&&o.push(s)}),o}function _u(e,n,i){return ee(e,br(Ot(n)),i)}function gr(e,n,i){n=Ot(n,i);for(var o=!Ct(e)&&dt(e),s=(o||e).length,f=0;f<s;f++){var d=o?o[f]:f;if(!n(e[d],d,e))return!1}return!0}function Sr(e,n,i){n=Ot(n,i);for(var o=!Ct(e)&&dt(e),s=(o||e).length,f=0;f<s;f++){var d=o?o[f]:f;if(n(e[d],d,e))return!0}return!1}function zt(e,n,i,o){return Ct(e)||(e=he(e)),(typeof i!="number"||o)&&(i=0),ti(e,n,i)>=0}const mu=wt(function(e,n,i){var o,s;return gt(n)?s=n:(n=xe(n),o=n.slice(0,-1),n=n[n.length-1]),Xt(e,function(f){var d=s;if(!d){if(o&&o.length&&(f=Vn(f,o)),f==null)return;d=f[n]}return d==null?d:d.apply(f,i)})});function Rr(e,n){return Xt(e,Or(n))}function gu(e,n){return ee(e,fe(n))}function ei(e,n,i){var o=-1/0,s=-1/0,f,d;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ct(e)?e:he(e);for(var l=0,g=e.length;l<g;l++)f=e[l],f!=null&&f>o&&(o=f)}else n=Ot(n,i),Gt(e,function(S,R,T){d=n(S,R,T),(d>s||d===-1/0&&o===-1/0)&&(o=S,s=d)});return o}function Su(e,n,i){var o=1/0,s=1/0,f,d;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ct(e)?e:he(e);for(var l=0,g=e.length;l<g;l++)f=e[l],f!=null&&f<o&&(o=f)}else n=Ot(n,i),Gt(e,function(S,R,T){d=n(S,R,T),(d<s||d===1/0&&o===1/0)&&(o=S,s=d)});return o}var Xs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ri(e){return e?ie(e)?Ze.call(e):wr(e)?e.match(Xs):Ct(e)?Xt(e,Pr):he(e):[]}function ni(e,n,i){if(n==null||i)return Ct(e)||(e=he(e)),e[_r(e.length-1)];var o=ri(e),s=Pt(o);n=Math.max(Math.min(n,s),0);for(var f=s-1,d=0;d<n;d++){var l=_r(d,f),g=o[d];o[d]=o[l],o[l]=g}return o.slice(0,n)}function Eu(e){return ni(e,1/0)}function Iu(e,n,i){var o=0;return n=Ot(n,i),Rr(Xt(e,function(s,f,d){return{value:s,index:o++,criteria:n(s,f,d)}}).sort(function(s,f){var d=s.criteria,l=f.criteria;if(d!==l){if(d>l||d===void 0)return 1;if(d<l||l===void 0)return-1}return s.index-f.index}),"value")}function Fr(e,n){return function(i,o,s){var f=n?[[],[]]:{};return o=Ot(o,s),Gt(i,function(d,l){var g=o(d,l,i);e(f,d,g)}),f}}const wu=Fr(function(e,n,i){oe(e,i)?e[i].push(n):e[i]=[n]}),Tu=Fr(function(e,n,i){e[i]=n}),Pu=Fr(function(e,n,i){oe(e,i)?e[i]++:e[i]=1}),Ou=Fr(function(e,n,i){e[i?0:1].push(n)},!0);function Au(e){return e==null?0:Ct(e)?e.length:dt(e).length}function Qs(e,n,i){return n in i}const ii=wt(function(e,n){var i={},o=n[0];if(e==null)return i;gt(o)?(n.length>1&&(o=He(o,n[1])),n=be(e)):(o=Qs,n=pe(n,!1,!1),e=Object(e));for(var s=0,f=n.length;s<f;s++){var d=n[s],l=e[d];o(l,d,e)&&(i[d]=l)}return i}),bu=wt(function(e,n){var i=n[0],o;return gt(i)?(i=br(i),n.length>1&&(o=n[1])):(n=Xt(pe(n,!1,!1),String),i=function(s,f){return!zt(n,f)}),ii(e,i,o)});function oi(e,n,i){return Ze.call(e,0,Math.max(0,e.length-(n==null||i?1:n)))}function Te(e,n,i){return e==null||e.length<1?n==null||i?void 0:[]:n==null||i?e[0]:oi(e,e.length-n)}function ce(e,n,i){return Ze.call(e,n==null||i?1:n)}function Mu(e,n,i){return e==null||e.length<1?n==null||i?void 0:[]:n==null||i?e[e.length-1]:ce(e,Math.max(0,e.length-n))}function Ru(e){return ee(e,Boolean)}function Fu(e,n){return pe(e,n,!1)}const ai=wt(function(e,n){return n=pe(n,!0,!0),ee(e,function(i){return!zt(n,i)})}),Cu=wt(function(e,n){return ai(e,n)});function Xe(e,n,i,o){bn(n)||(o=i,i=n,n=!1),i!=null&&(i=Ot(i,o));for(var s=[],f=[],d=0,l=Pt(e);d<l;d++){var g=e[d],S=i?i(g,d,e):g;n&&!i?((!d||f!==S)&&s.push(g),f=S):i?zt(f,S)||(f.push(S),s.push(g)):zt(s,g)||s.push(g)}return s}const Bu=wt(function(e){return Xe(pe(e,!0,!0))});function qu(e){for(var n=[],i=arguments.length,o=0,s=Pt(e);o<s;o++){var f=e[o];if(!zt(n,f)){var d;for(d=1;d<i&&zt(arguments[d],f);d++);d===i&&n.push(f)}}return n}function Qe(e){for(var n=e&&ei(e,Pt).length||0,i=Array(n),o=0;o<n;o++)i[o]=Rr(e,o);return i}const zu=wt(Qe);function Nu(e,n){for(var i={},o=0,s=Pt(e);o<s;o++)n?i[e[o]]=n[o]:i[e[o][0]]=e[o][1];return i}function Lu(e,n,i){n==null&&(n=e||0,e=0),i||(i=n<e?-1:1);for(var o=Math.max(Math.ceil((n-e)/i),0),s=Array(o),f=0;f<o;f++,e+=i)s[f]=e;return s}function Du(e,n){if(n==null||n<1)return[];for(var i=[],o=0,s=e.length;o<s;)i.push(Ze.call(e,o,o+=n));return i}function ui(e,n){return e._chain?x(n).chain():n}function si(e){return Gt(Je(e),function(n){var i=x[n]=e[n];x.prototype[n]=function(){var o=[this._wrapped];return Os.apply(o,arguments),ui(this,i.apply(x,o))}}),x}Gt(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=Ir[e];x.prototype[e]=function(){var i=this._wrapped;return i!=null&&(n.apply(i,arguments),(e==="shift"||e==="splice")&&i.length===0&&delete i[0]),ui(this,i)}});Gt(["concat","join","slice"],function(e){var n=Ir[e];x.prototype[e]=function(){var i=this._wrapped;return i!=null&&(i=n.apply(i,arguments)),ui(this,i)}});const Zs=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Pn,after:fu,all:gr,allKeys:be,any:Sr,assign:Oe,before:Qn,bind:Yn,bindAll:nu,chain:eu,chunk:Du,clone:Ga,collect:Xt,compact:Ru,compose:cu,constant:qn,contains:zt,countBy:Pu,create:ka,debounce:uu,default:x,defaults:jn,defer:ou,delay:Xn,detect:Ye,difference:ai,drop:ce,each:Gt,escape:Xa,every:gr,extend:Kn,extendOwn:Oe,filter:ee,find:Ye,findIndex:Mr,findKey:Zn,findLastIndex:xn,findWhere:vu,first:Te,flatten:Fu,foldl:we,foldr:mr,forEach:Gt,functions:Je,get:Wn,groupBy:wu,has:Ka,head:Te,identity:Pr,include:zt,includes:zt,indexBy:Tu,indexOf:ti,initial:oi,inject:we,intersection:qu,invert:Gn,invoke:mu,isArguments:Tr,isArray:ie,isArrayBuffer:Fn,isBoolean:bn,isDataView:We,isDate:_a,isElement:ya,isEmpty:Aa,isEqual:Ma,isError:ga,isFinite:wa,isFunction:gt,isMap:Ba,isMatch:Nn,isNaN:Bn,isNull:va,isNumber:Mn,isObject:ne,isRegExp:ma,isSet:za,isString:wr,isSymbol:Rn,isTypedArray:zn,isUndefined:An,isWeakMap:qa,isWeakSet:Na,iteratee:Ar,keys:dt,last:Mu,lastIndexOf:du,map:Xt,mapObject:$a,matcher:fe,matches:fe,max:ei,memoize:iu,methods:Je,min:Su,mixin:si,negate:br,noop:Jn,now:Ae,object:Nu,omit:bu,once:hu,pairs:La,partial:le,partition:Ou,pick:ii,pluck:Rr,property:Or,propertyOf:Va,random:_r,range:Lu,reduce:we,reduceRight:mr,reject:_u,rest:ce,restArguments:wt,result:Ha,sample:ni,select:ee,shuffle:Eu,size:Au,some:Sr,sortBy:Iu,sortedIndex:Hn,tail:ce,take:Te,tap:Ua,template:xa,templateSettings:Za,throttle:au,times:Wa,toArray:ri,toPath:$n,transpose:Qe,unescape:Qa,union:Bu,uniq:Xe,unique:Xe,uniqueId:tu,unzip:Qe,values:he,where:gu,without:Cu,wrap:su,zip:zu},Symbol.toStringTag,{value:"Module"}));var wn=si(Zs);wn._=wn;const xs=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Pn,after:fu,all:gr,allKeys:be,any:Sr,assign:Oe,before:Qn,bind:Yn,bindAll:nu,chain:eu,chunk:Du,clone:Ga,collect:Xt,compact:Ru,compose:cu,constant:qn,contains:zt,countBy:Pu,create:ka,debounce:uu,default:wn,defaults:jn,defer:ou,delay:Xn,detect:Ye,difference:ai,drop:ce,each:Gt,escape:Xa,every:gr,extend:Kn,extendOwn:Oe,filter:ee,find:Ye,findIndex:Mr,findKey:Zn,findLastIndex:xn,findWhere:vu,first:Te,flatten:Fu,foldl:we,foldr:mr,forEach:Gt,functions:Je,get:Wn,groupBy:wu,has:Ka,head:Te,identity:Pr,include:zt,includes:zt,indexBy:Tu,indexOf:ti,initial:oi,inject:we,intersection:qu,invert:Gn,invoke:mu,isArguments:Tr,isArray:ie,isArrayBuffer:Fn,isBoolean:bn,isDataView:We,isDate:_a,isElement:ya,isEmpty:Aa,isEqual:Ma,isError:ga,isFinite:wa,isFunction:gt,isMap:Ba,isMatch:Nn,isNaN:Bn,isNull:va,isNumber:Mn,isObject:ne,isRegExp:ma,isSet:za,isString:wr,isSymbol:Rn,isTypedArray:zn,isUndefined:An,isWeakMap:qa,isWeakSet:Na,iteratee:Ar,keys:dt,last:Mu,lastIndexOf:du,map:Xt,mapObject:$a,matcher:fe,matches:fe,max:ei,memoize:iu,methods:Je,min:Su,mixin:si,negate:br,noop:Jn,now:Ae,object:Nu,omit:bu,once:hu,pairs:La,partial:le,partition:Ou,pick:ii,pluck:Rr,property:Or,propertyOf:Va,random:_r,range:Lu,reduce:we,reduceRight:mr,reject:_u,rest:ce,restArguments:wt,result:Ha,sample:ni,select:ee,shuffle:Eu,size:Au,some:Sr,sortBy:Iu,sortedIndex:Hn,tail:ce,take:Te,tap:Ua,template:xa,templateSettings:Za,throttle:au,times:Wa,toArray:ri,toPath:$n,transpose:Qe,unescape:Qa,union:Bu,uniq:Xe,unique:Xe,uniqueId:tu,unzip:Qe,values:he,where:gu,without:Cu,wrap:su,zip:zu},Symbol.toStringTag,{value:"Module"})),Me=Do(xs);var dn={},wo;function ci(){return wo||(wo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidStateAccessorError=e.AccessorType=e.aggregateGroupableEvents=e.Placement=e.isTransactionMetaEvent=e.isMetaEvent=e.idFromEvent=e.isDBRef=e.TOTAL=e.UNASSIGNED_PLAYER=void 0;var n=re,i=n.__importStar(Me);e.UNASSIGNED_PLAYER="unassigned",e.TOTAL="total";function o(T){return i.has(T,"$id")&&i.has(T,"$ref")}e.isDBRef=o;function s(T){if(T!==void 0){if(T._id!==void 0)return T._id;if(T.id!==void 0)return T.id}}e.idFromEvent=s;function f(T){return T.hasOwnProperty("code")&&i.contains(["insert","delete","replace","transaction","edit_group","undo","redo"],T.code)}e.isMetaEvent=f;function d(T){return T.hasOwnProperty("code")&&T.code==="transaction"}e.isTransactionMetaEvent=d;var l;(function(T){T[T.Before=0]="Before",T[T.After=1]="After"})(l=e.Placement||(e.Placement={}));function g(T){for(var z={deleteIds:[],insertions:[]},A=0,b=T;A<b.length;A++){var E=b[A];S(E,z)}return z}e.aggregateGroupableEvents=g;function S(T,z){var A,b;switch(T.code){case"insert":if(T.beforeId)z.insertions.push([T.beforeId,l.Before,T.events]);else if(T.afterId)z.insertions.push([T.afterId,l.After,T.events]);else throw new Error("need before/after id");break;case"delete":(A=z.deleteIds).push.apply(A,T.deleteIds);break;case"replace":if(T.deleteIds.length===0)throw new Error("need deletes in a replace");(b=z.deleteIds).push.apply(b,T.deleteIds),z.insertions.push([T.deleteIds[0],l.After,T.events]);break;case"edit_group":for(var E=0,p=T.events;E<p.length;E++){var y=p[E];S(y,z)}break}}(function(T){T[T.Latest=0]="Latest",T[T.Before=1]="Before",T[T.After=2]="After"})(e.AccessorType||(e.AccessorType={}));var R=function(T){n.__extends(z,T);function z(A,b){var E=T.call(this,"Could not find ".concat(b," for accessor ").concat(A,"."))||this;return E.name="InvalidStateAccessorError",E}return z}(Error);e.InvalidStateAccessorError=R}(dn)),dn}var To;function ku(){if(To)return kt;To=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.SnapshottedStateEngine=kt.SnapshottedStateEngineStateType=kt.VersionedStateEngine=kt.StateEngine=void 0;var e=re,n=e.__importStar(Me),i=ci(),o=function(){function l(g){this.baseEvents=g,this.nextEventOffset=0,this.idToIndexMap={}}return Object.defineProperty(l.prototype,"latestState",{get:function(){return this.getLatestState()},enumerable:!1,configurable:!0}),l.prototype.stateBeforeEventOrUndefined=function(g){try{this.stateBeforeEvent(g)}catch{return}},l.prototype.stateBeforeEventId=function(g){return this.stateBeforeEvent(this.indexForEventId(g))},l.prototype.stateBeforeEventIdOrLatest=function(g){return g!==void 0?this.stateBeforeEvent(this.indexForEventId(g)):this.latestState},l.prototype.stateAfterEvent=function(g){return this.stateBeforeEvent(g+1)},l.prototype.stateAfterEventId=function(g){return this.stateAfterEvent(this.indexForEventId(g))},l.prototype.indexForEventId=function(g){return this.idToIndexMap[g]},l.prototype.processToBeforeEvent=function(g){if(g>this.baseEvents.length||g===0)return!1;for(;this.nextEventOffset<g;)this.fullyProcessNextEvent();return!0},l.prototype.processToLatestEvent=function(){for(;this.nextEventOffset<this.baseEvents.length;)this.fullyProcessNextEvent()},l.prototype.fullyProcessNextEvent=function(){var g=this.nextEvent;if(g!==void 0){var S=(0,i.idFromEvent)(g);this.idToIndexMap[S]=this.nextEventOffset,this.preProcessEvent(g),this.processNextEvent(),this.nextEventOffset++,this.postProcessEvent(g)}},l.prototype.preProcessEvent=function(g){},l.prototype.postProcessEvent=function(g){},Object.defineProperty(l.prototype,"nextEvent",{get:function(){return this.baseEvents[this.nextEventOffset]},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"lastEvent",{get:function(){if(this.nextEventOffset!==0)return this.baseEvents[this.nextEventOffset-1]},enumerable:!1,configurable:!0}),l}();kt.StateEngine=o;var s=function(l){e.__extends(g,l);function g(S){var R=l.call(this,S)||this;R.baseEvents=S,R.stateHistory=[];var T=R.initialState().set("nextEventOffset",R.nextEventOffset);return R.stateHistory.push(T),R}return g.prototype.get=function(S){return this.currentState.toJS()[S]},g.prototype.getLatest=function(S){return this.latestState.toJS()[S]},g.prototype.getLatestState=function(){return this.processToLatestEvent(),this.stateHistory[this.nextEventOffset]},Object.defineProperty(g.prototype,"currentState",{get:function(){return this.stateHistory[this.nextEventOffset]},enumerable:!1,configurable:!0}),g.prototype.stateBeforeEvent=function(S){if(S<0||S>this.baseEvents.length)throw new i.InvalidStateAccessorError(i.AccessorType.Before,S.toString());return this.processToBeforeEvent(S),this.stateHistory[S]},g.prototype.processNextEvent=function(){var S=this.processOneEvent(this.currentState,this.nextEvent);if(S){var R=S.set("nextEventOffset",this.nextEventOffset);this.stateHistory.push(R)}},g.prototype.rollbackToBeforeEvent=function(S){S>this.stateHistory.length-1||(this.nextEventOffset=S,this.stateHistory.splice(S+1,1/0))},g}(o);kt.VersionedStateEngine=s;var f=function(){function l(){}return l}();kt.SnapshottedStateEngineStateType=f;var d=function(l){e.__extends(g,l);function g(S){var R=l.call(this,S)||this;return R.baseEvents=S,R.snapshotIntervals=[10,40,80],R.snapshotRotationInterval=10,R.eventsSinceLastRotation=0,R.snapshots={},R.extensionEngines=[],R.resetToInitialState(),R}return g.prototype.get=function(S){return this.currentState[S]},g.prototype.getLatest=function(S){return this.latestState[S]},Object.defineProperty(g.prototype,"currentState",{get:function(){return this.state},enumerable:!1,configurable:!0}),g.prototype.getLatestState=function(){return this.processToLatestEvent(),this.state},g.prototype.stateBeforeEvent=function(S){if(S<0||S>this.baseEvents.length)throw new i.InvalidStateAccessorError(i.AccessorType.Before,S.toString());return S===this.nextEventOffset?this.currentState:(this.rollbackToBeforeEvent(S),this.currentState)},g.prototype.resetToInitialState=function(){this.state=this.initialState(),this.snapshots={},this.nextEventOffset=0,this.eventsSinceLastRotation=0},g.prototype.copyState=function(){return JSON.parse(JSON.stringify(this.state))},g.prototype.rotateSnapshots=function(){for(var S={},R=this.nextEventOffset-1,T=n.sortBy(Object.keys(this.snapshots).map(Number),function(O){return-1*Number(O)}),z=0,A=this.snapshotIntervals;z<A.length;z++){for(var b=A[z],E=T[0],p=0,y=T;p<y.length;p++){var _=y[p];if(Number(_)<R+1-b)break;E=_}E!==void 0&&(S[E]=!0)}for(var _ in this.snapshots)this.snapshots.hasOwnProperty(_)&&S[_]!==!0&&delete this.snapshots[_];this.snapshots[R+1]=this.copyState(),this.eventsSinceLastRotation=0},g.prototype.processNextEvent=function(){this.processOneEvent(this.state,this.nextEvent),this.eventsSinceLastRotation++},g.prototype.postProcessEvent=function(S){for(var R=0,T=this.extensionEngines;R<T.length;R++){var z=T[R];z.fullyProcessNextEvent()}this.eventsSinceLastRotation>=this.snapshotRotationInterval&&this.rotateSnapshots()},g.prototype.rollbackToBeforeEvent=function(S){for(var R,T=n.sortBy(Object.keys(this.snapshots).map(Number),function(G){return-1*Number(G)}),z=0,A=T;z<A.length;z++){var b=A[z];if(Number(b)<S){R=Number(b);break}else delete this.snapshots[b]}if(R===void 0){this.resetToInitialState();for(var E=0,p=this.extensionEngines;E<p.length;E++){var y=p[E];y.rollbackToBeforeEvent(0)}this.processToBeforeEvent(S);return}for(var _=0,O=this.extensionEngines;_<O.length;_++){var y=O[_];y.rollbackToBeforeEvent(R)}var P=[this.eventsSinceLastRotation,this.nextEventOffset-R,this.snapshotRotationInterval],C=P[0],V=P[1],U=P[2];this.eventsSinceLastRotation=((C-V)%U+U)%U,this.nextEventOffset=R,this.state.restoreFromSnapshot(JSON.parse(JSON.stringify(this.snapshots[R]))),this.processToBeforeEvent(S)},g}(o);return kt.SnapshottedStateEngine=d,kt}var Ke={},Po;function Hs(){if(Po)return Ke;Po=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.ImmutableState=void 0;var e=function(){function n(i){this.state=i,this._size=0}return Object.defineProperty(n.prototype,"nextEventOffset",{get:function(){return this.get("nextEventOffset")},enumerable:!1,configurable:!0}),n.prototype.newInstance=function(i){var o=this.constructor;return new o(i)},n.prototype.increment=function(i,o){return o===0?this:this.newInstance(this.state.updateIn([i],function(s){return(s||0)+o}))},n.prototype.incrementIn=function(i,o){return this.newInstance(this.state.updateIn(i,function(s){return(s||0)+o}))},n.prototype.deepSetSize=function(i,o,s){return s===void 0&&(s=void 0),this.updateIn(i,function(f){var d=f.size;return d===o?f:d>o||s===void 0?f.setSize(o):f.withMutations(function(l){for(var g=0;g<o-d;g++)l.push(s)})})},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),n.prototype.set=function(i,o){return this.newInstance(this.state.set(i,o))},n.prototype.delete=function(i){return this.newInstance(this.state.delete(i))},n.prototype.remove=function(i){return this.newInstance(this.state.remove(i))},n.prototype.clear=function(){return this.newInstance(this.state.clear())},n.prototype.withMutations=function(i){return this.newInstance(this.state.withMutations(i))},n.prototype.asMutable=function(){return this.newInstance(this.state.asMutable())},n.prototype.asImmutable=function(){return this.newInstance(this.state.asImmutable())},n.prototype.equals=function(i){return this.state.equals(i)},n.prototype.hashCode=function(){return this.state.hashCode()},n.prototype.get=function(i,o){return this.state.get(i)},n.prototype.has=function(i){return this.state.has(i)},n.prototype.includes=function(i){return this.state.includes(i)},n.prototype.contains=function(i){return this.state.contains(i)},n.prototype.first=function(){return this.state.first()},n.prototype.last=function(){return this.state.last()},n.prototype.toJS=function(){return this.state.toJS()},n.prototype.toArray=function(){return this.state.toArray()},n.prototype.toObject=function(){return this.state.toObject()},n.prototype.toMap=function(){return this.state.toMap()},n.prototype.toOrderedMap=function(){return this.state.toOrderedMap()},n.prototype.toSet=function(){return this.state.toSet()},n.prototype.toOrderedSet=function(){return this.state.toOrderedSet()},n.prototype.toList=function(){return this.state.toList()},n.prototype.toStack=function(){return this.state.toStack()},n.prototype.toSeq=function(){return this.state.toSeq()},n.prototype.toKeyedSeq=function(){return this.state.toKeyedSeq()},n.prototype.toIndexedSeq=function(){return this.state.toIndexedSeq()},n.prototype.toSetSeq=function(){return this.state.toSetSeq()},n.prototype.keys=function(){return this.state.keys()},n.prototype.values=function(){return this.state.values()},n.prototype.entries=function(){return this.state.entries()},n.prototype.keySeq=function(){return this.state.keySeq()},n.prototype.valueSeq=function(){return this.state.valueSeq()},n.prototype.entrySeq=function(){return this.state.entrySeq()},n.prototype.map=function(i,o){return this.state.map(i,o)},n.prototype.filter=function(i,o){return this.state.filter(i,o)},n.prototype.filterNot=function(i,o){return this.state.filterNot(i,o)},n.prototype.reverse=function(){return this.state.reverse()},n.prototype.sort=function(i){return this.state.sort(i)},n.prototype.sortBy=function(i,o){return this.state.sortBy(i,o)},n.prototype.groupBy=function(i,o){return this.state.groupBy(i,o)},n.prototype.forEach=function(i,o){return this.state.forEach(i,o)},n.prototype.slice=function(i,o){return this.state.slice(i,o)},n.prototype.rest=function(){return this.rest()},n.prototype.butLast=function(){return this.state.butLast()},n.prototype.skip=function(i){return this.state.skip(i)},n.prototype.skipLast=function(i){return this.state.skipLast(i)},n.prototype.skipWhile=function(i,o){return this.state.skipWhile(i,o)},n.prototype.skipUntil=function(i,o){return this.state.skipUntil(i,o)},n.prototype.take=function(i){return this.state.take(i)},n.prototype.takeLast=function(i){return this.state.takeLast(i)},n.prototype.takeWhile=function(i,o){return this.state.takeWhile(i,o)},n.prototype.takeUntil=function(i,o){return this.state.takeUntil(i,o)},n.prototype.concat=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return this.state.concat(i)},n.prototype.flatten=function(i,o){return i?this.state.flatten(i):this.state.flatten(o)},n.prototype.flatMap=function(i,o){return this.state.flatMap(i,o)},n.prototype.reduce=function(i,o,s){return this.state.reduce(i,o,s)},n.prototype.reduceRight=function(i,o,s){return this.state.reduceRight(i,o,s)},n.prototype.every=function(i,o){return this.state.every(i,o)},n.prototype.some=function(i,o){return this.state.some(i,o)},n.prototype.join=function(i){return this.state.join(i)},n.prototype.isEmpty=function(){return this.state.isEmpty()},n.prototype.count=function(i,o){return this.state.count(i,o)},n.prototype.countBy=function(i,o){return this.state.countBy(i,o)},n.prototype.find=function(i,o,s){return this.state.find(i,o,s)},n.prototype.findLast=function(i,o,s){return this.state.findLast(i,o,s)},n.prototype.findEntry=function(i,o,s){return this.state.findEntry(i,o,s)},n.prototype.findLastEntry=function(i,o,s){return this.state.findLastEntry(i,o,s)},n.prototype.findKey=function(i,o){return this.state.findKey(i,o)},n.prototype.findLastKey=function(i,o){return this.state.findLastKey(i,o)},n.prototype.keyOf=function(i){return this.state.keyOf(i)},n.prototype.lastKeyOf=function(i){return this.state.lastKeyOf(i)},n.prototype.max=function(i){return this.state.max(i)},n.prototype.maxBy=function(i,o){return this.state.maxBy(i,o)},n.prototype.min=function(i){return this.state.min(i)},n.prototype.minBy=function(i,o){return this.state.minBy(i,o)},n.prototype.isSubset=function(i){return this.state.isSubset(i)},n.prototype.isSuperset=function(i){return this.isSuperset(i)},n.prototype.hasIn=function(i){return this.state.hasIn(i)},n.prototype.getIn=function(i,o){return this.state.getIn(i,o)},n.prototype.update=function(i,o,s){return this.newInstance(this.state.update(i,o,s))},n.prototype.merge=function(i){return this.newInstance(this.state.merge(i))},n.prototype.mergeWith=function(i){return this.newInstance(this.state.mergeWith(i))},n.prototype.mergeDeep=function(i){return this.newInstance(this.state.mergeDeep(i))},n.prototype.mergeIn=function(i,o){return this.newInstance(this.state.mergeIn(i,o))},n.prototype.mergeDeepWith=function(i){return this.newInstance(this.state.mergeDeepWith(i))},n.prototype.mergeDeepIn=function(i,o){return this.newInstance(this.state.mergeDeepIn(i,o))},n.prototype.setIn=function(i,o){return this.newInstance(this.state.setIn(i,o))},n.prototype.deleteIn=function(i){return this.newInstance(this.state.deleteIn(i))},n.prototype.removeIn=function(i){return this.newInstance(this.state.removeIn(i))},n.prototype.updateIn=function(i,o,s){return this.newInstance(this.state.updateIn(i,o,s))},n.prototype.flip=function(){return this.state.flip()},n.prototype.mapKeys=function(i,o){return this.state.mapKeys(i,o)},n.prototype.mapEntries=function(i,o){return this.state.mapEntries(i,o)},n}();return Ke.ImmutableState=e,Ke}var ft={},te={},Oo;function tc(){if(Oo)return te;Oo=1,Object.defineProperty(te,"__esModule",{value:!0}),te.setDebug=te.debug=void 0,te.debug=!1;function e(n){te.debug=n}return te.setDebug=e,te}var Ao;function ec(){if(Ao)return ft;Ao=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.EngineStateAccessor=ft.BaseStateAccessor=ft.TranscoderController=ft.CompactorController=ft.InvalidEventIndexError=ft.Controller=ft.SnapshottedTranscoder=ft.TranscoderState=ft.SabertoothError=void 0;var e=re,n=e.__importStar(Me),i=e.__importStar(ku()),o=e.__importStar(ci()),s=tc(),f=function(E){e.__extends(p,E);function p(y,_){var O=E.call(this,JSON.stringify({type:y,reason:_}))||this;return O.name="SabertoothError",Object.setPrototypeOf(O,p.prototype),O}return p}(Error);ft.SabertoothError=f;var d=function(E){e.__extends(p,E);function p(){var y=E!==null&&E.apply(this,arguments)||this;return y.outStream=[],y.idToInputIndex={},y.idToOutputIndex={},y.idToOutputCount={},y.outIndexMap={},y}return p.prototype.restoreFromSnapshot=function(y){this.outStream=y.outStream,this.idToInputIndex=y.idToInputIndex,this.idToOutputIndex=y.idToOutputIndex,this.idToOutputCount=y.idToOutputCount},p}(i.SnapshottedStateEngineStateType);ft.TranscoderState=d;var l=function(E){e.__extends(p,E);function p(){return E!==null&&E.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"outStream",{get:function(){return this.state.outStream},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"outIndexMap",{get:function(){return this.state.outIndexMap},enumerable:!1,configurable:!0}),p.prototype.preProcessEvent=function(y){var _=o.idFromEvent(y);this.state.idToInputIndex[_]=this.idToIndexMap[_],this.state.idToOutputIndex[_]=this.outStream.length},p.prototype.postProcessEvent=function(y){var _=o.idFromEvent(y);this.state.idToOutputCount[_]=this.state.outStream.length-this.state.idToOutputIndex[_];for(var O=this.state.idToOutputIndex[_],P=O;P<this.state.outStream.length;P++){var C=o.idFromEvent(this.state.outStream[P]);this.state.outIndexMap[C]=P}E.prototype.postProcessEvent.call(this,y)},p.prototype.currentStateOfEngine=function(y){return this.outStream.length===0?y.stateBeforeEvent(0):y.stateAfterEvent(this.outStream.length-1)},p.prototype.firstOutputIndexAfterInputEventId=function(y){var _=this.state.idToOutputIndex[y],O=this.state.idToOutputCount[y];return _+O},p.prototype._inputEventForOutputIndex=function(y){for(var _ in this.state.idToInputIndex)if(this.state.idToOutputIndex[_]<=y&&this.state.idToOutputIndex[_]+this.state.idToOutputCount[_]>y)return this.baseEvents[this.state.idToInputIndex[_]];throw new Error("input event index missing output event index")},p.prototype._outputEventsForInputIndex=function(y){for(var _=[],O=o.idFromEvent(this.baseEvents[y]),P=0;P<this.state.idToOutputCount[O];P++)_.push(this.state.outStream[P+this.state.idToOutputIndex[O]]);return _},p}(i.SnapshottedStateEngine);ft.SnapshottedTranscoder=l;var g=function(){function E(){}return E.prototype.pushSerializedBatch=function(p){var y=JSON.parse(p);return this.pushBatch(y)},E.prototype.pushBatch=function(p,y){for(var _=this.outputStream().length-1,O=0,P=p;O<P.length;O++){var C=P[O],V=this.push(C,y);_=Math.min(_,V)}return _},E.prototype.latestState=function(){return new this.stateAccessorClass(o.AccessorType.Latest,this)},E.prototype.setDebug=function(p){return(0,s.setDebug)(p)},E}();ft.Controller=g;var S=function(E){e.__extends(p,E);function p(y){var _=E.call(this,"State for ".concat(y," was undefined."))||this;return _.name="InvalidEventIndexError",_}return p}(Error);ft.InvalidEventIndexError=S;var R=function(E){e.__extends(p,E);function p(){var y=E!==null&&E.apply(this,arguments)||this;return y.scratch=[],y.preScratchTailIndex=void 0,y.numberOfEventsPushed=0,y}return p.prototype.inStreamLength=function(){return this.compactor.inStream.length},p.prototype.clearScratch=function(){if(this.scratch.length!==0){for(var y=0,_=this.engines;y<_.length;y++){var O=_[y];O.rollbackToBeforeEvent(this.preScratchTailIndex+1)}this.compactor.clearScratch(this.scratch),this.scratch=[],this.preScratchTailIndex=void 0}},p.prototype.pushToScratch=function(y){if(o.isMetaEvent(y))throw"Scratch does not currently support compactor metaevents";this.preScratchTailIndex===void 0&&(this.preScratchTailIndex=this.compactor.outStream.length-1),this.scratch.push(y),this.compactor.pushForScratch(y)},p.prototype.pushBatchToScratch=function(y){for(var _=0,O=y;_<O.length;_++){var P=O[_];this.pushToScratch(P)}},p.prototype.firstScratchEventId=function(){if(this.scratch.length!==0)return this.scratch[0].id},p.prototype.undoRedoAvailability=function(y){var _=this.compactor.eventTargetedByUndoSubjectToBlacklist(y);return{undo:_!==void 0,undoEvent:_,redo:this.compactor.redoIsPossible(y)}},p.prototype.push=function(y,_){this.clearScratch(),this.numberOfEventsPushed++;var O=this.compactor.outStream.length-1,P=Number(this.compactor.push(y,_??"looselyCheckUndoRedo"));if(O<=P)return P;for(var C=0,V=this.engines;C<V.length;C++){var U=V[C];U.rollbackToBeforeEvent(P+1)}return P},p.prototype.pushBatch=function(y,_){return E.prototype.pushBatch.call(this,y,_)},p.prototype.stateBeforeEvent=function(y){var _=new this.stateAccessorClass(o.AccessorType.Before,this);if(_.eventIndex=this.compactor.outIndexMap[y],_.eventIndex===void 0)throw new o.InvalidStateAccessorError(o.AccessorType.Before,y);return _},p.prototype.stateAfterEvent=function(y){var _=new this.stateAccessorClass(o.AccessorType.After,this);if(_.eventIndex=this.compactor.outIndexMap[y],_.eventIndex===void 0)throw new o.InvalidStateAccessorError(o.AccessorType.After,y);return _},p.prototype.stateAfterTimestamp=function(y){var _=b(this.compactor.outStream,y);return _?this.stateAfterEvent(_.id):new this.stateAccessorClass(o.AccessorType.After,this)},p.prototype.eventIdAfterTimestamp=function(y){var _=b(this.compactor.outStream,y);if(_)return _.id;throw new Error("No event found for timestamp ".concat(y))},p.prototype.outputStream=function(){return this.compactor.outStream},p.prototype.outputEventById=function(y){return this.compactor.outStream[this.compactor.outIndexMap[y]]},p.prototype.outputEventsById=function(y){return n.map(y,this.outputEventById,this)},p.prototype.updateFromPushPayload=function(y,_){for(var O=this.compactor.outStream.length-1,P={},C=0,V=_;C<V.length;C++){var U=V[C];P[o.idFromEvent(U)]=U}for(var G=this.numberOfEventsPushed;G<y.length;G++){var k=y[G],nt=P[k];if(nt!==void 0){var H=nt.event_data;O=Math.min(O,this.push(H,"looselyCheckUndoRedo"))}else{console.log("WARNING: The controller thinks that event "+k+" is new. But we cannot find it in the newEvents in the push payload. Will not attempt to push any more events");break}}return O},p.prototype.updateFromSerializedPushPayload=function(y,_){var O=JSON.parse(_);return this.updateFromPushPayload(y,O)},p}(g);ft.CompactorController=R;var T=function(E){e.__extends(p,E);function p(){var y=E!==null&&E.apply(this,arguments)||this;return y.legacyEvents=[],y}return p.prototype.push=function(y){var _=o.idFromEvent(y);if(_!==void 0&&this.transcoder.latestState.idToInputIndex[_]!==void 0)return this.replaceEventsInLegacyStream([y]);var O=this.transcoder.outStream.length-1;return this.legacyEvents.push(y),this.transcoder.processToLatestEvent(),O},p.prototype.processUndosFromPushPayload=function(y){for(var _=void 0,O=Math.min(y.length,this.legacyEvents.length),P=0;P<O;P++)if(y[P]!==o.idFromEvent(this.legacyEvents[P])){_=P-1;break}return _===void 0&&y.length<this.legacyEvents.length&&(_=y.length-1),_!==void 0?this.deleteTailEvents(this.legacyEvents.length-1-_):this.transcoder.outStream.length-1},p.prototype.updateFromPushPayload=function(y,_){if(this.transcoder.baseEvents.length>0){var O=o.idFromEvent(this.transcoder.baseEvents[0]);O&&O.indexOf("auto_generated")!==-1&&y.unshift(O)}for(var P=this.processUndosFromPushPayload(y),C={},V=0,U=_;V<U.length;V++){var G=U[V];C[o.idFromEvent(G)]=G}for(var k=[],nt=0,H=this.legacyEvents;nt<H.length;nt++){var j=H[nt],$=o.idFromEvent(j);$&&n.has(C,$)&&k.push(C[$])}k.length!==0&&(P=this.replaceEventsInLegacyStream(k));for(var Z=this.legacyEvents.length;Z<y.length;Z++){var F=y[Z],B=C[F];if(B!==void 0)this.push(B);else{console.log("WARNING: The controller thinks that event "+F+" is new. But we cannot find it in the newEvents in the push payload. Will not attempt to push any more events");break}}return this.transcoder.processToLatestEvent(),P},p.prototype.updateFromSerializedPushPayload=function(y,_){var O=JSON.parse(_);return this.updateFromPushPayload(y,O)},p.prototype.replaceEventsInLegacyStream=function(y){for(var _=n.clone(this.transcoder.latestState),O=1/0,P=0,C=0,V=y;C<V.length;C++){var U=V[C],G=o.idFromEvent(U),k=_.idToInputIndex[G];k<O&&(O=k,P=_.idToOutputIndex[G])}this.transcoder.rollbackToBeforeEvent(O);var nt=this.transcoder.outStream.length-1;this.setEngineOutStreamAndIndex(P);for(var H=0,j=y;H<j.length;H++){var $=j[H],Z=_.idToInputIndex[o.idFromEvent($)];this.legacyEvents.splice(Z,1,$)}return this.transcoder.processToLatestEvent(),nt},p.prototype.deleteTailEvents=function(y){y=Math.min(this.legacyEvents.length,y),this.legacyEvents.splice(this.legacyEvents.length-y,y),this.transcoder.rollbackToBeforeEvent(this.legacyEvents.length);var _=this.transcoder.outStream.length-1;return this.setEngineOutStreamAndIndex(this.transcoder.outStream.length),_},p.prototype.stateBeforeLegacyEvent=function(y){var _=new this.stateAccessorClass(o.AccessorType.Before,this);return _.eventIndex=this.transcoder.latestState.idToOutputIndex[y],_},p.prototype.stateAfterLegacyEvent=function(y){var _=new this.stateAccessorClass(o.AccessorType.Before,this);return _.eventIndex=this.transcoder.firstOutputIndexAfterInputEventId(y),_},p.prototype.stateBeforeEvent=function(y){var _=new this.stateAccessorClass(o.AccessorType.Before,this);return _.eventIndex=this.transcoder.outIndexMap[y],_},p.prototype.stateAfterEvent=function(y){var _=new this.stateAccessorClass(o.AccessorType.After,this);return _.eventIndex=this.transcoder.outIndexMap[y],_},p.prototype.stateAfterTimestamp=function(y){return new this.stateAccessorClass(o.AccessorType.After,this)},p.prototype.eventIdAfterTimestamp=function(y){throw new Error("method not implemented for Transcoder")},p.prototype.outputStream=function(){return this.transcoder.processToLatestEvent(),this.transcoder.outStream},p.prototype.outputEventById=function(y){return this.outputStream()[this.transcoder.outIndexMap[y]]},p.prototype.outputEventsById=function(y){return n.map(y,this.outputEventById,this)},p.prototype.setEngineOutStreamAndIndex=function(y){for(var _=0,O=this.engines;_<O.length;_++){var P=O[_];P.baseEvents=this.transcoder.outStream,P.rollbackToBeforeEvent(y)}},p}(g);ft.TranscoderController=T;var z=function(){function E(p){this.accessorType=p,this.typeToMethodName={0:"latestState",1:"stateBeforeEvent",2:"stateAfterEvent"}}return E}();ft.BaseStateAccessor=z;var A=function(E){e.__extends(p,E);function p(y,_){var O=E.call(this,y)||this;return O.controller=_,O}return p.prototype.get=function(y,_){return this.stateForCurrentAccessType(_)[y]},p.prototype.call=function(y,_,O){var P;return(P=this.stateForCurrentAccessType(O))[y].apply(P,_)},p.prototype.stateForCurrentAccessType=function(y){if(this.accessorType===o.AccessorType.Latest)return y[this.typeToMethodName[this.accessorType]];var _=y[this.typeToMethodName[this.accessorType]](this.eventIndex);if(_===void 0)throw new S(this.eventIndex);return _},p}(z);ft.EngineStateAccessor=A;function b(E,p){for(var y=0,_=E.length-1;y<=_;){var O=Math.floor((y+_)/2),P=E[O-1];if(P){if(E[O].createdAt>p&&P.createdAt<=p)return P}else return E[O];var C=E[O].createdAt;C&&p<C?_=O-1:y=O+1}return E[E.length-1]}return ft}var vn={},bo;function Gu(){return bo||(bo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Sport=e.StatFormat=e.onValidPlayCode=e.isValidPlayCode=e.MultiSportEventCode=void 0;var n;(function(s){s.BeginPlay="begin_play",s.EndPlay="end_play",s.SetTeams="set_teams",s.Play="play",s.ActivatePlayer="activate_player",s.DeactivatePlayer="deactivate_player",s.EndPeriod="end_period",s.AssignPlayer="assign_player",s.AdjustScore="adjust_score",s.OverrideScore="override_score",s.SetGameSettings="set_game_settings",s.SetServer="set_server"})(n=e.MultiSportEventCode||(e.MultiSportEventCode={}));function i(s,f){return Object.values(f).includes(s)}e.isValidPlayCode=i;function o(s,f,d,l){if(f.code!==n.Play)return s;var g=f;return i(g.attributes.play_code,d)?l(s,g):s}e.onValidPlayCode=o,function(s){s.INTEGER="integer",s.DECIMAL="decimal",s.FLOAT_PERCENTAGE="floatPercentage",s.FLOAT_RATIO="floatRatio",s.PERCENTAGE="percentage",s.PERCENTAGE_SIGN="percentageSign",s.WIDE_INTEGER="wideInteger",s.JOIN="join"}(e.StatFormat||(e.StatFormat={})),function(s){s.SOCCER="soccer",s.HOCKEY="hockey",s.FIELD_HOCKEY="fieldHockey",s.LACROSSE="lacrosse",s.WATER_POLO="waterPolo",s.RUGBY="rugby",s.FOOTBALL="football",s.FLAG_FOOTBALL="flagFootball",s.BASKETBALL="basketball",s.VOLLEYBALL="volleyball"}(e.Sport||(e.Sport={}))}(vn)),vn}var _t={},fi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.HOOPS_CONFIGURATION=e.OpponentPlayCode=e.PlayCode=void 0;var n;(function(o){o.Made2="made2",o.Made3="made3",o.Missed2="missed2",o.Missed3="missed3",o.MadeFreeThrow="madeFreeThrow",o.MissedFreeThrow="missedFreeThrow",o.Foul="foul",o.TechnicalFoul="technicalFoul",o.Turnover="turnover",o.Rebound="rebound",o.OffensiveRebound="offensiveRebound",o.DefensiveRebound="defensiveRebound",o.Assist="assist",o.Steal="steal",o.Block="block",o.Timeout="timeout",o.Timeout30="timeout30"})(n=e.PlayCode||(e.PlayCode={}));var i;(function(o){o.Made2="made2",o.Made3="made3",o.MadeFreeThrow="madeFreeThrow",o.MissedFreeThrow="missedFreeThrow",o.Foul="foul",o.TechnicalFoul="technicalFoul",o.Turnover="turnover",o.Rebound="rebound",o.OffensiveRebound="offensiveRebound",o.DefensiveRebound="defensiveRebound",o.Timeout="timeout",o.Timeout30="timeout30"})(i=e.OpponentPlayCode||(e.OpponentPlayCode={})),e.HOOPS_CONFIGURATION={play_codes:Object.values(n),opponent_play_codes:Object.values(i)}})(fi);var Yt={},Mo;function Uu(){if(Mo)return Yt;Mo=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.pluralSuffix=Yt.ordinalNumber=Yt.stubbify=void 0;function e(o){return o?"${"+o+"}":""}Yt.stubbify=e;function n(o){var s={1:"st",2:"nd",3:"rd"},f="th";return(o<4||o>20)&&(f=s[o%10]||"th"),"".concat(o).concat(f)}Yt.ordinalNumber=n;function i(o,s){return o<=0?"no ".concat(s,"s"):o===1?"1 ".concat(s):"".concat(o," ").concat(s,"s")}return Yt.pluralSuffix=i,Yt}var Ft={},Ro;function Ku(){if(Ro)return Ft;Ro=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.inRange=Ft.getRandomInt=Ft.xor=Ft.bin=Ft.safeSum=void 0;var e=re,n=e.__importStar(Me);function i(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return n.reduce(l,function(S,R){return S+(R||0)},0)}Ft.safeSum=i;function o(l){return l?1:0}Ft.bin=o;var s=function(l,g){return!l&&g||l&&!g};Ft.xor=s;function f(l){return Math.floor(Math.random()*l)}Ft.getRandomInt=f;function d(l,g,S){return(l-g)*(l-S)<=0}return Ft.inRange=d,Ft}var yn={},je={},Fo;function rc(){if(Fo)return je;Fo=1,Object.defineProperty(je,"__esModule",{value:!0}),je.asTuple=void 0;var e=function(n){return n};return je.asTuple=e,je}var $e={},_n={},Co;function nc(){return Co||(Co=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GameSettings=e.getPeriodType=e.PeriodType=void 0,function(i){i.Quarters="quarters",i.Halves="halves"}(e.PeriodType||(e.PeriodType={}));function n(i){var o;if(i.hoops)return(o=i.hoops)===null||o===void 0?void 0:o.periodType}e.getPeriodType=n,function(i){function o(f){return f?{hoops:{gameClock:f.get("gameClock"),periodType:f.get("periodType"),periodLength:f.get("periodLength"),teamTimeouts:f.get("teamTimeouts"),timeoutsReset:f.get("timeoutsReset")}}:i.emptyGameSettingsDoc()}i.fromHoopsMap=o;function s(){return{hoops:void 0}}i.emptyGameSettingsDoc=s}(e.GameSettings||(e.GameSettings={}))}(_n)),_n}var Bo;function ju(){if(Bo)return $e;Bo=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.formatPeriod=void 0;var e=Ku(),n=nc();function i(s,f){f===void 0&&(f=n.PeriodType.Quarters);var d,l=s;switch(f){case n.PeriodType.Quarters:{s<=4?d="Quarter":(l=s-4,d="Overtime");break}case n.PeriodType.Halves:{s<=2?d="Half":(l=s-2,d="Overtime");break}default:d="Period"}var g=o(l);return"".concat(l).concat(g," ").concat(d)}$e.formatPeriod=i;function o(s){if((0,e.inRange)(s,10,20))return"th";var f=s%10;switch(f){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}return $e}var qo;function ic(){return qo||(qo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepareScore=e.generateScoreChanged=e.generateGameEnd=e.generateGameState=e.generateAnnouncements=void 0;var n=re,i=n.__importStar(Uu()),o=n.__importDefault(Me),s=rc(),f=ju();function d(T){return{gameState:l(T.awayTeamId,T.homeTeamId,T.scores[T.awayTeamId],T.scores[T.homeTeamId],T.periodNumber,T.periodType),gameEnd:g(T),scoreChanged:S(T)}}e.generateAnnouncements=d;function l(T,z,A,b,E,p){var y=i.stubbify(T),_=i.stubbify(z),O=(0,f.formatPeriod)(E,p);return"Were underway at the ".concat(y," game versus ").concat(_,". Currently the game is in the ").concat(O," and the score is ").concat(y," ").concat(A," ").concat(_," ").concat(b)}e.generateGameState=l;function g(T){var z=o.default.sortBy((0,e.prepareScore)(T),function(E){return-1*E.score}),A=z[0],b=z[1];return A.score-b.score===0?"That's the end of the game, ".concat(A.stub," and ").concat(b.stub," tie ").concat(A.score," to ").concat(b.score,"."):"That's the end of the game, ".concat(A.stub," get the win over ").concat(b.stub," ").concat(A.score," to ").concat(b.score,".")}e.generateGameEnd=g;function S(T){var z=T.scores[T.awayTeamId],A=T.scores[T.homeTeamId];return"Score changed! ".concat(z," ").concat(A)}e.generateScoreChanged=S;var R=function(T){return(0,s.asTuple)([{stub:i.stubbify(T.awayTeamId),score:T.scores[T.awayTeamId]},{stub:i.stubbify(T.homeTeamId),score:T.scores[T.homeTeamId]}])};e.prepareScore=R}(yn)),yn}var mn={},se={},zo;function oc(){if(zo)return se;zo=1,Object.defineProperty(se,"__esModule",{value:!0}),se.unreachablePlayCode=se.assertUnreachable=void 0;function e(i){throw new Error("Unhandled case value ".concat(i))}se.assertUnreachable=e;function n(i){throw new Error("Unhandled case value ".concat(i))}return se.unreachablePlayCode=n,se}var No;function ac(){return No||(No=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TeamPlayerStats=e.Stats=e.LegacyHoopsStat=e.HoopsStat=void 0;var n=re,i=n.__importStar(la()),o=n.__importStar(oc()),s=ci(),f=Gu(),d=fi,l;(function(p){p.FGM="FGM",p.FGA="FGA",p.FGP="FG%",p.M2PT="2PTM",p.A2PT="2PTA",p.P2PT="2PT%",p.M3PT="3PTM",p.A3PT="3PTA",p.P3PT="3PT%",p.FTM="FTM",p.FTA="FTA",p.FTP="FT%",p.REB="REB",p.ORB="ORB",p.DRB="DRB",p.AST="AST",p.STL="STL",p.PF="PF",p.TF="TF",p.TO="TO",p.PTS="PTS",p.GP="GP",p.GS="GS",p.BLK="BLK",p.TMO="TMO",p.TMO30="TMO30",p.PM="+/-",p.AST2TO="AST/TO",p.TSP="TS%",p.EFGP="eFG%",p.REBPG="RPG",p.ASTPG="APG",p.STLPG="SPG",p.BLKPG="BPG",p.PFPG="PFPG",p.TOPG="TOPG",p.PTSPG="PPG"})(l=e.HoopsStat||(e.HoopsStat={})),function(p){p.OF="OF",p.FF="FF",p.PT2C="2CP",p.PTOTO="POT",p.PIP="PIP",p.M3PTPFGA="3PTM/FGA",p.TSA="TSA",p.A2PTPG="2PTAPG",p.A3PTPG="3PTAPG",p.M2PTPG="2PTMPG",p.M3PTPG="3PTMPG",p.FGMPG="FGMPG",p.FGAPG="FGAPG",p.FTMPG="FTMPG",p.FTAPG="FTAPG",p.FTAPFGA="FTA/FGA",p.OFPG="OFPG",p.TFPG="TFPG",p.FFPG="FFPG"}(e.LegacyHoopsStat||(e.LegacyHoopsStat={}));var g;(function(p){function y(){return Object.values(l)}p.values=y;function _(){return S(p.values().reduce(function(G,k){return G.set(k,0)},i.Map()))}p.empty=_;function O(G,k){if((0,f.isValidPlayCode)(k,d.HOOPS_CONFIGURATION.play_codes))return V(!0,G,k);o.unreachablePlayCode(k)}p.addPlay=O;function P(G,k){if((0,f.isValidPlayCode)(k,d.HOOPS_CONFIGURATION.play_codes))return V(!1,G,k);o.unreachablePlayCode(k)}p.removePlay=P;function C(G){switch(G){case l.REB:return l.REBPG;case l.AST:return l.ASTPG;case l.STL:return l.STLPG;case l.BLK:return l.BLKPG;case l.PF:return l.PFPG;case l.TO:return l.TOPG;case l.PTS:return l.PTSPG;default:return}}p.averageKey=C;function V(G,k,nt){return S(function(){switch(nt){case d.PlayCode.Made2:return U(G,k,l.FGM,l.FGA,l.M2PT,l.A2PT);case d.PlayCode.Made3:return U(G,k,l.FGM,l.FGA,l.A3PT,l.M3PT);case d.PlayCode.MadeFreeThrow:return U(G,k,l.FTM,l.FTA);case d.PlayCode.Missed2:return U(G,k,l.FGA,l.A2PT);case d.PlayCode.Missed3:return U(G,k,l.FGA,l.A3PT);case d.PlayCode.MissedFreeThrow:return U(G,k,l.FTA);case d.PlayCode.Assist:return U(G,k,l.AST);case d.PlayCode.Foul:return U(G,k,l.PF);case d.PlayCode.TechnicalFoul:return U(G,k,l.TF,l.PF);case d.PlayCode.Rebound:return U(G,k,l.REB);case d.PlayCode.OffensiveRebound:return U(G,k,l.REB,l.ORB);case d.PlayCode.DefensiveRebound:return U(G,k,l.REB,l.DRB);case d.PlayCode.Steal:return U(G,k,l.STL);case d.PlayCode.Turnover:return U(G,k,l.TO);case d.PlayCode.Block:return U(G,k,l.BLK);case d.PlayCode.Timeout:return U(G,k,l.TMO);case d.PlayCode.Timeout30:return U(G,k,l.TMO30);default:o.unreachablePlayCode(nt)}}())}function U(G,k){for(var nt=[],H=2;H<arguments.length;H++)nt[H-2]=arguments[H];return nt.reduce(function(j,$){return j.updateIn([$],0,function(Z){return G?++Z:--Z})},k)}})(g=e.Stats||(e.Stats={})),function(p){function y(j){var $=Object.entries(j).reduce(function(F,B){var q=B[0],L=B[1];return F.setIn([q],L.stats.offense[l.PTS])},i.Map.of()),Z=p.fromTeamsStatDoc(j,!0);return p.toTeamsStatDoc(Z,$)}p.getDerivedMultiGameStatsWithBaseStats=y;function _(j){return j.toJS().reduce(function($,Z){var F=i.Map().set(s.TOTAL,g.empty()).set(s.UNASSIGNED_PLAYER,g.empty());return $.set(Z,F)},i.Map())}p.fromTeams=_;function O(j,$){return $.reduce(function(Z,F,B){var q=j.getIn([B,s.TOTAL,l.PTS]),L=j.getIn([B,s.UNASSIGNED_PLAYER,l.PTS]),Q=q-L,tt=F-Q,ut=j.setIn([B,s.TOTAL,l.PTS],F).setIn([B,s.UNASSIGNED_PLAYER,l.PTS],tt);return Z[B]=k(ut.get(B)),Z},{})}p.toTeamsStatDoc=O;function P(j,$){return Object.entries(j).reduce(function(Z,F){var B=F[0],q=F[1],L=q.stats,Q=q.unassigned,tt=q.players,ut=Object.entries(tt).reduce(function(Nt,ae){var Re=ae[0],Y=ae[1];return Nt.setIn([B,Re],G(Y.stats,!!$))},Z).setIn([B,s.TOTAL],G(L,!!$));return Q?ut.setIn([B,s.UNASSIGNED_PLAYER],G(Q.stats,!1)):ut},i.fromJS({}))}p.fromTeamsStatDoc=P;function C(j,$){return j.reduce(function(Z,F,B){return Z.setIn([B],V(j.get(B),$.get(B)))},i.Map())}p.subtract=C;function V(j,$){return j.reduce(function(Z,F,B){return Z.setIn([B],U(j.get(B),$.get(B,g.empty())))},i.Map())}function U(j,$){return z(j.reduce(function(Z,F,B){return Z.setIn([B],j.get(B)-$.get(B,0))},g.empty()),void 0)}function G(j,$){return z(i.fromJS(j.offense),$)}function k(j){return j.reduce(function($,Z,F){switch(F){case s.TOTAL:case s.UNASSIGNED_PLAYER:return $;default:return $.players[F]=nt(Z),$}},{players:{},unassigned:nt(j.get(s.UNASSIGNED_PLAYER)),stats:H(j.get(s.TOTAL))})}function nt(j){return{stats:H(j)}}function H(j){return{offense:j.toJS()}}}(e.TeamPlayerStats||(e.TeamPlayerStats={}));function S(p){return R(p,T,z)}function R(p){for(var y=[],_=1;_<arguments.length;_++)y[_-1]=arguments[_];return y.reduce(function(O,P){return P(O)},p)}function T(p){var y=function(O){return p.get(O,0)},_=y(l.FTM)+y(l.M2PT)*2+y(l.M3PT)*3;return p.setIn([l.PTS],_)}function z(p,y){var _=function(C){return p.get(C,0)},O=function(C,V){return _(C)/_(V)},P=p.setIn([l.FGP],O(l.FGM,l.FGA)).setIn([l.P2PT],O(l.M2PT,l.A2PT)).setIn([l.P3PT],O(l.M3PT,l.A3PT)).setIn([l.FTP],O(l.FTM,l.FTA));return P=R(P,A,b,E),y?g.values().reduce(function(C,V){var U=g.averageKey(V);return U?C.setIn([U],O(V,l.GP)):C},P):P}function A(p){var y=function(O){return p.get(O,0)},_=function(O,P){return y(O)/y(P)};return p.setIn([l.AST2TO],_(l.AST,l.TO))}function b(p){var y=function(O){return p.get(O,0)},_=.5*y(l.PTS)/(y(l.FGA)+.44*y(l.FTA));return p.setIn([l.TSP],_)}function E(p){var y=function(O){return p.get(O,0)},_=(y(l.FGM)+.5*y(l.M3PT))/y(l.FGA);return p.setIn([l.EFGP],_)}}(mn)),mn}var Lo;function uc(){if(Lo)return _t;Lo=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.getColorCommentaryMaybe=_t.getEndPeriodCommentary=_t.getPeriodStartCommentary=_t.getAdjustScoreCommentary=_t.getDeactivatePlayerCommentary=_t.getActivatePlayerCommentary=_t.getPlayCommentary=void 0;var e=re,n=fi,i=e.__importStar(Uu()),o=Ku(),s=e.__importDefault(Me),f=ic(),d=ac(),l=ju();function g(F,B,q){q===void 0&&(q=o.getRandomInt);var L=i.stubbify(B);switch(F){case n.PlayCode.Made2:return S(L,q);case n.PlayCode.Made3:return R(L,q);case n.PlayCode.Missed2:return T(L,q);case n.PlayCode.Missed3:return z(L,q);case n.PlayCode.MadeFreeThrow:return A(L,q);case n.PlayCode.MissedFreeThrow:return b(L,q);case n.PlayCode.Foul:return E(L,q);case n.PlayCode.Turnover:return p(L,q);case n.PlayCode.Rebound:case n.PlayCode.DefensiveRebound:case n.PlayCode.OffensiveRebound:return y(L,q);case n.PlayCode.Assist:return _(L,q);case n.PlayCode.Steal:return O(L,q);case n.PlayCode.Block:return P(L,q);case n.PlayCode.Timeout:return C(L);case n.PlayCode.Timeout30:return V(L);default:return}}_t.getPlayCommentary=g;function S(F,B){var q=["".concat(F," finishes with the soft touch for 2"),"Easy shot from ".concat(F," for 2"),"".concat(F," puts it up and in for 2"),"".concat(F," nails the deuce"),"".concat(F," with the soft touch around the rim for 2")],L=B(q.length);return q[L]}function R(F,B){var q=["The shot from ".concat(F," is good for 3"),"".concat(F," drains one from beyond the arc"),"".concat(F," knocks down the trifecta!"),"".concat(F," with the triple"),"".concat(F," with the 3 is good")],L=B(q.length);return q[L]}function T(F,B){var q=["No good for 2 from ".concat(F," that time"),"".concat(F," is too strong on the 2 and misses"),"Just off the mark with that one from ".concat(F," for 2"),"Tough luck on the close-range shot from ".concat(F),"".concat(F," Nearly had it for 2, but the ball spins out")],L=B(q.length);return q[L]}function z(F,B){var q=["".concat(F," is off from 3"),"No basket on the triple from ".concat(F),"A long one from ".concat(F," is missed"),"".concat(F," not good from long range"),"".concat(F," came up short on the 3 point attempt")],L=B(q.length);return q[L]}function A(F,B){var q=["".concat(F," Sinks the free throw!"),"".concat(F," Calmly drains the free throw"),"".concat(F," Delivers a perfect stroke from the free throw line")],L=B(q.length);return q[L]}function b(F,B){var q=["".concat(F," Comes up short from the free throw line"),"No luck from ".concat(F,"'s free throw shot"),"".concat(F," Can't find the mark from the free throw line")],L=B(q.length);return q[L]}function E(F,B){var q=["".concat(F," Commits the foul on that play"),"Oops, thats a foul by ".concat(F)],L=B(q.length);return q[L]}function p(F,B){var q=["".concat(F," Loses possession with the turnover"),"".concat(F," Turns it over")],L=B(q.length);return q[L]}function y(F,B){var q=["".concat(F," Grabs the board"),"".concat(F," Cleans the glass with that rebound"),"".concat(F," Claims the board")],L=B(q.length);return q[L]}function _(F,B){var q=["".concat(F," with the dish"),"".concat(F," Delivers the dime"),"".concat(F," Makes it look easy with the assist")],L=B(q.length);return q[L]}function O(F,B){var q=["".concat(F," Is picking pockets with the steal"),"".concat(F," Forces the turnover with the steal"),"".concat(F," Sneaks up and steals the ball away")],L=B(q.length);return q[L]}function P(F,B){var q=["".concat(F," Rejects the shot with the block"),"".concat(F," Swats it away"),"".concat(F," Sends it back with the block")],L=B(q.length);return q[L]}function C(F){return"A minute timeout is called by ".concat(F)}function V(F){return"A quick timeout on the floor by ".concat(F)}function U(F,B){B===void 0&&(B=o.getRandomInt);var q=i.stubbify(F),L=["".concat(q," Checks in"),"".concat(q," Enters the game"),"".concat(q," Makes their way onto the court")],Q=B(L.length);return L[Q]}_t.getActivatePlayerCommentary=U;function G(F,B){B===void 0&&(B=o.getRandomInt);var q=i.stubbify(F),L=["".concat(q," Is headed to the bench after a strong stint"),"".concat(q," Takes a breather on the bench"),"Substitution time! ".concat(q," makes way for a sub")],Q=B(L.length);return L[Q]}_t.getDeactivatePlayerCommentary=G;function k(F,B){return"Score changed! ".concat(F," ").concat(B)}_t.getAdjustScoreCommentary=k;function nt(F,B,q,L,Q,tt){var ut=i.stubbify(F),Nt=i.stubbify(B),ae=(0,l.formatPeriod)(Q,tt);return Q===1?(0,f.generateGameState)(F,B,q,L,Q,tt):"The ".concat(ae," is underway. ").concat(ut," take on ").concat(Nt,". The current score is ").concat(ut," ").concat(q," ").concat(Nt," ").concat(L)}_t.getPeriodStartCommentary=nt;function H(F,B,q){var L=(0,l.formatPeriod)(F,q),Q=s.default.sortBy((0,f.prepareScore)({scores:B.scores,homeTeamId:B.homeId,awayTeamId:B.awayId}),function(ut){return-1*ut.score}),tt=Q[0].score-Q[1].score;return tt===0?"The ".concat(L," ends tied up at ").concat(Q[0].score):"The ".concat(L," comes to a close with ").concat(Q[0].stub," leading the game by ").concat(tt)}_t.getEndPeriodCommentary=H;function j(F,B,q,L,Q){var tt=[],ut=Z(B,q,Q);ut&&tt.push(ut);var Nt=$(F,q,L,Q);if(Nt&&tt.push(Nt),tt.length!==0)return tt.join(" ").trim()}_t.getColorCommentaryMaybe=j;function $(F,B,q,L){if([n.PlayCode.Made2,n.PlayCode.Made3,n.PlayCode.MadeFreeThrow].includes(B))try{var Q=+F.stats[L].players[q].stats.offense[d.HoopsStat.PTS];switch(B){case n.PlayCode.MadeFreeThrow:if(Q===10)return"They now have 10 points in the game!";break;case n.PlayCode.Made2:if([10,11].includes(Q))return"They now have ".concat(Q," points in the game!");break;case n.PlayCode.Made3:if([10,11,12].includes(Q))return"They now have ".concat(Q," points in the game!");break;default:return}}catch{return}}function Z(F,B,q){if([n.PlayCode.Made2,n.PlayCode.Made3].includes(B))try{var L=F.latestScorerStreaks[q].streakCount;switch(L){case 2:return"Thats back to back buckets, theyre heating up!";case 3:return"Thats 3 buckets in a row, theyre on fire!";default:return}}catch{return}}return _t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSportPlayByPlayEngine=e.PlayByPlayEntry=e.playByPlayEntry=e.PlayByPlayState=e.PlayByPlayType=void 0;var n=re,i=n.__importStar(la()),o=n.__importStar(ku()),s=n.__importStar(Hs()),f=ec(),d=Gu(),l=uc(),g;(function(z){z.Play="play",z.StartPeriod="startPeriod",z.EndPeriod="endPeriod",z.ImplicitPlayerActivate="implicitPlayerActivate",z.PlayerActivate="playerActivate",z.PlayerDeactivate="playerDeactivate",z.ScoreAdjustment="scoreAdjustment",z.ScoreOverride="scoreOverride",z.BeginPlay="beginPlay",z.EndPlay="endPlay"})(g=e.PlayByPlayType||(e.PlayByPlayType={}));var S=function(z){n.__extends(A,z);function A(){return z!==null&&z.apply(this,arguments)||this}return Object.defineProperty(A.prototype,"isInProgress",{get:function(){return this.get(A.isInProgressKey,!1)},enumerable:!1,configurable:!0}),A.prototype.setInProgress=function(b){return this.set(A.isInProgressKey,b)},Object.defineProperty(A.prototype,"inProgressEntries",{get:function(){return this.get(A.inProgressEntriesKey)},enumerable:!1,configurable:!0}),A.prototype.pushInProgressEntry=function(b){return this.updateIn([A.inProgressEntriesKey],i.List(),function(E){return E.push(b)})},A.prototype.clearInProgressEntries=function(){return this.set(A.inProgressEntriesKey,i.List())},Object.defineProperty(A.prototype,"latestScorerStreaks",{get:function(){return this.get(A.latestScorerStreakKey).toJS()},enumerable:!1,configurable:!0}),A.prototype.trackLatestScore=function(b,E){var p=this.latestScorerStreaks;if(p[b]){var y=p[b];return y.playerId===E?this.setIn([A.latestScorerStreakKey,b,"playerId"],E).setIn([A.latestScorerStreakKey,b,"streakCount"],y.streakCount+1):this.setIn([A.latestScorerStreakKey,b,"playerId"],E).setIn([A.latestScorerStreakKey,b,"streakCount"],1)}return this.setIn([A.latestScorerStreakKey,b,"playerId"],E).setIn([A.latestScorerStreakKey,b,"streakCount"],1)},A.prototype.trackLatestMiss=function(b,E){var p=this.latestScorerStreaks;if(p[b]){var y=p[b];if(y.playerId===E)return this.setIn([A.latestScorerStreakKey,b,"playerId"],E).setIn([A.latestScorerStreakKey,b,"streakCount"],0)}return this},Object.defineProperty(A.prototype,"allEntriesImmutable",{get:function(){return this.get(A.entriesKey)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"allEntries",{get:function(){return this.allEntriesImmutable.toJS()},enumerable:!1,configurable:!0}),A.prototype.pushEntry=function(b){var E=this.allEntriesImmutable.count(),p=this.updateIn([A.entriesKey],function(y){return y.push(b)});return b.eventIds&&b.eventIds.forEach(function(y){return p=p.setIn([A.eventIdIndexMapKey,y],E)}),p},A.prototype.entryForEventId=function(b){var E=this.getIn([A.eventIdIndexMapKey,b]);if(E!==void 0){var p=this.getIn([A.entriesKey,E]);if(p===void 0)throw new f.InvalidEventIndexError(E);return{entry:p,index:E}}},A.isInProgressKey="isInProgress",A.inProgressEntriesKey="inProgressEntries",A.entriesKey="entries",A.eventIdIndexMapKey="eventIdIndexMap",A.latestScorerStreakKey="latestScorerStreak",A}(s.ImmutableState);e.PlayByPlayState=S,e.playByPlayEntry=i.Record({id:"",template:"",playByPlayType:"",eventIds:void 0,playCode:void 0,playerStats:void 0,teamId:void 0,playerId:void 0,playerAssignmentEventId:void 0,period:void 0,teamScores:void 0,periodScores:void 0,scoreAdjustment:void 0,playerEdited:void 0,playerAssignable:!1,teamAssignable:!1,deletable:!1,createdAt:void 0,summary:void 0,playDetails:void 0,initialState:void 0,colorCommentary:void 0});var R=function(z){n.__extends(A,z);function A(){return z!==null&&z.apply(this,arguments)||this}return A}(e.playByPlayEntry);e.PlayByPlayEntry=R;var T=function(z){n.__extends(A,z);function A(b,E,p,y,_,O){var P=z.call(this,b)||this;return P.baseEvents=b,P.confirguration=E,P.activePlayer=p,P.period=y,P.score=_,P.stats=O,P.playsForStreakTracking=[],P.playsForStreakBreaking=[],P}return A.prototype.initialState=function(){return new S(i.fromJS({entries:[],eventIdIndexMap:{},isInProgress:!1,inProgressEntriesKey:{},latestScorerStreak:{}}))},A.prototype.processOneEvent=function(b,E){var p=this;switch(E.code){case d.MultiSportEventCode.BeginPlay:return this.handleBeginPlay(b,E);case d.MultiSportEventCode.EndPlay:return this.handleEndPlay(b,E);case d.MultiSportEventCode.Play:return(0,d.onValidPlayCode)(b,E,this.confirguration.play_codes,function(y,_){return p.handlePlay(y,_)});case d.MultiSportEventCode.EndPeriod:return this.handleEndPeriod(b,E);case d.MultiSportEventCode.AssignPlayer:return this.handleAssignPlayer(b,E);case d.MultiSportEventCode.ActivatePlayer:return this.handleActivatePlayer(b,E);case d.MultiSportEventCode.DeactivatePlayer:return this.handleDeactivatePlayer(b,E);case d.MultiSportEventCode.AdjustScore:return this.handleAdjustScore(b,E);case d.MultiSportEventCode.OverrideScore:return this.handleOverrideScore(b,E);default:return b}},A.prototype.handleBeginPlay=function(b,E){return b},A.prototype.handleEndPlay=function(b,E){return b},A.prototype.getColorCommentaryMaybe=function(b,E,p,y,_){},A.prototype.handleEndPeriod=function(b,E){var p=this.period.stateBeforeEvent(this.nextEventOffset),y=this.score.stateAfterEvent(this.nextEventOffset),_=new R(i.fromJS({template:"End of period ".concat(p==null?void 0:p.period),id:"end_of_period_".concat(p==null?void 0:p.period),playByPlayType:g.EndPeriod,eventIds:[E.id],period:p==null?void 0:p.period,teamScores:y==null?void 0:y.scoresImmutable,playerAssignable:!1,teamAssignable:!1,deletable:!0,createdAt:E.createdAt,summary:this.getEndPeriodSummary(p.period,y,p.periodType)}));return b.pushEntry(_)},A.prototype.getEndPeriodSummary=function(b,E,p){},A.prototype.handleAssignPlayer=function(b,E){var p,y=E.attributes.play_event_id,_=b.entryForEventId(y);if(_===void 0)return b;var O=_.index,P=_.entry;if(P.eventIds===void 0)throw new Error("entry is missing eventId");var C=E.attributes.player_id,V=(p=this.stats)===null||p===void 0?void 0:p.stateAfterEvent(this.nextEventOffset);P.playCode&&P.teamId&&(this.playsForStreakTracking.includes(P.playCode)?b=b.trackLatestScore(P.teamId,C):this.playsForStreakBreaking.includes(P.playCode)&&(b=b.trackLatestMiss(P.teamId,C)));var U=void 0;P.playCode&&P.teamId&&V&&(U=this.getColorCommentaryMaybe(V,b,P.playCode,C,P.teamId));var G=new R(i.fromJS({template:"".concat(P.playCode," by ").concat(C),id:P.id,playByPlayType:g.Play,eventIds:P.eventIds,playCode:P.playCode,playerStats:V==null?void 0:V.stats[P.teamId].players[C],teamId:P.teamId,period:P.period,playerId:C,playerAssignmentEventId:E.id,teamScores:P.teamScores,playerEdited:E.attributes.is_edit,playerAssignable:!0,teamAssignable:!0,deletable:!0,createdAt:P.createdAt,colorCommentary:U,summary:(0,l.getPlayCommentary)(P.playCode,C)})),k=this.activePlayer.stateBeforeEvent(this.nextEventOffset);if(k!=null&&k.isPlayerActive(P.teamId,C))return b.setIn(["entries",O],G);var nt=new R(i.fromJS({template:"".concat(C," entered the game"),id:"".concat(P.id,"_implicit_activate"),playByPlayType:g.ImplicitPlayerActivate,teamId:P.teamId,period:P.period,playerId:C,playerAssignable:!1,teamAssignable:!1,deleteable:!1,createdAt:P.createdAt,summary:this.getActivatePlayerSummary(C)}));return b.updateIn(["entries"],function(H){return H.set(O,G).insert(O,nt)}).setIn(n.__spreadArray(["eventIdIndexMap"],P.eventIds.toArray(),!0),O+1)},A.prototype.handleActivatePlayer=function(b,E){var p=E.attributes.team_id,y=E.attributes.player_id,_=this.period.stateBeforeEvent(this.nextEventOffset),O=this.activePlayer.stateBeforeEvent(this.nextEventOffset);if(O!=null&&O.isPlayerActive(p,y))return b;var P=new R(i.fromJS({template:"".concat(y," entered the game"),id:E.attributes.pbp_entry_id,playByPlayType:g.PlayerActivate,eventIds:[E.id],teamId:p,period:_==null?void 0:_.period,playerId:y,playerAssignable:!0,teamAssignable:!1,deletable:!0,createdAt:E.createdAt,summary:this.getActivatePlayerSummary(y)}));return b.pushEntry(P)},A.prototype.getActivatePlayerSummary=function(b){},A.prototype.handleDeactivatePlayer=function(b,E){var p=E.attributes.team_id,y=E.attributes.player_id,_=this.period.stateBeforeEvent(this.nextEventOffset),O=this.activePlayer.stateBeforeEvent(this.nextEventOffset);if(!(O!=null&&O.isPlayerActive(p,y)))return b;var P=new R(i.fromJS({template:"".concat(y," sat down"),id:E.attributes.pbp_entry_id,playByPlayType:g.PlayerDeactivate,eventIds:[E.id],teamId:p,period:_==null?void 0:_.period,playerId:y,playerAssignable:!0,teamAssignable:!1,deletable:!0,createdAt:E.createdAt,summary:this.getDeactivatePlayerSummary(y)}));return b.pushEntry(P)},A.prototype.getDeactivatePlayerSummary=function(b){},A.prototype.handleAdjustScore=function(b,E){var p=E.attributes.team_id,y=E.attributes.adjustment,_=this.score.stateAfterEvent(this.nextEventOffset),O=this.period.stateBeforeEvent(this.nextEventOffset),P=new R(i.fromJS({template:"Score adjusted: ".concat(y," for ").concat(p),id:E.attributes.pbp_entry_id,playByPlayType:g.ScoreAdjustment,eventIds:[E.id],teamId:p,period:O==null?void 0:O.period,teamScores:_==null?void 0:_.scoresImmutable,scoreAdjustment:y,playerAssignable:!1,teamAssignable:!0,deletable:!0,createdAt:E.createdAt,summary:this.getAdjustScoreSummary(_.scores[_.awayId],_.scores[_.homeId])}));return b.pushEntry(P)},A.prototype.getAdjustScoreSummary=function(b,E){},A.prototype.handleOverrideScore=function(b,E){var p,y=E.attributes.team_id,_=(p=this.score.stateBeforeEvent(this.nextEventOffset))===null||p===void 0?void 0:p.scores[y],O=this.score.stateAfterEvent(this.nextEventOffset),P=O.scores[y]-_,C=this.period.stateBeforeEvent(this.nextEventOffset),V=new R(i.fromJS({template:"Score adjusted: ".concat(P," for ").concat(y),id:E.attributes.pbp_entry_id,playByPlayType:g.ScoreOverride,eventIds:[E.id],teamId:y,period:C==null?void 0:C.period,teamScores:O==null?void 0:O.scoresImmutable,scoreAdjustment:P,playerAssignable:!1,teamAssignable:!0,deletable:!0,createdAt:E.createdAt}));return b.pushEntry(V)},A}(o.VersionedStateEngine);e.MultiSportPlayByPlayEngine=T})(Es);var sc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.onValidPlayCode=e.isValidPlayCode=e.PlayCode=e.BasketballEventCode=void 0;var n;(function(f){f.SetTeams="set_teams",f.Play="play",f.ActivatePlayer="activate_player",f.DeactivatePlayer="deactivate_player",f.EndPeriod="end_period",f.AssignPlayer="assign_player",f.AdjustScore="adjust_score",f.OverrideScore="override_score"})(n=e.BasketballEventCode||(e.BasketballEventCode={}));var i;(function(f){f.Made2="made2",f.Made3="made3",f.Missed2="missed2",f.Missed3="missed3",f.MadeFreeThrow="madeFreeThrow",f.MissedFreeThrow="missedFreeThrow",f.Foul="foul",f.Turnover="turnover",f.Rebound="rebound",f.Assist="assist",f.Steal="steal",f.Block="block"})(i=e.PlayCode||(e.PlayCode={}));function o(f){return Object.values(i).includes(f)}e.isValidPlayCode=o;function s(f,d,l){if(d.code!==n.Play)return f;var g=d;return o(g.attributes.play_code)?l(f,g):f}e.onValidPlayCode=s})(sc);var cc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GOAL_SPORT_CONFIGURATION=e.PlayCode=void 0;var n;(function(i){i.Goal="goal",i.MissedShot="missed_shot",i.Assist="assist",i.Save="save"})(n=e.PlayCode||(e.PlayCode={})),e.GOAL_SPORT_CONFIGURATION={play_codes:Object.values(n)}})(cc);var fc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FOOTBALL_CONFIGURATION=e.TwoPointConversionType=e.TouchdownType=e.PlayCode=void 0;var n;(function(i){i.CompletePass="complete_pass",i.ExtraPoint="extra_point",i.FieldGoal="field_goal",i.Fumble="fumble",i.IncompletePass="incomplete_pass",i.Interception="interception",i.Kickoff="kickoff",i.KickoffReturn="kickoff_return",i.Punt="punt",i.PuntReturn="punt_return",i.Run="run",i.Sack="sack",i.Safety="safety",i.Tackle="tackle",i.Touchdown="touchdown",i.Turnover="turnover",i.TwoPointConversion="two_point_conversion"})(n=e.PlayCode||(e.PlayCode={})),function(i){i.Pass="pass",i.Run="run",i.Defense="defense",i.SpecialTeams="special_teams"}(e.TouchdownType||(e.TouchdownType={})),function(i){i.Pass="pass",i.Run="run"}(e.TwoPointConversionType||(e.TwoPointConversionType={})),e.FOOTBALL_CONFIGURATION={play_codes:Object.values(n)}})(fc);var hc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RUGBY_POINTS=e.RUGBY_CONFIGURATION=e.PlayCode=void 0;var n;(function(i){i.Try="try",i.Conversion="conversion",i.PenaltyGoal="penalty_goal",i.DropGoal="drop_goal"})(n=e.PlayCode||(e.PlayCode={})),e.RUGBY_CONFIGURATION={play_codes:Object.values(n)},e.RUGBY_POINTS={penalty_goal:3,drop_goal:3,conversion:2,try:5}})(hc);var lc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServeOutcome=e.VOLLEYBALL_CONFIGURATION=e.PlayCode=void 0;var n;(function(i){i.Point="point",i.Serve="serve"})(n=e.PlayCode||(e.PlayCode={})),e.VOLLEYBALL_CONFIGURATION={play_codes:Object.values(n)},function(i){i.In="in",i.Ace="ace",i.Error="error"}(e.ServeOutcome||(e.ServeOutcome={}))})(lc);export{fi as a,cc as b,fc as c,sc as d,hc as e,lc as f,Es as p};
//# sourceMappingURL=gamechanger-sabertooth-CJDfPiU3.js.map
