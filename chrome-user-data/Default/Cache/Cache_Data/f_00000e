const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/startRecording-DpGgd9b1.js","assets/app-chunk-three-DjU8sGjD.js","assets/app-chunk-one-Dq9u3Mlt.js"])))=>i.map(i=>d[i]);
import{o as jo}from"./app-chunk-three-DjU8sGjD.js";const O={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},tt=console,wt={};Object.keys(O).forEach(t=>{wt[t]=tt[t]});const Zt="Datadog Browser SDK:",T={debug:wt.debug.bind(tt,Zt),log:wt.log.bind(tt,Zt),info:wt.info.bind(tt,Zt),warn:wt.warn.bind(tt,Zt),error:wt.error.bind(tt,Zt)},$e="https://docs.datadoghq.com",Gr=`${$e}/real_user_monitoring/browser/troubleshooting`,Ge="More details:";function Hr(t,e){return(...n)=>{try{return t(...n)}catch(r){T.error(e,r)}}}function mt(t){return t!==0&&Math.random()*100<=t}function De(t,e){return+t.toFixed(e)}function Ko(t){return me(t)&&t>=0&&t<=100}function me(t){return typeof t=="number"}const $=1e3,H=60*$,jr=60*H,qo=24*jr,Kr=365*qo;function He(t){return{relative:t,timeStamp:Wo(t)}}function Yo(t){return{relative:je(t),timeStamp:t}}function Wo(t){const e=Y()-performance.now();return e>he()?Math.round(qt(e,t)):Jo(t)}function Xo(){return Math.round(Y()-qt(he(),performance.now()))}function E(t){return me(t)?De(t*1e6,0):t}function Y(){return new Date().getTime()}function U(){return Y()}function W(){return performance.now()}function z(){return{relative:W(),timeStamp:U()}}function qr(){return{relative:0,timeStamp:he()}}function F(t,e){return e-t}function qt(t,e){return t+e}function je(t){return t-he()}function Jo(t){return Math.round(qt(he(),t))}function Qo(t){return t<Kr}let dn;function he(){return dn===void 0&&(dn=performance.timing.navigationStart),dn}const ct=1024,Yr=1024*ct,Zo=/[^\u0000-\u007F]/;function Bn(t){return Zo.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length}function ti(t){const e=t.reduce((s,o)=>s+o.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function ce(t){return{...t}}function Me(t,e){return Object.keys(t).some(n=>t[n]===e)}function et(t){return Object.keys(t).length===0}function ei(t,e){const n={};for(const r of Object.keys(t))n[r]=e(t[r]);return n}function ut(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let t=_dd_temp_;return delete Object.prototype._dd_temp_,typeof t!="object"&&(typeof self=="object"?t=self:typeof window=="object"?t=window:t={}),t}function _t(t,e){const n=ut();let r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}let Pe,Wr=!1;function ni(t){Pe=t}function ri(t){Wr=t}function si(t,e,n){const r=n.value;n.value=function(...s){return(Pe?_(r):r).apply(this,s)}}function _(t){return function(){return Rt(t,this,arguments)}}function Rt(t,e,n){try{return t.apply(e,n)}catch(r){Xr(r)}}function Xr(t){if(Ln(t),Pe)try{Pe(t)}catch(e){Ln(e)}}function Ln(...t){Wr&&T.error("[MONITOR]",...t)}function V(t,e){return _t(ut(),"setTimeout")(_(t),e)}function q(t){_t(ut(),"clearTimeout")(t)}function Yt(t,e){return _t(ut(),"setInterval")(_(t),e)}function Ke(t){_t(ut(),"clearInterval")(t)}class C{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.observers.push(e),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter(n=>e!==n),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(e){this.observers.forEach(n=>n(e))}}function Jr(...t){return new C(e=>{const n=t.map(r=>r.subscribe(s=>e.notify(s)));return()=>n.forEach(r=>r.unsubscribe())})}function _e(t,e,n){const r=n&&n.leading!==void 0?n.leading:!0,s=n&&n.trailing!==void 0?n.trailing:!0;let o=!1,i,a;return{throttled:(...c)=>{if(o){i=c;return}r?t(...c):i=c,o=!0,a=V(()=>{s&&i&&t(...i),o=!1,i=void 0},e)},cancel:()=>{q(a),o=!1,i=void 0}}}function I(){}function B(t){return t?(parseInt(t,10)^Math.random()*16>>parseInt(t,10)/4).toString(16):`10000000-1000-4000-8000-${1e11}`.replace(/[018]/g,B)}const Ue=/([\w-]+)\s*=\s*([^;]+)/g;function ue(t,e){for(Ue.lastIndex=0;;){const n=Ue.exec(t);if(n){if(n[1]===e)return n[2]}else break}}function oi(t){const e=new Map;for(Ue.lastIndex=0;;){const n=Ue.exec(t);if(n)e.set(n[1],n[2]);else break}return e}function Qr(t,e,n=""){const r=t.charCodeAt(e-1),o=r>=55296&&r<=56319?e+1:e;return t.length<=o?t:`${t.slice(0,o)}${n}`}function ii(){return Zr()===0}function Cp(){return Zr()===1}let Se;function Zr(){return Se??(Se=ai())}function ai(t=window){var e;const n=t.navigator.userAgent;return t.chrome||/HeadlessChrome/.test(n)?0:((e=t.navigator.vendor)===null||e===void 0?void 0:e.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}function ge(t,e,n=0,r){const s=new Date;s.setTime(s.getTime()+n);const o=`expires=${s.toUTCString()}`,i=r&&r.crossSite?"none":"strict",a=r&&r.domain?`;domain=${r.domain}`:"",c=r&&r.secure?";secure":"",l=r&&r.partitioned?";partitioned":"";document.cookie=`${t}=${e};${o};path=/;samesite=${i}${a}${c}${l}`}function Vn(t){return ue(document.cookie,t)}let fn;function pt(t){return fn||(fn=oi(document.cookie)),fn.get(t)}function ts(t,e){ge(t,"",0,e)}function ci(t){if(document.cookie===void 0||document.cookie===null)return!1;try{const e=`dd_cookie_test_${B()}`,n="test";ge(e,n,H,t);const r=Vn(e)===n;return ts(e,t),r}catch(e){return T.error(e),!1}}let pn;function ui(){if(pn===void 0){const t=`dd_site_test_${B()}`,e="test",n=window.location.hostname.split(".");let r=n.pop();for(;n.length&&!Vn(t);)r=`${n.pop()}.${r}`,ge(t,e,$,{domain:r});ts(t,{domain:r}),pn=r}return pn}const Wt="_dd_s";function li(t,e){for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(e(r,n,t))return r}}function Fe(t){return Object.values(t)}function zn(t){return Object.entries(t)}const xt=4*jr,es=15*H,di=Kr,le={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"},ns=/^([a-zA-Z]+)=([a-z0-9-]+)$/,$n="&";function fi(t){return!!t&&(t.indexOf($n)!==-1||ns.test(t))}const pi="1";function Tt(t,e){const n={isExpired:pi};return e.trackAnonymousUser&&(t!=null&&t.anonymousId?n.anonymousId=t==null?void 0:t.anonymousId:n.anonymousId=B()),n}function Ie(t){return et(t)}function rs(t){return!Ie(t)}function Be(t){return t.isExpired!==void 0||!mi(t)}function mi(t){return(t.created===void 0||Y()-Number(t.created)<xt)&&(t.expire===void 0||Y()<Number(t.expire))}function ss(t){t.expire=String(Y()+es)}function Gn(t){return zn(t).map(([e,n])=>e==="anonymousId"?`aid=${n}`:`${e}=${n}`).join($n)}function os(t){const e={};return fi(t)&&t.split($n).forEach(n=>{const r=ns.exec(n);if(r!==null){const[,s,o]=r;s==="aid"?e.anonymousId=o:e[s]=o}}),e}const hi="_dd",_i="_dd_r",gi="_dd_l",bi="rum",yi="logs";function vi(t){if(!pt(Wt)){const n=pt(hi),r=pt(_i),s=pt(gi),o={};n&&(o.id=n),s&&/^[01]$/.test(s)&&(o[yi]=s),r&&/^[012]$/.test(r)&&(o[bi]=r),rs(o)&&(ss(o),t.persistSession(o))}}function or(t){const e=Ci(t);return ci(e)?{type:le.COOKIE,cookieOptions:e}:void 0}function Si(t,e){const n={isLockEnabled:ii(),persistSession:Ei(e),retrieveSession:Ti,expireSession:r=>wi(e,r,t)};return vi(n),n}function Ei(t){return e=>{ge(Wt,Gn(e),es,t)}}function wi(t,e,n){const r=Tt(e,n);ge(Wt,Gn(r),n.trackAnonymousUser?di:xt,t)}function Ti(){const t=Vn(Wt);return os(t)}function Ci(t){const e={};return e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=ui()),e}const Ai="_dd_test_";function ir(){try{const t=B(),e=`${Ai}${t}`;localStorage.setItem(e,t);const n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:le.LOCAL_STORAGE}:void 0}catch{return}}function Ii(t){return{isLockEnabled:!1,persistSession:is,retrieveSession:Ri,expireSession:e=>xi(e,t)}}function is(t){localStorage.setItem(Wt,Gn(t))}function Ri(){const t=localStorage.getItem(Wt);return os(t)}function xi(t,e){is(Tt(t,e))}const ki=10,Oi=100,as=[];let Re;function Ct(t,e,n=0){var r;const{isLockEnabled:s,persistSession:o,expireSession:i}=e,a=f=>o({...f,lock:l}),c=()=>{const f=e.retrieveSession(),m=f.lock;return f.lock&&delete f.lock,{session:f,lock:m}};if(Re||(Re=t),t!==Re){as.push(t);return}if(s&&n>=Oi){ar(e);return}let l,u=c();if(s){if(u.lock){Ee(t,e,n);return}if(l=B(),a(u.session),u=c(),u.lock!==l){Ee(t,e,n);return}}let d=t.process(u.session);if(s&&(u=c(),u.lock!==l)){Ee(t,e,n);return}if(d&&(Be(d)?i(d):(ss(d),s?a(d):o(d))),s&&!(d&&Be(d))){if(u=c(),u.lock!==l){Ee(t,e,n);return}o(u.session),d=u.session}(r=t.after)===null||r===void 0||r.call(t,d||u.session),ar(e)}function Ee(t,e,n){V(()=>{Ct(t,e,n+1)},ki)}function ar(t){Re=void 0;const e=as.shift();e&&Ct(e,t)}const cr=$;function Li(t){switch(t.sessionPersistence){case le.COOKIE:return or(t);case le.LOCAL_STORAGE:return ir();case void 0:{let e=or(t);return!e&&t.allowFallbackToLocalStorage&&(e=ir()),e}default:T.error(`Invalid session persistence '${String(t.sessionPersistence)}'`)}}function Ni(t,e,n,r){const s=new C,o=new C,i=new C,a=t.type===le.COOKIE?Si(e,t.cookieOptions):Ii(e),{expireSession:c}=a,l=Yt(p,cr);let u;b();const{throttled:d,cancel:f}=_e(()=>{Ct({process:v=>{if(Ie(v))return;const Q=g(v);return h(Q),Q},after:v=>{rs(v)&&!y()&&N(v),u=v}},a)},cr);function m(){Ct({process:v=>y()?g(v):void 0},a)}function p(){Ct({process:v=>Be(v)?Tt(v,e):void 0,after:g},a)}function g(v){return Be(v)&&(v=Tt(v,e)),y()&&(S(v)?M():(i.notify({previousState:u,newState:v}),u=v)),v}function b(){Ct({process:v=>{if(Ie(v))return Tt(v,e)},after:v=>{u=v}},a)}function h(v){if(Ie(v))return!1;const{trackingType:Q,isTracked:Mt}=r(v[n]);v[n]=Q,delete v.isExpired,Mt&&!v.id&&(v.id=B(),v.created=String(Y()))}function y(){return u[n]!==void 0}function S(v){return u.id!==v.id||u[n]!==v[n]}function M(){u=Tt(u,e),o.notify()}function N(v){u=v,s.notify()}function it(v){Ct({process:Q=>({...Q,...v}),after:g},a)}return{expandOrRenewSession:d,expandSession:m,getSession:()=>u,renewObservable:s,expireObservable:o,sessionStateUpdateObservable:i,restartSession:b,expire:()=>{f(),c(u),g(Tt(u,e))},stop:()=>{Ke(l)},updateSessionState:it}}const Nn={GRANTED:"granted",NOT_GRANTED:"not-granted"};function cs(t){const e=new C;return{tryToInit(n){t||(t=n)},update(n){t=n,e.notify()},isGranted(){return t===Nn.GRANTED},observable:e}}function kt(t,e,n){if(typeof t!="object"||t===null)return JSON.stringify(t);const r=Bt(Object.prototype),s=Bt(Array.prototype),o=Bt(Object.getPrototypeOf(t)),i=Bt(t);try{return JSON.stringify(t,e,n)}catch{return"<error: unable to serialize object>"}finally{r(),s(),o(),i()}}function Bt(t){const e=t,n=e.toJSON;return n?(delete e.toJSON,()=>{e.toJSON=n}):I}function Hn(t){return jn(t,location.href).href}function Di(t){try{return!!jn(t)}catch{return!1}}function Mi(t){const e=jn(t).pathname;return e[0]==="/"?e:`/${e}`}function jn(t,e){const n=Pi();if(n)try{return e!==void 0?new n(t,e):new n(t)}catch(o){throw new Error(`Failed to construct URL: ${String(o)} ${kt({url:t,base:e})}`)}if(e===void 0&&!/:/.test(t))throw new Error(`Invalid URL: '${t}'`);let r=document;const s=r.createElement("a");if(e!==void 0){r=document.implementation.createHTMLDocument("");const o=r.createElement("base");o.href=e,r.head.appendChild(o),r.body.appendChild(s)}return s.href=t,s}const ur=URL;let we;function Pi(){if(we===void 0)try{we=new ur("http://test/path").href==="http://test/path"}catch{we=!1}return we?ur:void 0}const us="datad0g.com",Ui="dd0g-gov.com",At="datadoghq.com",Fi="datadoghq.eu",Bi="ddog-gov.com",Vi="pci.browser-intake-datadoghq.com",zi=["ddsource","ddtags"];function oe(t,e,n){const r=$i(t,e);return{build(s,o){const i=Gi(t,e,n,s,o);return r(i)},urlPrefix:r(""),trackType:e}}function $i(t,e){const n=`/api/v2/${e}`,r=t.proxy;if(typeof r=="string"){const o=Hn(r);return i=>`${o}?ddforward=${encodeURIComponent(`${n}?${i}`)}`}if(typeof r=="function")return o=>r({path:n,parameters:o});const s=ls(e,t);return o=>`https://${s}${n}?${o}`}function ls(t,e){const{site:n=At,internalAnalyticsSubdomain:r}=e;if(t==="logs"&&e.usePciIntake&&n===At)return Vi;if(r&&n===At)return`${r}.${At}`;if(n===Ui)return`http-intake.logs.${n}`;const s=n.split("."),o=s.pop();return`browser-intake-${s.join("-")}.${o}`}function Gi({clientToken:t,internalAnalyticsSubdomain:e},n,r,s,{retry:o,encoding:i}){const a=["sdk_version:6.5.1",`api:${s}`].concat(r);o&&a.push(`retry_count:${o.count}`,`retry_after:${o.lastFailureStatus}`);const c=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${t}`,`dd-evp-origin-version=${encodeURIComponent("6.5.1")}`,"dd-evp-origin=browser",`dd-request-id=${B()}`];return i&&c.push(`dd-evp-encoding=${i}`),n==="rum"&&c.push(`batch_time=${U()}`),e&&c.reverse(),c.join("&")}const Hi=200;function ji(t){const{env:e,service:n,version:r,datacenter:s}=t,o=[];return e&&o.push(Te("env",e)),n&&o.push(Te("service",n)),r&&o.push(Te("version",r)),s&&o.push(Te("datacenter",s)),o}function Te(t,e){const n=Hi-t.length-1;(e.length>n||Ki(e))&&T.warn(`${t} value doesn't meet tag requirements and will be sanitized. ${Ge} ${$e}/getting_started/tagging/#defining-tags`);const r=e.replace(/,/g,"_");return`${t}:${r}`}function Ki(t){return qi()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t):!1}function qi(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}function Yi(t){const e=t.site||At,n=ji(t),r=Wi(t,n);return{replica:Xi(t,n),site:e,...r}}function Wi(t,e){return{logsEndpointBuilder:oe(t,"logs",e),rumEndpointBuilder:oe(t,"rum",e),sessionReplayEndpointBuilder:oe(t,"replay",e)}}function Xi(t,e){if(!t.replica)return;const n={...t,site:At,clientToken:t.replica.clientToken},r={logsEndpointBuilder:oe(n,"logs",e),rumEndpointBuilder:oe(n,"rum",e)};return{applicationId:t.replica.applicationId,...r}}function ds(t){return zi.every(e=>t.includes(e))}const ie={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},Dn={ALL:"all",SAMPLED:"sampled"};function mn(t,e){return t!=null&&typeof t!="string"?(T.error(`${e} must be defined as a string`),!1):!0}function Ji(t){return t&&typeof t=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(t)?(T.error(`Site should be a valid Datadog site. ${Ge} ${$e}/getting_started/site/.`),!1):!0}function Vt(t,e){return t!==void 0&&!Ko(t)?(T.error(`${e} Sample Rate should be a number between 0 and 100`),!1):!0}function fs(t){var e,n,r,s,o,i;if(!t||!t.clientToken){T.error("Client Token is not configured, we will not send any data.");return}if(!(!Ji(t.site)||!Vt(t.sessionSampleRate,"Session")||!Vt(t.telemetrySampleRate,"Telemetry")||!Vt(t.telemetryConfigurationSampleRate,"Telemetry Configuration")||!Vt(t.telemetryUsageSampleRate,"Telemetry Usage")||!mn(t.version,"Version")||!mn(t.env,"Env")||!mn(t.service,"Service"))){if(t.trackingConsent!==void 0&&!Me(Nn,t.trackingConsent)){T.error('Tracking Consent should be either "granted" or "not-granted"');return}return{beforeSend:t.beforeSend&&Hr(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Li(t),sessionSampleRate:(e=t.sessionSampleRate)!==null&&e!==void 0?e:100,telemetrySampleRate:(n=t.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=t.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,telemetryUsageSampleRate:(s=t.telemetryUsageSampleRate)!==null&&s!==void 0?s:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:(o=t.trackingConsent)!==null&&o!==void 0?o:Nn.GRANTED,trackAnonymousUser:(i=t.trackAnonymousUser)!==null&&i!==void 0?i:!0,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16*ct,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*$,batchMessagesLimit:50,messageBytesLimit:256*ct,...Yi(t)}}}function ps(t){return{session_sample_rate:t.sessionSampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:t.telemetryUsageSampleRate,use_before_send:!!t.beforeSend,use_partitioned_cross_site_session_cookie:t.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:!!t.proxy,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,track_anonymous_user:t.trackAnonymousUser,session_persistence:t.sessionPersistence,allow_fallback_to_local_storage:!!t.allowFallbackToLocalStorage,store_contexts_across_pages:!!t.storeContextsAcrossPages,allow_untrusted_events:!!t.allowUntrustedEvents,tracking_consent:t.trackingConsent}}var de;(function(t){t.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",t.MISSING_URL_CONTEXT_TELEMETRY="missing_url_context_telemetry"})(de||(de={}));const Kn=new Set;function ms(t){Array.isArray(t)&&Qi(t.filter(e=>Me(de,e)))}function Qi(t){t.forEach(e=>{Kn.add(e)})}function lr(t){return Kn.has(t)}function Zi(){return Kn}const be="?";function ot(t){const e=[];let n=hn(t,"stack");const r=String(t);return n&&n.startsWith(r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(s=>{const o=na(s)||sa(s)||ia(s)||ua(s);o&&(!o.func&&o.line&&(o.func=be),e.push(o))}),{message:hn(t,"message"),name:hn(t,"name"),stack:e}}const hs="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Ht="(?::(\\d+))",ta=new RegExp(`^\\s*at (.*?) ?\\(${hs}${Ht}?${Ht}?\\)?\\s*$`,"i"),ea=new RegExp(`\\((\\S*)${Ht}${Ht}\\)`);function na(t){const e=ta.exec(t);if(!e)return;const n=e[2]&&e[2].indexOf("native")===0,r=e[2]&&e[2].indexOf("eval")===0,s=ea.exec(e[2]);return r&&s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3]),{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||be,line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}const ra=new RegExp(`^\\s*at ?${hs}${Ht}?${Ht}??\\s*$`,"i");function sa(t){const e=ra.exec(t);if(e)return{args:[],column:e[3]?+e[3]:void 0,func:be,line:e[2]?+e[2]:void 0,url:e[1]}}const oa=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function ia(t){const e=oa.exec(t);if(e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||be,line:+e[3],url:e[2]}}const aa=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ca=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ua(t){const e=aa.exec(t);if(!e)return;const n=e[3]&&e[3].indexOf(" > eval")>-1,r=ca.exec(e[3]);return n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||be,line:e[4]?+e[4]:void 0,url:e[3]}}function hn(t,e){if(typeof t!="object"||!t||!(e in t))return;const n=t[e];return typeof n=="string"?n:void 0}function la(t,e,n,r){const s=[{url:e,column:r,line:n}],{name:o,message:i}=fa(t);return{name:o,message:i,stack:s}}const da=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function fa(t){let e,n;return{}.toString.call(t)==="[object String]"&&([,e,n]=da.exec(t)),{name:e,message:n}}function jt(t){const n=new Error(t);n.name="HandlingStack";let r;return Rt(()=>{const s=ot(n);s.stack=s.stack.slice(2),r=Ot(s)}),r}function Ot(t){let e=_s(t);return t.stack.forEach(n=>{const r=n.func==="?"?"<anonymous>":n.func,s=n.args&&n.args.length>0?`(${n.args.join(", ")})`:"",o=n.line?`:${n.line}`:"",i=n.line&&n.column?`:${n.column}`:"";e+=`
  at ${r}${s} @ ${n.url}${o}${i}`}),e}function _s(t){return`${t.name||"Error"}: ${t.message}`}function nt(t,e,n,{computeHandlingStack:r}={}){let s=t[e];if(typeof s!="function")if(e in t&&e.startsWith("on"))s=I;else return{stop:I};let o=!1;const i=function(){if(o)return s.apply(this,arguments);const a=Array.from(arguments);let c;Rt(n,null,[{target:this,parameters:a,onPostCall:u=>{c=u},handlingStack:r?jt("instrumented method"):void 0}]);const l=s.apply(this,a);return c&&Rt(c,null,[l]),l};return t[e]=i,{stop:()=>{o=!0,t[e]===i&&(t[e]=s)}}}function Ap(t,e,n){const r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r.set||!r.configurable)return{stop:I};const s=I;let o=(a,c)=>{V(()=>{o!==s&&n(a,c)},0)};const i=function(a){r.set.call(this,a),o(this,a)};return Object.defineProperty(t,e,{set:i}),{stop:()=>{var a;((a=Object.getOwnPropertyDescriptor(t,e))===null||a===void 0?void 0:a.set)===i&&Object.defineProperty(t,e,r),o=s}}}const pa=220*ct,ma="$",ha=3;function x(t,e=pa){const n=Bt(Object.prototype),r=Bt(Array.prototype),s=[],o=new WeakMap,i=_n(t,ma,void 0,s,o),a=JSON.stringify(i);let c=a?a.length:0;if(c>e){gn(e,"discarded",t);return}for(;s.length>0&&c<e;){const l=s.shift();let u=0;if(Array.isArray(l.source))for(let d=0;d<l.source.length;d++){const f=_n(l.source[d],l.path,d,s,o);if(f!==void 0?c+=JSON.stringify(f).length:c+=4,c+=u,u=1,c>e){gn(e,"truncated",t);break}l.target[d]=f}else for(const d in l.source)if(Object.prototype.hasOwnProperty.call(l.source,d)){const f=_n(l.source[d],l.path,d,s,o);if(f!==void 0&&(c+=JSON.stringify(f).length+u+d.length+ha,u=1),c>e){gn(e,"truncated",t);break}l.target[d]=f}}return n(),r(),i}function _n(t,e,n,r,s){const o=ba(t);if(!o||typeof o!="object")return _a(o);const i=Mn(o);if(i!=="[Object]"&&i!=="[Array]"&&i!=="[Error]")return i;const a=t;if(s.has(a))return`[Reference seen at ${s.get(a)}]`;const c=n!==void 0?`${e}.${n}`:e,l=Array.isArray(o)?[]:{};return s.set(a,c),r.push({source:o,target:l,path:c}),l}function _a(t){return typeof t=="bigint"?`[BigInt] ${t.toString()}`:typeof t=="function"?`[Function] ${t.name||"unknown"}`:typeof t=="symbol"?`[Symbol] ${t.description||t.toString()}`:t}function Mn(t){try{if(t instanceof Event)return ga(t);if(t instanceof RegExp)return`[RegExp] ${t.toString()}`;const n=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch{}return"[Unserializable]"}function ga(t){return{type:t.type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?Mn(t.currentTarget):null,target:t.target?Mn(t.target):null}}function ba(t){const e=t;if(e&&typeof e.toJSON=="function")try{return e.toJSON()}catch{}return t}function gn(t,e,n){T.warn(`The data provided has been ${e} as it is over the limit of ${t} characters:`,n)}const gs="No stack, consider using an instance of Error";function qn({stackTrace:t,originalError:e,handlingStack:n,componentStack:r,startClocks:s,nonErrorPrefix:o,source:i,handling:a}){const c=lt(e),l=ya(t,c,o,e),u=va(c,t)?Ot(t):gs,d=c?vs(e,i):void 0,f=t?t.name:void 0,m=bs(e),p=ys(e);return{startClocks:s,source:i,handling:a,handlingStack:n,componentStack:r,originalError:e,type:f,message:l,stack:u,causes:d,fingerprint:m,context:p}}function ya(t,e,n,r){return t!=null&&t.message&&(t!=null&&t.name)?t.message:e?"Empty message":`${n} ${kt(x(r))}`}function va(t,e){return e===void 0?!1:t?!0:e.stack.length>0&&(e.stack.length>1||e.stack[0].url!==void 0)}function bs(t){return lt(t)&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function ys(t){if(t!==null&&typeof t=="object"&&"dd_context"in t)return t.dd_context}function Sa(t){var e;return(e=/@ (.+)/.exec(t))===null||e===void 0?void 0:e[1]}function lt(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}function vs(t,e){let n=t;const r=[];for(;lt(n==null?void 0:n.cause)&&r.length<10;){const s=ot(n.cause);r.push({message:n.cause.message,source:e,type:s==null?void 0:s.name,stack:s&&Ot(s)}),n=n.cause}return r.length?r:void 0}const j={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Ss(t){const e=(s,o)=>{const i=qn({stackTrace:s,originalError:o,startClocks:z(),nonErrorPrefix:"Uncaught",source:j.SOURCE,handling:"unhandled"});t.notify(i)},{stop:n}=Ea(e),{stop:r}=wa(e);return{stop:()=>{n(),r()}}}function Ea(t){return nt(window,"onerror",({parameters:[e,n,r,s,o]})=>{let i;lt(o)?i=ot(o):i=la(e,n,r,s),t(i,o??e)})}function wa(t){return nt(window,"onunhandledrejection",({parameters:[e]})=>{const n=e.reason||"Empty reason",r=ot(n);t(r,n)})}function Es(t){const e={version:"6.5.1",onReady(n){n()},...t};return Object.defineProperty(e,"_setDebug",{get(){return ri},enumerable:!1}),e}function ws(t,e,n){const r=t[e];r&&!r.q&&r.version&&T.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,r&&r.q&&r.q.forEach(s=>Hr(s,"onReady callback threw an error:")())}function qe(t,e){e.silentMultipleInit||T.error(`${t} is already initialized.`)}function k(t,e,n,r,s){return gt(t,e,[n],r,s)}function gt(t,e,n,r,{once:s,capture:o,passive:i}={}){const a=_(f=>{!f.isTrusted&&!f.__ddIsTrusted&&!t.allowUntrustedEvents||(s&&d(),r(f))}),c=i?{capture:o,passive:i}:o,l=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,u=_t(l,"addEventListener");n.forEach(f=>u.call(e,f,a,c));function d(){const f=_t(l,"removeEventListener");n.forEach(m=>f.call(e,m,a,c))}return{stop:d}}const Kt={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Ts(t,e){const n=[];e.includes(Kt.cspViolation)&&n.push(Ca(t));const r=e.filter(s=>s!==Kt.cspViolation);return r.length&&n.push(Ta(r)),Jr(...n)}function Ta(t){return new C(e=>{if(!window.ReportingObserver)return;const n=_((s,o)=>s.forEach(i=>e.notify(Aa(i)))),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),()=>{r.disconnect()}})}function Ca(t){return new C(e=>{const{stop:n}=k(t,document,"securitypolicyviolation",r=>{e.notify(Ia(r))});return n})}function Aa(t){const{type:e,body:n}=t;return Cs({type:n.id,message:`${e}: ${n.message}`,originalError:t,stack:As(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function Ia(t){const e=`'${t.blockedURI}' blocked by '${t.effectiveDirective}' directive`;return Cs({type:t.effectiveDirective,message:`${Kt.cspViolation}: ${e}`,originalError:t,csp:{disposition:t.disposition},stack:As(t.effectiveDirective,t.originalPolicy?`${e} of the policy "${Qr(t.originalPolicy,100,"...")}"`:"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}function Cs(t){return{startClocks:z(),source:j.REPORT,handling:"unhandled",...t}}function As(t,e,n,r,s){return n?Ot({name:t,message:e,stack:[{func:"?",url:n,line:r??void 0,column:s??void 0}]}):void 0}function Yn(t,e){const n=window.__ddBrowserSdkExtensionCallback;n&&n({type:t,payload:e})}function Lt(t){return t===null?"null":Array.isArray(t)?"array":typeof t}function Ve(t,e,n=Ra()){if(e===void 0)return t;if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const s=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,s)}if(n.hasAlreadyBeenSeen(e))return;if(Array.isArray(e)){const s=Array.isArray(t)?t:[];for(let o=0;o<e.length;++o)s[o]=Ve(s[o],e[o],n);return s}const r=Lt(t)==="object"?t:{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Ve(r[s],e[s],n));return r}function Ye(t){return Ve(void 0,t)}function G(...t){let e;for(const n of t)n!=null&&(e=Ve(e,n));return e}function Ra(){if(typeof WeakSet<"u"){const e=new WeakSet;return{hasAlreadyBeenSeen(n){const r=e.has(n);return r||e.add(n),r}}}const t=[];return{hasAlreadyBeenSeen(e){const n=t.indexOf(e)>=0;return n||t.push(e),n}}}function Is(){var t;const e=window.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:(t=e.connection)===null||t===void 0?void 0:t.effectiveType}}function xa(t){const e=new Set;return t.forEach(n=>e.add(n)),Array.from(e)}function Rs(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}const ka=500;function Wn(){const t=[];return{add:s=>{t.push(s)>ka&&t.splice(0,1)},remove:s=>{Rs(t,s)},drain:s=>{t.forEach(o=>o(s)),t.length=0}}}const It={log:"log",configuration:"configuration",usage:"usage"},Oa=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],La=[Bi];let xs=Wn(),Xt=t=>{xs.add(()=>Xt(t))};function ks(t,e){let n;const r=new C,s=new Set,o=!La.includes(e.site)&&mt(e.telemetrySampleRate),i={[It.log]:o,[It.configuration]:o&&mt(e.telemetryConfigurationSampleRate),[It.usage]:o&&mt(e.telemetryUsageSampleRate)},a=Na();Xt=l=>{const u=kt(l);if(i[l.type]&&s.size<e.maxTelemetryEventsPerPage&&!s.has(u)){const d=c(t,l,a);r.notify(d),Yn("telemetry",d),s.add(u)}},ni(We);function c(l,u,d){return G({type:"telemetry",date:U(),service:l,version:"6.5.1",source:"browser",_dd:{format_version:2},telemetry:G(u,{runtime_env:d,connectivity:Is(),sdk_setup:"npm"}),experimental_features:Array.from(Zi())},n!==void 0?n():{})}return{setContextProvider:l=>{n=l},observable:r,enabled:o}}function Na(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function Os(){xs.drain()}function Ls(t){return t.site===us}function Nt(t,e){Ln(O.debug,t,e),Xt({type:It.log,message:t,status:"debug",...e})}function We(t,e){Xt({type:It.log,status:"error",...Da(t),...e})}function Ns(t){Xt({type:It.configuration,configuration:t})}function D(t){Xt({type:It.usage,usage:t})}function Da(t){if(lt(t)){const e=ot(t);return{error:{kind:e.name,stack:Ot(Ma(e))},message:e.message}}return{error:{stack:gs},message:`Uncaught ${kt(t)}`}}function Ma(t){return t.stack=t.stack.filter(e=>!e.url||Oa.some(n=>e.url.startsWith(n))),t}const te=1/0,Pa=H;let ee=null;const xe=new Set;function Ua(){xe.forEach(t=>t())}function Jt({expireDelay:t,maxEntries:e}){let n=[];const r=[];ee||(ee=Yt(()=>Ua(),Pa));const s=()=>{const m=W()-t;for(;n.length>0&&n[n.length-1].endTime<m;){const p=n.pop();p&&r.push(p.startTime)}};xe.add(s);function o(m,p){const g={value:m,startTime:p,endTime:te,remove:()=>{Rs(n,g)},close:b=>{g.endTime=b}};return e&&n.length>=e&&n.pop(),n.unshift(g),g}function i(m=te,p={returnInactive:!1}){for(const g of n)if(g.startTime<=m){if(p.returnInactive||m<=g.endTime)return g.value;break}}function a(m){const p=n[0];p&&p.endTime===te&&p.close(m)}function c(m=te,p=0){const g=qt(m,p);return n.filter(b=>b.startTime<=g&&m<=b.endTime).map(b=>b.value)}function l(){return n.map(({startTime:m,endTime:p,value:g})=>({startTime:m,endTime:p===te?"Infinity":p,value:g}))}function u(){return r}function d(){n=[]}function f(){xe.delete(s),xe.size===0&&ee&&(Ke(ee),ee=null)}return{add:o,find:i,closeActive:a,findAll:c,reset:d,stop:f,getAllEntries:l,getDeletedEntries:u}}const Fa=H,Ba=xt;function Ds(t,e,n,r){const s=new C,o=new C,i=Ni(t.sessionStoreStrategyType,t,e,n),a=Jt({expireDelay:Ba});i.renewObservable.subscribe(()=>{a.add(c(),W()),s.notify()}),i.expireObservable.subscribe(()=>{o.notify(),a.closeActive(W())}),i.expandOrRenewSession(),a.add(c(),qr().relative),r.observable.subscribe(()=>{r.isGranted()?i.expandOrRenewSession():i.expire()}),Va(t,()=>{r.isGranted()&&i.expandOrRenewSession()}),za(t,()=>i.expandSession()),$a(t,()=>i.restartSession());function c(){return{id:i.getSession().id,trackingType:i.getSession()[e],isReplayForced:!!i.getSession().forcedReplay,anonymousId:i.getSession().anonymousId}}return{findSession:(l,u)=>a.find(l,u),renewObservable:s,expireObservable:o,sessionStateUpdateObservable:i.sessionStateUpdateObservable,expire:i.expire,updateSessionState:i.updateSessionState}}function Va(t,e){gt(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0})}function za(t,e){const n=()=>{document.visibilityState==="visible"&&e()};k(t,document,"visibilitychange",n),Yt(n,Fa)}function $a(t,e){k(t,window,"resume",e,{capture:!0})}function Ms(t){return t>=500}function Ps(t){try{return t.clone()}catch{return}}const Ga=80*ct,Ha=32,Us=3*Yr,ja=H,Fs=$;function Bs(t,e,n,r,s){e.transportStatus===0&&e.queuedPayloads.size()===0&&e.bandwidthMonitor.canHandle(t)?zs(t,e,n,{onSuccess:()=>$s(0,e,n,r,s),onFailure:()=>{e.queuedPayloads.enqueue(t),Vs(e,n,r,s)}}):e.queuedPayloads.enqueue(t)}function Vs(t,e,n,r){t.transportStatus===2&&V(()=>{const s=t.queuedPayloads.first();zs(s,t,e,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=Fs,$s(1,t,e,n,r)},onFailure:()=>{t.currentBackoffTime=Math.min(ja,t.currentBackoffTime*2),Vs(t,e,n,r)}})},t.currentBackoffTime)}function zs(t,e,n,{onSuccess:r,onFailure:s}){e.bandwidthMonitor.add(t),n(t,o=>{e.bandwidthMonitor.remove(t),Ka(o)?(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:o.status},s()):(e.transportStatus=0,r())})}function $s(t,e,n,r,s){t===0&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(s({message:`Reached max ${r} events size queued for upload: ${Us/Yr}MiB`,source:j.AGENT,startClocks:z()}),e.queueFullReported=!0);const o=e.queuedPayloads;for(e.queuedPayloads=Gs();o.size()>0;)Bs(o.dequeue(),e,n,r,s)}function Ka(t){return t.type!=="opaque"&&(t.status===0&&!navigator.onLine||t.status===408||t.status===429||Ms(t.status))}function qa(){return{transportStatus:0,currentBackoffTime:Fs,bandwidthMonitor:Ya(),queuedPayloads:Gs(),queueFullReported:!1}}function Gs(){const t=[];return{bytesCount:0,enqueue(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first(){return t[0]},dequeue(){const e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size(){return t.length},isFull(){return this.bytesCount>=Us}}}function Ya(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle(t){return this.ongoingRequestCount===0||this.ongoingByteCount+t.bytesCount<=Ga&&this.ongoingRequestCount<Ha},add(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}}}function Wa(t,e,n){const r=qa(),s=(o,i)=>Qa(t,e,o,i);return{send:o=>{Bs(o,r,s,t.trackType,n)},sendOnExit:o=>{Xa(t,e,o)}}}function Xa(t,e,n){if(!!navigator.sendBeacon&&n.bytesCount<e)try{const o=t.build("beacon",n);if(navigator.sendBeacon(o,n.data))return}catch(o){Ja(o)}const s=t.build("xhr",n);Pn(s,n.data)}let dr=!1;function Ja(t){dr||(dr=!0,We(t))}function Qa(t,e,n,r){if(Za()&&n.bytesCount<e){const o=t.build("fetch",n);fetch(o,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(_(i=>r==null?void 0:r({status:i.status,type:i.type})),_(()=>{const i=t.build("xhr",n);Pn(i,n.data,r)}))}else{const o=t.build("xhr",n);Pn(o,n.data,r)}}function Za(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function Pn(t,e,n){const r=new XMLHttpRequest;r.open("POST",t,!0),e instanceof Blob&&r.setRequestHeader("Content-Type",e.type),k({allowUntrustedEvents:!0},r,"loadend",()=>{n==null||n({status:r.status})},{once:!0}),r.send(e)}function Dt(){const t=tc();if(t)return{getCapabilities(){var e;return JSON.parse(((e=t.getCapabilities)===null||e===void 0?void 0:e.call(t))||"[]")},getPrivacyLevel(){var e;return(e=t.getPrivacyLevel)===null||e===void 0?void 0:e.call(t)},getAllowedWebViewHosts(){return JSON.parse(t.getAllowedWebViewHosts())},send(e,n,r){const s=r?{id:r}:void 0;t.send(JSON.stringify({eventType:e,event:n,view:s}))}}}function Hs(t){const e=Dt();return!!e&&e.getCapabilities().includes(t)}function rt(t){var e;t===void 0&&(t=(e=ut().location)===null||e===void 0?void 0:e.hostname);const n=Dt();return!!n&&n.getAllowedWebViewHosts().some(r=>t===r||t.endsWith(`.${r}`))}function tc(){return ut().DatadogEventBridge}const $t={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function js(t){return new C(e=>{const{stop:n}=gt(t,window,["visibilitychange","freeze"],s=>{s.type==="visibilitychange"&&document.visibilityState==="hidden"?e.notify({reason:$t.HIDDEN}):s.type==="freeze"&&e.notify({reason:$t.FROZEN})},{capture:!0}),r=k(t,window,"beforeunload",()=>{e.notify({reason:$t.UNLOADING})}).stop;return()=>{n(),r()}})}function ec(t){return Fe($t).includes(t)}function nc({encoder:t,request:e,flushController:n,messageBytesLimit:r}){let s={};const o=n.flushObservable.subscribe(d=>u(d));function i(d,f,m){n.notifyBeforeAddMessage(f),m!==void 0?(s[m]=d,n.notifyAfterAddMessage()):t.write(t.isEmpty?d:`
${d}`,p=>{n.notifyAfterAddMessage(p-f)})}function a(d){return d!==void 0&&s[d]!==void 0}function c(d){const f=s[d];delete s[d];const m=t.estimateEncodedBytesCount(f);n.notifyAfterRemoveMessage(m)}function l(d,f){const m=kt(d),p=t.estimateEncodedBytesCount(m);if(p>=r){T.warn(`Discarded a message whose size was bigger than the maximum allowed size ${r}KB. ${Ge} ${Gr}/#technical-limitations`);return}a(f)&&c(f),i(m,p,f)}function u(d){const f=Fe(s).join(`
`);s={};const m=ec(d.reason),p=m?e.sendOnExit:e.send;if(m&&t.isAsync){const g=t.finishSync();g.outputBytesCount&&p(fr(g));const b=[g.pendingData,f].filter(Boolean).join(`
`);b&&p({data:b,bytesCount:Bn(b)})}else f&&t.write(t.isEmpty?f:`
${f}`),t.finish(g=>{p(fr(g))})}return{flushController:n,add:l,upsert:l,stop:o.unsubscribe}}function fr(t){let e;return typeof t.output=="string"?e=t.output:e=new Blob([t.output],{type:"text/plain"}),{data:e,bytesCount:t.outputBytesCount,encoding:t.encoding}}function rc({messagesLimit:t,bytesLimit:e,durationLimit:n,pageExitObservable:r,sessionExpireObservable:s}){const o=r.subscribe(p=>u(p.reason)),i=s.subscribe(()=>u("session_expire")),a=new C(()=>()=>{o.unsubscribe(),i.unsubscribe()});let c=0,l=0;function u(p){if(l===0)return;const g=l,b=c;l=0,c=0,m(),a.notify({reason:p,messagesCount:g,bytesCount:b})}let d;function f(){d===void 0&&(d=V(()=>{u("duration_limit")},n))}function m(){q(d),d=void 0}return{flushObservable:a,get messagesCount(){return l},notifyBeforeAddMessage(p){c+p>=e&&u("bytes_limit"),l+=1,c+=p,f()},notifyAfterAddMessage(p=0){c+=p,l>=t?u("messages_limit"):c>=e&&u("bytes_limit")},notifyAfterRemoveMessage(p){c-=p,l-=1,l===0&&m()}}}function Xn(t,e,n,r,s,o,i=nc){const a=l(t,e),c=n&&l(t,n);function l(u,{endpoint:d,encoder:f}){return i({encoder:f,request:Wa(d,u.batchBytesLimit,r),flushController:rc({messagesLimit:u.batchMessagesLimit,bytesLimit:u.batchBytesLimit,durationLimit:u.flushTimeout,pageExitObservable:s,sessionExpireObservable:o}),messageBytesLimit:u.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(u,d=!0){a.add(u),c&&d&&c.add(n.transformMessage?n.transformMessage(u):u)},upsert:(u,d)=>{a.upsert(u,d),c&&c.upsert(n.transformMessage?n.transformMessage(u):u,d)},stop:()=>{a.stop(),c&&c.stop()}}}function fe(){let t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write(n,r){const s=Bn(n);e+=s,t+=n,r&&r(s)},finish(n){n(this.finishSync())},finishSync(){const n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount(n){return n.length}}}class Ks{constructor(){this.callbacks={}}notify(e,n){const r=this.callbacks[e];r&&r.forEach(s=>s(n))}subscribe(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter(r=>n!==r)}}}}function ke(t,e,n){let r=0,s=!1;return{isLimitReached(){if(r===0&&V(()=>{r=0},H),r+=1,r<=e||s)return s=!1,!1;if(r===e+1){s=!0;try{n({message:`Reached max number of ${t}s by minute: ${e}`,source:j.AGENT,startClocks:z()})}finally{s=!1}}return!0}}}function Jn(t,e,n){return document.readyState===e||document.readyState==="complete"?(n(),{stop:I}):k(t,window,e==="complete"?"load":"DOMContentLoaded",n,{once:!0})}function sc(t,e){return new Promise(n=>{Jn(t,e,n)})}let bn;const Qn=new WeakMap;function qs(t){return bn||(bn=oc(t)),bn}function oc(t){return new C(e=>{const{stop:n}=nt(XMLHttpRequest.prototype,"open",ic),{stop:r}=nt(XMLHttpRequest.prototype,"send",o=>{ac(o,t,e)},{computeHandlingStack:!0}),{stop:s}=nt(XMLHttpRequest.prototype,"abort",cc);return()=>{n(),r(),s()}})}function ic({target:t,parameters:[e,n]}){Qn.set(t,{state:"open",method:String(e).toUpperCase(),url:Hn(String(n))})}function ac({target:t,handlingStack:e},n,r){const s=Qn.get(t);if(!s)return;const o=s;o.state="start",o.startClocks=z(),o.isAborted=!1,o.xhr=t,o.handlingStack=e;let i=!1;const{stop:a}=nt(t,"onreadystatechange",()=>{t.readyState===XMLHttpRequest.DONE&&c()}),c=()=>{if(l(),a(),i)return;i=!0;const u=s;u.state="complete",u.duration=F(o.startClocks.timeStamp,U()),u.status=t.status,r.notify(ce(u))},{stop:l}=k(n,t,"loadend",c);r.notify(o)}function cc({target:t}){const e=Qn.get(t);e&&(e.isAborted=!0)}let yn;function Xe(){return yn||(yn=uc()),yn}function uc(){return new C(t=>{if(!window.fetch)return;const{stop:e}=nt(window,"fetch",n=>lc(n,t),{computeHandlingStack:!0});return e})}function lc({parameters:t,onPostCall:e,handlingStack:n},r){const[s,o]=t;let i=o&&o.method;i===void 0&&s instanceof Request&&(i=s.method);const a=i!==void 0?String(i).toUpperCase():"GET",c=s instanceof Request?s.url:Hn(String(s)),l=z(),u={state:"start",init:o,input:s,method:a,startClocks:l,url:c,handlingStack:n};r.notify(u),t[0]=u.input,t[1]=u.init,e(d=>dc(r,d,u))}function dc(t,e,n){const r=n;function s(o){r.state="resolve",Object.assign(r,o),t.notify(r)}e.then(_(o=>{s({response:o,responseType:o.type,status:o.status,isAborted:!1})}),_(o=>{var i,a;s({status:0,isAborted:((a=(i=r.init)===null||i===void 0?void 0:i.signal)===null||a===void 0?void 0:a.aborted)||o instanceof DOMException&&o.code===DOMException.ABORT_ERR,error:o})}))}function fc(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){const n=window.requestIdleCallback(_(t),e);return()=>window.cancelIdleCallback(n)}return mc(t)}const pc=50;function mc(t){const e=Y(),n=V(()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,pc-(Y()-e))})},0);return()=>q(n)}const hc=$,_c=30;function gc(){const t=[];function e(r){let s;if(r.didTimeout){const o=performance.now();s=()=>_c-(performance.now()-o)}else s=r.timeRemaining.bind(r);for(;s()>0&&t.length;)t.shift()();t.length&&n()}function n(){fc(e,{timeout:hc})}return{push(r){t.push(r)===1&&n()}}}let vn={};function Ys(t){const e=t.map(n=>(vn[n]||(vn[n]=bc(n)),vn[n]));return Jr(...e)}function bc(t){return new C(e=>{const n=tt[t];return tt[t]=(...r)=>{n.apply(console,r);const s=jt("console error");Rt(()=>{e.notify(yc(r,t,s))})},()=>{tt[t]=n}})}function yc(t,e,n){const r=t.map(o=>vc(o)).join(" ");let s;if(e===O.error){const o=t.find(lt);s={stack:o?Ot(ot(o)):void 0,fingerprint:bs(o),causes:o?vs(o,"console"):void 0,startClocks:z(),message:r,source:j.CONSOLE,handling:"handled",handlingStack:n,context:ys(o)}}return{api:e,message:r,error:s,handlingStack:n}}function vc(t){return typeof t=="string"?x(t):lt(t)?_s(ot(t)):kt(x(t),void 0,2)}function Sc(t){const e=Lt(t)==="object";return e||T.error("Unsupported context:",t),e}function Sn(t,e,n){const r={...t};for(const[s,{required:o,type:i}]of Object.entries(e))i==="string"&&s in r&&(r[s]=String(r[s])),o&&!(s in t)&&T.warn(`The property ${s} of ${n} is required; context will not be sent to the intake.`);return r}function ht(t="",{customerDataTracker:e,propertiesConfig:n={}}={}){let r={};const s=new C,o={getContext:()=>Ye(r),setContext:i=>{Sc(i)?(r=x(Sn(i,n,t)),e==null||e.updateCustomerData(r)):o.clearContext(),s.notify()},setContextProperty:(i,a)=>{r=x(Sn({...r,[i]:a},n,t)),e==null||e.updateCustomerData(r),s.notify()},removeContextProperty:i=>{delete r[i],e==null||e.updateCustomerData(r),Sn(r,n,t),s.notify()},clearContext:()=>{r={},e==null||e.resetCustomerData(),s.notify()},changeObservable:s};return o}const Ec="_dd_c",wc=[];function Gt(t,e,n,r){const s=Tc(n,r);wc.push(k(t,window,"storage",({key:l})=>{s===l&&i()})),e.changeObservable.subscribe(a);const o=G(c(),e.getContext());et(o)||e.setContext(o);function i(){e.setContext(c())}function a(){localStorage.setItem(s,JSON.stringify(e.getContext()))}function c(){const l=localStorage.getItem(s);return l?JSON.parse(l):{}}}function Tc(t,e){return`${Ec}_${t}_${e}`}const Cc=3*ct,Ac=16*ct,Ic=200;function Ws(t=2){const e=new Map;let n=!1;function r(s=0){if(n||t===0)return;const o=t===2?Cc:Ac;let i=s;e.forEach(a=>{i+=a.getBytesCount()}),i>o&&(Rc(o),n=!0)}return{createDetachedTracker:()=>{const s=pr(()=>r(s.getBytesCount()));return s},getOrCreateTracker:s=>(e.has(s)||e.set(s,pr(r)),e.get(s)),setCompressionStatus:s=>{t===0&&(t=s,r())},getCompressionStatus:()=>t,stop:()=>{e.forEach(s=>s.stop()),e.clear()}}}function pr(t){let e=0;const{throttled:n,cancel:r}=_e(o=>{e=Bn(kt(o)),t()},Ic),s=()=>{r(),e=0};return{updateCustomerData:o=>{et(o)?s():n(o)},resetCustomerData:s,getBytesCount:()=>e,stop:()=>{r()}}}function Rc(t){T.warn(`Customer data exceeds the recommended ${t/ct}KiB threshold. ${Ge} ${Gr}/#customer-data-exceeds-the-recommended-threshold-warning`)}function Xs(t,e,n){const r=t.getReader(),s=[];let o=0;i();function i(){r.read().then(_(c=>{if(c.done){a();return}n.collectStreamBody&&s.push(c.value),o+=c.value.length,o>n.bytesLimit?a():i()}),_(c=>e(c)))}function a(){r.cancel().catch(I);let c,l;if(n.collectStreamBody){let u;if(s.length===1)u=s[0];else{u=new Uint8Array(o);let d=0;s.forEach(f=>{u.set(f,d),d+=f.length})}c=u.slice(0,n.bytesLimit),l=u.length>n.bytesLimit}e(void 0,c,l)}}const xc="datadog-synthetics-public-id",kc="datadog-synthetics-result-id",Oc="datadog-synthetics-injects-rum";function Je(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||pt(Oc))}function Js(){const t=window._DATADOG_SYNTHETICS_PUBLIC_ID||pt(xc);return typeof t=="string"?t:void 0}function Qs(){const t=window._DATADOG_SYNTHETICS_RESULT_ID||pt(kc);return typeof t=="string"?t:void 0}function Zn(t){const e=Lt(t);return e==="string"||e==="function"||t instanceof RegExp}function Zs(t,e,n=!1){return t.some(r=>{try{if(typeof r=="function")return r(e);if(r instanceof RegExp)return r.test(e);if(typeof r=="string")return n?e.startsWith(r):r===e}catch(s){T.error(s)}return!1})}function ze(t,e,n){const r=n.getHandler(),s=Array.isArray(r)?r:[r];return mr[t]>=mr[n.getLevel()]&&s.includes(e)}const w={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},mr={[w.ok]:0,[w.debug]:1,[w.info]:2,[w.notice]:4,[w.warn]:5,[w.error]:6,[w.critical]:7,[w.alert]:8,[w.emerg]:9};function Qe(t,{includeMessage:e=!1}={}){return{stack:t.stack,kind:t.type,message:e?t.message:void 0,causes:t.causes,fingerprint:t.fingerprint,handling:t.handling}}var Lc=function(t,e,n,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};const pe={console:"console",http:"http",silent:"silent"},Nc=Object.keys(w);class X{constructor(e,n,r,s=pe.http,o=w.debug,i={}){this.handleLogStrategy=e,this.handlerType=s,this.level=o,this.contextManager=ht("logger",{customerDataTracker:n}),this.contextManager.setContext(i),r&&this.contextManager.setContextProperty("logger",{name:r})}logImplementation(e,n,r=w.info,s,o){const i=x(n);let a;if(s!=null){const c=qn({stackTrace:lt(s)?ot(s):void 0,originalError:s,nonErrorPrefix:"Provided",source:j.LOGGER,handling:"handled",startClocks:z()});a=G({error:Qe(c,{includeMessage:!0})},i)}else a=i;this.handleLogStrategy({message:x(e),context:a,status:r},this,o)}log(e,n,r=w.info,s){let o;ze(r,pe.http,this)&&(o=jt("log")),this.logImplementation(e,n,r,s,o)}setContext(e){this.contextManager.setContext(e)}getContext(){return this.contextManager.getContext()}setContextProperty(e,n){this.contextManager.setContextProperty(e,n)}removeContextProperty(e){this.contextManager.removeContextProperty(e)}clearContext(){this.contextManager.clearContext()}setHandler(e){this.handlerType=e}getHandler(){return this.handlerType}setLevel(e){this.level=e}getLevel(){return this.level}}Lc([si],X.prototype,"logImplementation",null);X.prototype.ok=dt(w.ok);X.prototype.debug=dt(w.debug);X.prototype.info=dt(w.info);X.prototype.notice=dt(w.notice);X.prototype.warn=dt(w.warn);X.prototype.error=dt(w.error);X.prototype.critical=dt(w.critical);X.prototype.alert=dt(w.alert);X.prototype.emerg=dt(w.emerg);function dt(t){return function(e,n,r){let s;ze(t,pe.http,this)&&(s=jt("log")),this.logImplementation(e,n,t,r,s)}}function Dc(t,e,n){return{view:{referrer:document.referrer,url:window.location.href},context:t.getContext(),user:e.getContext(),account:n.getContext()}}const Mc=32*ct;function Pc(t){t.usePciIntake===!0&&t.site&&t.site!=="datadoghq.com"&&T.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");const e=fs(t),n=hr(t.forwardConsoleLogs,Fe(O),"Forward Console Logs"),r=hr(t.forwardReports,Fe(Kt),"Forward Reports");if(!(!e||!n||!r))return t.forwardErrorsToLogs&&!n.includes(O.error)&&n.push(O.error),{forwardErrorsToLogs:t.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:Mc,...e}}function hr(t,e,n){if(t===void 0)return[];if(!(t==="all"||Array.isArray(t)&&t.every(r=>e.includes(r)))){T.error(`${n} should be "all" or an array with allowed values "${e.join('", "')}"`);return}return t==="all"?e:xa(t)}function Uc(t){const e=ps(t);return{forward_errors_to_logs:t.forwardErrorsToLogs,forward_console_logs:t.forwardConsoleLogs,forward_reports:t.forwardReports,use_pci_intake:t.usePciIntake,...e}}function Fc(t,e,n){const r=Wn();let s,o;const i=e.observable.subscribe(a);function a(){if(!o||!s||!e.isGranted())return;i.unsubscribe();const c=n(s,o);r.drain(c)}return{init(c){if(!c){T.error("Missing configuration");return}if(ms(c.enableExperimentalFeatures),rt()&&(c=Bc(c)),s=c,o){qe("DD_LOGS",c);return}const l=Pc(c);l&&(o=l,Xe().subscribe(I),e.tryToInit(l.trackingConsent),a())},get initConfiguration(){return s},getInternalContext:I,handleLog(c,l,u,d=t(),f=U()){r.add(m=>m.handleLog(c,l,u,d,f))}}}function Bc(t){return{...t,clientToken:"empty"}}const En="logs";function Vc(t){const e=Ws(),n=ht("global context",{customerDataTracker:e.getOrCreateTracker(2)}),r=ht("user",{customerDataTracker:e.getOrCreateTracker(1),propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}}),s=ht("account",{customerDataTracker:e.getOrCreateTracker(1),propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}}),o=cs();function i(){return Dc(n,r,s)}let a=Fc(i,o,(u,d)=>{u.storeContextsAcrossPages&&(Gt(d,n,En,2),Gt(d,r,En,1),Gt(d,s,En,4));const f=t(u,d,i,o);return a=zc(u,f),f});const c={},l=new X((...u)=>a.handleLog(...u),e.createDetachedTracker());return Es({logger:l,init:_(u=>a.init(u)),setTrackingConsent:_(u=>{o.update(u),D({feature:"set-tracking-consent",tracking_consent:u})}),getGlobalContext:_(()=>n.getContext()),setGlobalContext:_(u=>n.setContext(u)),setGlobalContextProperty:_((u,d)=>n.setContextProperty(u,d)),removeGlobalContextProperty:_(u=>n.removeContextProperty(u)),clearGlobalContext:_(()=>n.clearContext()),createLogger:_((u,d={})=>(c[u]=new X((...f)=>a.handleLog(...f),e.createDetachedTracker(),x(u),d.handler,d.level,x(d.context)),c[u])),getLogger:_(u=>c[u]),getInitConfiguration:_(()=>Ye(a.initConfiguration)),getInternalContext:_(u=>a.getInternalContext(u)),setUser:_(r.setContext),getUser:_(r.getContext),setUserProperty:_(r.setContextProperty),removeUserProperty:_(r.removeContextProperty),clearUser:_(r.clearContext),setAccount:_(s.setContext),getAccount:_(s.getContext),setAccountProperty:_(s.setContextProperty),removeAccountProperty:_(s.removeContextProperty),clearAccount:_(s.clearContext)})}function zc(t,e){return{init:n=>{qe("DD_LOGS",n)},initConfiguration:t,...e}}const $c="logs";function Gc(t,e){const n=Ds(t,$c,r=>jc(t,r),e);return{findTrackedSession:(r,s={returnInactive:!1})=>{const o=n.findSession(r,s);return o&&o.trackingType==="1"?{id:o.id,anonymousId:o.anonymousId}:void 0},expireObservable:n.expireObservable}}function Hc(t){const n=to(t)==="1"?{}:void 0;return{findTrackedSession:()=>n,expireObservable:new C}}function to(t){return mt(t.sessionSampleRate)?"1":"0"}function jc(t,e){const n=Kc(e)?e:to(t);return{trackingType:n,isTracked:n==="1"}}function Kc(t){return t==="0"||t==="1"}let _r=!1;function Oe(t){const e=window;if(Je()){const r=n(e.DD_RUM_SYNTHETICS);return!r&&!_r&&(_r=!0,Nt("Logs sent before RUM is injected by the synthetics worker",{testId:Js(),resultId:Qs()})),r}return n(e.DD_RUM);function n(r){if(r&&r.getInternalContext)return r.getInternalContext(t)}}function qc(t,e,n,r,s){const o=Nc.concat(["custom"]),i={};o.forEach(a=>{i[a]=ke(a,e.eventRateLimiterThreshold,s)}),n.subscribe(0,({rawLogsEvent:a,messageContext:c=void 0,savedCommonContext:l=void 0,domainContext:u})=>{var d,f;const m=je(a.date),p=t.findTrackedSession(m);if(!t.findTrackedSession(m,{returnInactive:!0}))return;const b=l||r();let h;!et(b.account)&&b.account.id&&(h=b.account),p&&p.anonymousId&&!b.user.anonymous_id&&(b.user.anonymous_id=p.anonymousId);const y=G({service:e.service,session_id:p?p.id:void 0,session:p?{id:p.id}:void 0,usr:et(b.user)?void 0:b.user,account:h,view:b.view},b.context,Oe(m),a,c);((d=e.beforeSend)===null||d===void 0?void 0:d.call(e,y,u))===!1||y.origin!==j.AGENT&&((f=i[y.status])!==null&&f!==void 0?f:i.custom).isLimitReached()||n.notify(1,y)})}const Yc={[O.log]:w.info,[O.debug]:w.debug,[O.info]:w.info,[O.warn]:w.warn,[O.error]:w.error};function Wc(t,e){const n=Ys(t.forwardConsoleLogs).subscribe(r=>{var s;const o={rawLogsEvent:{date:U(),message:r.message,origin:j.CONSOLE,error:r.error&&Qe(r.error),status:Yc[r.api]},messageContext:(s=r.error)===null||s===void 0?void 0:s.context,domainContext:{handlingStack:r.handlingStack}};e.notify(0,o)});return{stop:()=>{n.unsubscribe()}}}function Xc(t,e){const n=Ts(t,t.forwardReports).subscribe(r=>{let s=r.message,o;const i=r.originalError.type==="deprecation"?w.warn:w.error;i===w.error?o=Qe(r):r.stack&&(s+=` Found in ${Sa(r.stack)}`),e.notify(0,{rawLogsEvent:{date:U(),message:s,origin:j.REPORT,error:o,status:i}})});return{stop:()=>{n.unsubscribe()}}}function Jc(t,e){if(!t.forwardErrorsToLogs)return{stop:I};const n=qs(t).subscribe(o=>{o.state==="complete"&&s("xhr",o)}),r=Xe().subscribe(o=>{o.state==="resolve"&&s("fetch",o)});function s(o,i){!ds(i.url)&&(eu(i)||Ms(i.status))&&("xhr"in i?Qc(i.xhr,t,a):i.response?tu(i.response,t,a):i.error&&Zc(i.error,t,a));function a(c){const l={isAborted:i.isAborted,handlingStack:i.handlingStack};e.notify(0,{rawLogsEvent:{message:`${nu(o)} error ${i.method} ${i.url}`,date:i.startClocks.timeStamp,error:{stack:c||"Failed to load",handling:void 0},http:{method:i.method,status_code:i.status,url:i.url},status:w.error,origin:j.NETWORK},domainContext:l})}}return{stop:()=>{n.unsubscribe(),r.unsubscribe()}}}function Qc(t,e,n){typeof t.response=="string"?n(tr(t.response,e)):n(t.response)}function Zc(t,e,n){n(tr(Ot(ot(t)),e))}function tu(t,e,n){const r=Ps(t);!r||!r.body?n():window.TextDecoder?ru(r.body,e.requestErrorResponseLengthLimit,(s,o)=>{n(s?`Unable to retrieve response: ${s}`:o)}):r.text().then(_(s=>n(tr(s,e))),_(s=>n(`Unable to retrieve response: ${s}`)))}function eu(t){return t.status===0&&t.responseType!=="opaque"}function tr(t,e){return t.length>e.requestErrorResponseLengthLimit?`${t.substring(0,e.requestErrorResponseLengthLimit)}...`:t}function nu(t){return t==="xhr"?"XHR":"Fetch"}function ru(t,e,n){Xs(t,(r,s,o)=>{if(r)n(r);else{let i=new TextDecoder().decode(s);o&&(i+="..."),n(void 0,i)}},{bytesLimit:e,collectStreamBody:!0})}function su(t,e){if(!t.forwardErrorsToLogs)return{stop:I};const n=new C,{stop:r}=Ss(n),s=n.subscribe(o=>{e.notify(0,{rawLogsEvent:{message:o.message,date:o.startClocks.timeStamp,error:Qe(o),origin:j.SOURCE,status:w.error},messageContext:o.context})});return{stop:()=>{r(),s.unsubscribe()}}}const ou=Ks;function iu(t){function e(n,r,s,o,i){const a=G(r.getContext(),n.context);if(ze(n.status,pe.console,r)&&cu(n,a),ze(n.status,pe.http,r)){const c={rawLogsEvent:{date:i||U(),message:n.message,status:n.status,origin:j.LOGGER},messageContext:a,savedCommonContext:o};s&&(c.domainContext={handlingStack:s}),t.notify(0,c)}}return{handleLog:e}}const au={[w.ok]:O.debug,[w.debug]:O.debug,[w.info]:O.info,[w.notice]:O.info,[w.warn]:O.warn,[w.error]:O.error,[w.critical]:O.error,[w.alert]:O.error,[w.emerg]:O.error};function cu({status:t,message:e},n){wt[au[t]].call(tt,e,n)}function uu(t,e,n,r,s){const o=Xn(t,{endpoint:t.logsEndpointBuilder,encoder:fe()},t.replica&&{endpoint:t.replica.logsEndpointBuilder,encoder:fe()},n,r,s.expireObservable);return e.subscribe(1,i=>{o.add(i)}),o}function lu(t){const e=Dt();t.subscribe(1,n=>{e.send("log",n)})}function du(t){return{get:e=>{const n=t.findTrackedSession(e);if(n)return{session_id:n.id}}}}function fu(t){return e=>{t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,origin:j.AGENT,status:w.error}}),Nt("Error reported to customer",{"error.message":e.message})}}function pu(t,e,n,r,s){const o=ks("browser-logs-sdk",e);o.setContextProvider(()=>{var a,c,l,u,d,f;return{application:{id:(a=Oe())===null||a===void 0?void 0:a.application_id},session:{id:(c=s.findTrackedSession())===null||c===void 0?void 0:c.id},view:{id:(u=(l=Oe())===null||l===void 0?void 0:l.view)===null||u===void 0?void 0:u.id},action:{id:(f=(d=Oe())===null||d===void 0?void 0:d.user_action)===null||f===void 0?void 0:f.id}}});const i=[];if(rt()){const a=Dt(),c=o.observable.subscribe(l=>a.send("internal_telemetry",l));i.push(()=>c.unsubscribe())}else{const a=Xn(e,{endpoint:e.rumEndpointBuilder,encoder:fe()},e.replica&&{endpoint:e.replica.rumEndpointBuilder,encoder:fe()},n,r,s.expireObservable);i.push(()=>a.stop());const c=o.observable.subscribe(l=>a.add(l,Ls(e)));i.push(()=>c.unsubscribe())}return Os(),Ns(Uc(t)),{telemetry:o,stop:()=>{i.forEach(a=>a())}}}function mu(t,e,n,r){const s=new ou,o=[];s.subscribe(1,f=>Yn("logs",f));const i=fu(s),a=js(e),c=e.sessionStoreStrategyType&&!rt()&&!Je()?Gc(e,r):Hc(e),{stop:l}=pu(t,e,i,a,c);o.push(()=>l()),Jc(e,s),su(e,s),Wc(e,s),Xc(e,s);const{handleLog:u}=iu(s);if(qc(c,e,s,n,i),rt())lu(s);else{const{stop:f}=uu(e,s,i,a,c);o.push(()=>f())}const d=du(c);return{handleLog:u,getInternalContext:d.get,stop:()=>{o.forEach(f=>f())}}}const hu=Vc(mu);ws(ut(),"DD_LOGS",hu);function _u(t,e,n,r){return{context:t.getContext(),user:e.getContext(),account:n.getContext(),hasReplay:r.isRecording()?!0:void 0}}function gu(){return{vitalsByName:new Map,vitalsByReference:new WeakMap}}function bu(t,e,n){function r(o){return!e.wasInPageStateDuringPeriod("frozen",o.startClocks.relative,o.duration)}function s(o){r(o)&&t.notify(12,vu(o))}return{addDurationVital:s,startDurationVital:(o,i={})=>eo(n,o,i),stopDurationVital:(o,i={})=>{no(s,n,o,i)}}}function eo({vitalsByName:t,vitalsByReference:e},n,r={}){const s={name:n,startClocks:z(),context:r.context,description:r.description},o={__dd_vital_reference:!0};return t.set(n,s),e.set(o,s),o}function no(t,{vitalsByName:e,vitalsByReference:n},r,s={}){const o=typeof r=="string"?e.get(r):n.get(r);o&&(t(yu(o,o.startClocks,s,z())),typeof r=="string"?e.delete(r):n.delete(r))}function yu(t,e,n,r){var s;return{name:t.name,type:"duration",startClocks:e,duration:F(e.timeStamp,r.timeStamp),context:G(t.context,n.context),description:(s=n.description)!==null&&s!==void 0?s:t.description}}function vu(t,e){const n={date:t.startClocks.timeStamp,vital:{id:B(),type:t.type,name:t.name,duration:E(t.duration),description:t.description},type:"vital"};return n._dd={vital:{computed_value:!0}},{rawRumEvent:n,startTime:t.startClocks.relative,duration:t.duration,customerContext:t.context,domainContext:{}}}function ro(t,e,n){if(t)for(const r of t){const s=r[e];s&&s(n)}}function Su(){return oo(64)}function so(){return oo(63)}function oo(t){const e=crypto.getRandomValues(new Uint32Array(2));return t===63&&(e[e.length-1]>>>=1),{toString(n=10){let r=e[1],s=e[0],o="";do{const i=r%n*4294967296+s;r=Math.floor(r/n),s=Math.floor(i/n),o=(i%n).toString(n)+o}while(r||s);return o}}}function Pt(t){return t.toString(16).padStart(16,"0")}let Ce;function Eu(t,e){if(e===100)return!0;if(e===0)return!1;if(Ce&&t===Ce.sessionId)return Ce.decision;let n;return window.BigInt?n=wu(BigInt(`0x${t.split("-")[4]}`),e):n=mt(e),Ce={sessionId:t,decision:n},n}function wu(t,e){const n=BigInt("1111111111111111111"),r=BigInt("0x10000000000000000"),s=t*n%r;return Number(s)<=e/100*Number(r)}function Tu(t){const e=t;return Lt(e)==="object"&&Zn(e.match)&&Array.isArray(e.propagatorTypes)}function Cu(t){t.status===0&&!t.isAborted&&(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}function Au(t,e){return{clearTracingIfNeeded:Cu,traceFetch:n=>gr(t,n,e,r=>{var s;if(n.input instanceof Request&&!(!((s=n.init)===null||s===void 0)&&s.headers))n.input=new Request(n.input),Object.keys(r).forEach(o=>{n.input.headers.append(o,r[o])});else{n.init=ce(n.init);const o=[];n.init.headers instanceof Headers?n.init.headers.forEach((i,a)=>{o.push([a,i])}):Array.isArray(n.init.headers)?n.init.headers.forEach(i=>{o.push(i)}):n.init.headers&&Object.keys(n.init.headers).forEach(i=>{o.push([i,n.init.headers[i]])}),n.init.headers=o.concat(zn(r))}}),traceXhr:(n,r)=>gr(t,n,e,s=>{Object.keys(s).forEach(o=>{r.setRequestHeader(o,s[o])})})}}function gr(t,e,n,r){const s=n.findTrackedSession();if(!s)return;const o=t.allowedTracingUrls.find(c=>Zs([c.match],e.url,!0));if(!o)return;const i=Eu(s.id,t.traceSampleRate);(i||t.traceContextInjection===Dn.ALL)&&(e.traceSampled=i,e.traceId=Su(),e.spanId=so(),r(Iu(e.traceId,e.spanId,e.traceSampled,o.propagatorTypes)))}function Iu(t,e,n,r){const s={};return r.forEach(o=>{switch(o){case"datadog":{Object.assign(s,{"x-datadog-origin":"rum","x-datadog-parent-id":e.toString(),"x-datadog-sampling-priority":n?"1":"0","x-datadog-trace-id":t.toString()});break}case"tracecontext":{Object.assign(s,{traceparent:`00-0000000000000000${Pt(t)}-${Pt(e)}-0${n?"1":"0"}`,tracestate:`dd=s:${n?"1":"0"};o:rum`});break}case"b3":{Object.assign(s,{b3:`${Pt(t)}-${Pt(e)}-${n?"1":"0"}`});break}case"b3multi":{Object.assign(s,{"X-B3-TraceId":Pt(t),"X-B3-SpanId":Pt(e),"X-B3-Sampled":n?"1":"0"});break}}}),s}const io=["tracecontext","datadog"];function Ru(t){var e,n,r,s,o,i;if(t.trackFeatureFlagsForEvents!==void 0&&!Array.isArray(t.trackFeatureFlagsForEvents)&&T.warn("trackFeatureFlagsForEvents should be an array"),!t.applicationId){T.error("Application ID is not configured, no RUM data will be collected.");return}if(!Vt(t.sessionReplaySampleRate,"Session Replay")||!Vt(t.traceSampleRate,"Trace"))return;if(t.excludedActivityUrls!==void 0&&!Array.isArray(t.excludedActivityUrls)){T.error("Excluded Activity Urls should be an array");return}const a=xu(t);if(!a)return;const c=fs(t);if(!c)return;const l=(e=t.sessionReplaySampleRate)!==null&&e!==void 0?e:0;return{applicationId:t.applicationId,version:t.version||void 0,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:l,startSessionReplayRecordingManually:t.startSessionReplayRecordingManually!==void 0?!!t.startSessionReplayRecordingManually:l===0,traceSampleRate:(n=t.traceSampleRate)!==null&&n!==void 0?n:100,rulePsr:me(t.traceSampleRate)?t.traceSampleRate/100:void 0,allowedTracingUrls:a,excludedActivityUrls:(r=t.excludedActivityUrls)!==null&&r!==void 0?r:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!!(!((s=t.trackUserInteractions)!==null&&s!==void 0)||s),trackViewsManually:!!t.trackViewsManually,trackResources:!!(!((o=t.trackResources)!==null&&o!==void 0)||o),trackLongTasks:!!(!((i=t.trackLongTasks)!==null&&i!==void 0)||i),subdomain:t.subdomain,defaultPrivacyLevel:Me(ie,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:ie.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:Me(Dn,t.traceContextInjection)?t.traceContextInjection:Dn.SAMPLED,plugins:t.plugins||[],trackFeatureFlagsForEvents:t.trackFeatureFlagsForEvents||[],...c}}function xu(t){if(t.allowedTracingUrls===void 0)return[];if(!Array.isArray(t.allowedTracingUrls)){T.error("Allowed Tracing URLs should be an array");return}if(t.allowedTracingUrls.length!==0&&t.service===void 0){T.error("Service needs to be configured when tracing is enabled");return}const e=[];return t.allowedTracingUrls.forEach(n=>{Zn(n)?e.push({match:n,propagatorTypes:io}):Tu(n)?e.push(n):T.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),e}function ku(t){const e=new Set;return Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0&&t.allowedTracingUrls.forEach(n=>{Zn(n)?io.forEach(r=>e.add(r)):Lt(n)==="object"&&Array.isArray(n.propagatorTypes)&&n.propagatorTypes.forEach(r=>e.add(r))}),Array.from(e)}function Ou(t){var e;const n=ps(t);return{session_replay_sample_rate:t.sessionReplaySampleRate,start_session_replay_recording_manually:t.startSessionReplayRecordingManually,trace_sample_rate:t.traceSampleRate,trace_context_injection:t.traceContextInjection,action_name_attribute:t.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0,selected_tracing_propagators:ku(t),default_privacy_level:t.defaultPrivacyLevel,enable_privacy_for_action_name:t.enablePrivacyForActionName,use_excluded_activity_urls:Array.isArray(t.excludedActivityUrls)&&t.excludedActivityUrls.length>0,use_worker_url:!!t.workerUrl,compress_intake_requests:t.compressIntakeRequests,track_views_manually:t.trackViewsManually,track_user_interactions:t.trackUserInteractions,track_resources:t.trackResources,track_long_task:t.trackLongTasks,plugins:(e=t.plugins)===null||e===void 0?void 0:e.map(r=>{var s;return{name:r.name,...(s=r.getConfigurationTelemetry)===null||s===void 0?void 0:s.call(r)}}),track_feature_flags_for_events:t.trackFeatureFlagsForEvents,...n}}const Lu="v1";function Nu(t,e){Mu(t,n=>{e(Du(t,n))})}function Du(t,e){return{...t,...e}}function Mu(t,e){const n=new XMLHttpRequest;k(t,n,"load",function(){if(n.status===200){const r=JSON.parse(n.responseText);e(r.rum)}else br()}),k(t,n,"error",function(){br()}),n.open("GET",Pu(t)),n.send()}function Pu(t){return`https://sdk-configuration.${ls("rum",t)}/${Lu}/${encodeURIComponent(t.remoteConfigurationId)}.json`}function br(){T.error("Error fetching the remote configuration.")}function Uu({ignoreInitIfSyntheticsWillInjectRum:t,startDeflateWorker:e},n,r,s,o){const i=Wn();let a,c,l,u;const d=r.observable.subscribe(m),f={};function m(){if(!l||!u||!r.isGranted())return;d.unsubscribe();let h;if(u.trackViewsManually){if(!a)return;i.remove(a.callback),h=a.options}const y=o(u,c,h);i.drain(y)}function p(h){const y=rt();if(y&&(h=Fu(h)),l=h,Ns(Ou(h)),u){qe("DD_RUM",h);return}const S=Ru(h);if(S){if(!y&&!S.sessionStoreStrategyType){T.warn("No storage available for session. We will not send any data.");return}S.compressIntakeRequests&&!y&&e&&(c=e(S,"Datadog RUM",I),!c)||(u=S,Xe().subscribe(I),r.tryToInit(S.trackingConsent),m())}}const g=h=>{i.add(y=>y.addDurationVital(h))};return{init(h,y){if(!h){T.error("Missing configuration");return}ms(h.enableExperimentalFeatures),l=h,!(t&&Je())&&(ro(h.plugins,"onInit",{initConfiguration:h,publicApi:y}),h.remoteConfigurationId?Nu(h,p):p(h))},get initConfiguration(){return l},getInternalContext:I,stopSession:I,addTiming(h,y=U()){i.add(S=>S.addTiming(h,y))},startView(h,y=z()){const S=M=>{M.startView(h,y)};i.add(S),a||(a={options:h,callback:S},m())},setViewName(h){i.add(y=>y.setViewName(h))},setViewContext(h){i.add(y=>y.setViewContext(h))},setViewContextProperty(h,y){i.add(S=>S.setViewContextProperty(h,y))},getViewContext:()=>f,addAction(h,y=n()){i.add(S=>S.addAction(h,y))},addError(h,y=n()){i.add(S=>S.addError(h,y))},addFeatureFlagEvaluation(h,y){i.add(S=>S.addFeatureFlagEvaluation(h,y))},startDurationVital(h,y){return eo(s,h,y)},stopDurationVital(h,y){no(g,s,h,y)},addDurationVital:g}}function Fu(t){var e,n;return{...t,applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100,defaultPrivacyLevel:(e=t.defaultPrivacyLevel)!==null&&e!==void 0?e:(n=Dt())===null||n===void 0?void 0:n.getPrivacyLevel()}}const wn="rum";function Bu(t,e,n={}){const r=Ws(0),s=ht("global context",{customerDataTracker:r.getOrCreateTracker(2)}),o=ht("user",{customerDataTracker:r.getOrCreateTracker(1),propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}}),i=ht("account",{customerDataTracker:r.getOrCreateTracker(1),propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}}),a=cs(),c=gu();function l(){return _u(s,o,i,e)}let u=Uu(n,l,a,c,(m,p,g)=>{m.storeContextsAcrossPages&&(Gt(m,s,wn,2),Gt(m,o,wn,1),Gt(m,i,wn,4)),r.setCompressionStatus(p?1:2);const b=t(m,e,r,l,g,p&&n.createDeflateEncoder?h=>n.createDeflateEncoder(m,p,h):fe,a,c);return e.onRumStart(b.lifeCycle,m,b.session,b.viewHistory,p),u=Vu(u,b),ro(m.plugins,"onRumStart",{strategy:u}),b});const d=_(m=>{const p=typeof m=="object"?m:{name:m};p.context&&r.getOrCreateTracker(3).updateCustomerData(p.context),u.startView(p),D({feature:"start-view"})}),f=Es({init:_(m=>{u.init(m,f)}),setTrackingConsent:_(m=>{a.update(m),D({feature:"set-tracking-consent",tracking_consent:m})}),setViewName:_(m=>{u.setViewName(m),D({feature:"set-view-name"})}),setViewContext:_(m=>{u.setViewContext(m),D({feature:"set-view-context"})}),setViewContextProperty:_((m,p)=>{u.setViewContextProperty(m,p),D({feature:"set-view-context-property"})}),getViewContext:_(()=>(D({feature:"set-view-context-property"}),u.getViewContext())),setGlobalContext:_(m=>{s.setContext(m),D({feature:"set-global-context"})}),getGlobalContext:_(()=>s.getContext()),setGlobalContextProperty:_((m,p)=>{s.setContextProperty(m,p),D({feature:"set-global-context"})}),removeGlobalContextProperty:_(m=>s.removeContextProperty(m)),clearGlobalContext:_(()=>s.clearContext()),getInternalContext:_(m=>u.getInternalContext(m)),getInitConfiguration:_(()=>Ye(u.initConfiguration)),addAction:(m,p)=>{const g=jt("action");Rt(()=>{u.addAction({name:x(m),context:x(p),startClocks:z(),type:"custom",handlingStack:g}),D({feature:"add-action"})})},addError:(m,p)=>{const g=jt("error");Rt(()=>{u.addError({error:m,handlingStack:g,context:x(p),startClocks:z()}),D({feature:"add-error"})})},addTiming:_((m,p)=>{u.addTiming(x(m),p)}),setUser:_(m=>{o.setContext(m),D({feature:"set-user"})}),getUser:_(o.getContext),setUserProperty:_((m,p)=>{o.setContextProperty(m,p),D({feature:"set-user"})}),removeUserProperty:_(o.removeContextProperty),clearUser:_(o.clearContext),setAccount:_(i.setContext),getAccount:_(i.getContext),setAccountProperty:_(i.setContextProperty),removeAccountProperty:_(i.removeContextProperty),clearAccount:_(i.clearContext),startView:d,stopSession:_(()=>{u.stopSession(),D({feature:"stop-session"})}),addFeatureFlagEvaluation:_((m,p)=>{u.addFeatureFlagEvaluation(x(m),x(p)),D({feature:"add-feature-flag-evaluation"})}),getSessionReplayLink:_(()=>e.getSessionReplayLink()),startSessionReplayRecording:_(m=>{e.start(m),D({feature:"start-session-replay-recording",force:m&&m.force})}),stopSessionReplayRecording:_(()=>e.stop()),addDurationVital:_((m,p)=>{D({feature:"add-duration-vital"}),u.addDurationVital({name:x(m),type:"duration",startClocks:Yo(p.startTime),duration:p.duration,context:x(p&&p.context),description:x(p&&p.description)})}),startDurationVital:_((m,p)=>(D({feature:"start-duration-vital"}),u.startDurationVital(x(m),{context:x(p&&p.context),description:x(p&&p.description)}))),stopDurationVital:_((m,p)=>{D({feature:"stop-duration-vital"}),u.stopDurationVital(typeof m=="string"?x(m):m,{context:x(p&&p.context),description:x(p&&p.description)})})});return f}function Vu(t,e){return{init:n=>{qe("DD_RUM",n)},initConfiguration:t.initConfiguration,...e}}function zu(){const t=$u();return new C(e=>{if(!t)return;const n=new t(_(()=>e.notify()));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>n.disconnect()})}function $u(){let t;const e=window;if(e.Zone&&(t=_t(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){const n=new e.MutationObserver(I),r=_t(n,"originalInstance");t=r&&r.constructor}return t||(t=e.MutationObserver),t}function Gu(){const t=new C,{stop:e}=nt(window,"open",()=>t.notify());return{observable:t,stop:e}}function Hu(t,e,n){const r=Ye(t),s=n(r);return zn(e).forEach(([o,i])=>Un(t,r,o.split(/\.|(?=\[\])/),i)),s}function Un(t,e,n,r){const[s,...o]=n;if(s==="[]"){Array.isArray(t)&&Array.isArray(e)&&t.forEach((i,a)=>Un(i,e[a],o,r));return}if(!(!yr(t)||!yr(e))){if(o.length>0)return Un(t[s],e[s],o,r);ju(t,s,e[s],r)}}function ju(t,e,n,r){const s=Lt(n);s===r?t[e]=x(n):r==="object"&&(s==="undefined"||s==="null")&&(t[e]={})}function yr(t){return Lt(t)==="object"}const Ut={"view.name":"string","view.url":"string","view.referrer":"string"},Ft={context:"object"},Tn={service:"string",version:"string"};let ao;function Ku(t,e,n,r,s,o,i,a,c){ao={view:{"view.performance.lcp.resource_url":"string",...Ft,...Ut},error:{"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string",...Ft,...Ut,...Tn},resource:{"resource.url":"string",...lr(de.WRITABLE_RESOURCE_GRAPHQL)?{"resource.graphql":"object"}:{},...Ft,...Ut,...Tn},action:{"action.target.name":"string",...Ft,...Ut,...Tn},long_task:{"long_task.scripts[].source_url":"string","long_task.scripts[].invoker":"string",...Ft,...Ut},vital:{...Ft,...Ut}};const l={error:ke("error",t.eventRateLimiterThreshold,c),action:ke("action",t.eventRateLimiterThreshold,c),vital:ke("vital",t.eventRateLimiterThreshold,c)};e.subscribe(12,({startTime:u,duration:d,rawRumEvent:f,domainContext:m,savedCommonContext:p,customerContext:g})=>{const b=s.findView(u),h=o.findUrl(u),y=r.findTrackedSession(u);if(y&&b&&!h&&lr(de.MISSING_URL_CONTEXT_TELEMETRY)&&Nt("Missing URL entry",{debug:{eventType:f.type,startTime:u,urlEntries:o.getAllEntries(),urlDeletedEntries:o.getDeletedEntries(),viewEntries:s.getAllEntries(),viewDeletedEntries:s.getDeletedEntries()}}),y&&b&&h){const S=p||a(),M={_dd:{format_version:2,drift:Xo(),configuration:{session_sample_rate:De(t.sessionSampleRate,3),session_replay_sample_rate:De(t.sessionReplaySampleRate,3)},browser_sdk_version:rt()?"6.5.1":void 0},application:{id:t.applicationId},date:U(),source:"browser",session:{id:y.id,type:"user"},display:i.get(),connectivity:Is(),context:S.context},N=G(M,n.triggerHook(0,{eventType:f.type,startTime:u,duration:d}),{context:g},f);"has_replay"in N.session||(N.session.has_replay=S.hasReplay),N.type==="view"&&(N.session.sampled_for_replay=y.sessionReplay===1),y.anonymousId&&!S.user.anonymous_id&&t.trackAnonymousUser&&(S.user.anonymous_id=y.anonymousId),et(S.user)||(N.usr=S.user),!et(S.account)&&S.account.id&&(N.account=S.account),qu(N,t.beforeSend,m,l)&&(et(N.context)&&delete N.context,e.notify(13,N))}})}function qu(t,e,n,r){var s;if(e){const i=Hu(t,ao[t.type],a=>e(a,n));if(i===!1&&t.type!=="view")return!1;i===!1&&T.warn("Can't dismiss view events using beforeSend!")}return!((s=r[t.type])===null||s===void 0?void 0:s.isLimitReached())}function Yu(t,e,n,r,s){return{get:o=>{const i=n.findView(o),a=s.findUrl(o),c=e.findTrackedSession(o);if(c&&i&&a){const l=r.findActionId(o);return{application_id:t,session_id:c.id,user_action:l?{id:l}:void 0,view:{id:i.id,name:i.name,referrer:a.referrer,url:a.url}}}}}}const Wu=Ks,Xu=xt;function Ju(t){const e=Jt({expireDelay:Xu});t.subscribe(1,r=>{e.add(n(r),r.startClocks.relative)}),t.subscribe(6,({endClocks:r})=>{e.closeActive(r.relative)}),t.subscribe(3,r=>{const s=e.find(r.startClocks.relative);s&&r.name&&(s.name=r.name),s&&r.context&&(s.context=r.context)}),t.subscribe(10,()=>{e.reset()});function n(r){return{service:r.service,version:r.version,context:r.context,id:r.id,name:r.name,startClocks:r.startClocks}}return{findView:r=>e.find(r),getAllEntries:()=>e.getAllEntries(),getDeletedEntries:()=>e.getDeletedEntries(),stop:()=>{e.stop()}}}const co="initial_document",Qu=[["document",t=>co===t],["xhr",t=>t==="xmlhttprequest"],["fetch",t=>t==="fetch"],["beacon",t=>t==="beacon"],["css",(t,e)=>/\.css$/i.test(e)],["js",(t,e)=>/\.js$/i.test(e)],["image",(t,e)=>["image","img","icon"].includes(t)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)!==null],["font",(t,e)=>/\.(woff|eot|woff2|ttf)$/i.exec(e)!==null],["media",(t,e)=>["audio","video"].includes(t)||/\.(mp3|mp4)$/i.exec(e)!==null]];function Zu(t){const e=t.name;if(!Di(e))return Nt(`Failed to construct URL for "${t.name}"`),"other";const n=Mi(e);for(const[r,s]of Qu)if(s(t.initiatorType,n))return r;return"other"}function vr(...t){for(let e=1;e<t.length;e+=1)if(t[e-1]>t[e])return!1;return!0}function tl(t){return t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch"}function uo(t){const{duration:e,startTime:n,responseEnd:r}=t;return e===0&&n<r?F(n,r):e}function el(t){if(!fo(t))return;const{startTime:e,fetchStart:n,workerStart:r,redirectStart:s,redirectEnd:o,domainLookupStart:i,domainLookupEnd:a,connectStart:c,secureConnectionStart:l,connectEnd:u,requestStart:d,responseStart:f,responseEnd:m}=t,p={download:St(e,f,m),first_byte:St(e,d,f)};return 0<r&&r<n&&(p.worker=St(e,r,n)),n<u&&(p.connect=St(e,c,u),c<=l&&l<=u&&(p.ssl=St(e,l,u))),n<a&&(p.dns=St(e,i,a)),e<o&&(p.redirect=St(e,s,o)),p}function lo(t){return t.duration>=0}function fo(t){const e=vr(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=nl(t)?vr(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart):!0;return e&&n}function nl(t){return t.redirectEnd>t.startTime}function St(t,e,n){if(t<=e&&e<=n)return{duration:E(F(e,n)),start:E(F(t,e))}}function po(t){return t.nextHopProtocol===""?void 0:t.nextHopProtocol}function mo(t){return t.deliveryType===""?"other":t.deliveryType}function rl(t){if(t.startTime<t.responseStart){const{encodedBodySize:e,decodedBodySize:n,transferSize:r}=t;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:r}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function er(t){return t&&!ds(t)}const sl=/data:(.+)?(;base64)?,/g,Sr=24e3;function ol(t){return t.length<=Sr?!1:t.substring(0,5)==="data:"?(t=t.substring(0,Sr),!0):!1}function il(t){return`${t.match(sl)[0]}[...]`}let Er=1;function al(t,e,n){const r=Au(e,n);cl(t,e,r),ul(t,r)}function cl(t,e,n){const r=qs(e).subscribe(s=>{const o=s;if(er(o.url))switch(o.state){case"start":n.traceXhr(o,o.xhr),o.requestIndex=ho(),t.notify(7,{requestIndex:o.requestIndex,url:o.url});break;case"complete":n.clearTracingIfNeeded(o),t.notify(8,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr,isAborted:o.isAborted,handlingStack:o.handlingStack});break}});return{stop:()=>r.unsubscribe()}}function ul(t,e){const n=Xe().subscribe(r=>{const s=r;if(er(s.url))switch(s.state){case"start":e.traceFetch(s),s.requestIndex=ho(),t.notify(7,{requestIndex:s.requestIndex,url:s.url});break;case"resolve":ll(s,o=>{e.clearTracingIfNeeded(s),t.notify(8,{duration:o,method:s.method,requestIndex:s.requestIndex,responseType:s.responseType,spanId:s.spanId,startClocks:s.startClocks,status:s.status,traceId:s.traceId,traceSampled:s.traceSampled,type:"fetch",url:s.url,response:s.response,init:s.init,input:s.input,isAborted:s.isAborted,handlingStack:s.handlingStack})});break}});return{stop:()=>n.unsubscribe()}}function ho(){const t=Er;return Er+=1,t}function ll(t,e){const n=t.response&&Ps(t.response);!n||!n.body?e(F(t.startClocks.timeStamp,U())):Xs(n.body,()=>{e(F(t.startClocks.timeStamp,U()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1})}function _o(t){return me(t)&&t<0?void 0:t}function go({lifeCycle:t,isChildEvent:e,onChange:n=I}){const r={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},s=t.subscribe(13,o=>{var i;if(!(o.type==="view"||o.type==="vital"||!e(o)))switch(o.type){case"error":r.errorCount+=1,n();break;case"action":r.actionCount+=1,o.action.frustration&&(r.frustrationCount+=o.action.frustration.type.length),n();break;case"long_task":r.longTaskCount+=1,n();break;case"resource":!((i=o._dd)===null||i===void 0)&&i.discarded||(r.resourceCount+=1,n());break}});return{stop:()=>{s.unsubscribe()},eventCounts:r}}function dl(t,e){const n=Y();let r=!1;const{stop:s}=gt(t,window,["click","mousedown","keydown","touchstart","pointerdown"],a=>{if(!a.cancelable)return;const c={entryType:"first-input",processingStart:W(),processingEnd:W(),startTime:a.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:()=>({})};a.type==="pointerdown"?o(t,c):i(c)},{passive:!0,capture:!0});return{stop:s};function o(a,c){gt(a,window,["pointerup","pointercancel"],l=>{l.type==="pointerup"&&i(c)},{once:!0})}function i(a){if(!r){r=!0,s();const c=a.processingStart-a.startTime;c>=0&&c<Y()-n&&e(a)}}}var R;(function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource"})(R||(R={}));function st(t,e){return new C(n=>{if(!window.PerformanceObserver)return;const r=c=>{const l=ml(c);l.length>0&&n.notify(l)};let s,o=!0;const i=new PerformanceObserver(_(c=>{o?s=V(()=>r(c.getEntries())):r(c.getEntries())}));try{i.observe(e)}catch{if([R.RESOURCE,R.NAVIGATION,R.LONG_TASK,R.PAINT].includes(e.type)){e.buffered&&(s=V(()=>r(performance.getEntriesByType(e.type))));try{i.observe({entryTypes:[e.type]})}catch{return}}}o=!1,fl(t);let a;return!Ze(R.FIRST_INPUT)&&e.type===R.FIRST_INPUT&&({stop:a}=dl(t,c=>{r([c])})),()=>{i.disconnect(),a&&a(),q(s)}})}let ne;function fl(t){return!ne&&pl()&&"addEventListener"in performance&&(ne=k(t,performance,"resourcetimingbufferfull",()=>{performance.clearResourceTimings()})),()=>{ne==null||ne.stop()}}function pl(){return window.performance!==void 0&&"getEntries"in performance}function Ze(t){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(t)}function ml(t){return t.filter(e=>!hl(e))}function hl(t){return t.entryType===R.RESOURCE&&(!er(t.name)||!lo(t))}const bo=100,_l=100;function nr(t,e,n,r,s,o){const i=bl(t,e,n,r);return gl(i,s,o)}function gl(t,e,n){let r,s=!1;const o=V(_(()=>l({hadActivity:!1})),bo),i=n!==void 0?V(_(()=>l({hadActivity:!0,end:U()})),n):void 0,a=t.subscribe(({isBusy:u})=>{q(o),q(r);const d=U();u||(r=V(_(()=>l({hadActivity:!0,end:d})),_l))}),c=()=>{s=!0,q(o),q(r),q(i),a.unsubscribe()};function l(u){s||(c(),e(u))}return{stop:c}}function bl(t,e,n,r){return new C(s=>{const o=[];let i,a=0;return o.push(e.subscribe(c),n.subscribe(c),st(r,{type:R.RESOURCE}).subscribe(l=>{l.some(u=>!Cn(r,u.name))&&c()}),t.subscribe(7,l=>{Cn(r,l.url)||(i===void 0&&(i=l.requestIndex),a+=1,c())}),t.subscribe(8,l=>{Cn(r,l.url)||i===void 0||l.requestIndex<i||(a-=1,c())})),()=>{o.forEach(l=>l.unsubscribe())};function c(){s.notify({isBusy:a>0})}})}function Cn(t,e){return Zs(t.excludedActivityUrls,e)}function yo(t){return t.nodeType===Node.TEXT_NODE}function yl(t){return t.nodeType===Node.COMMENT_NODE}function Qt(t){return t.nodeType===Node.ELEMENT_NODE}function vo(t){return Qt(t)&&!!t.shadowRoot}function vl(t){const e=t;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&Qt(e.host)}function Ip(t){return t.childNodes.length>0||vo(t)}function Rp(t,e){let n=t.firstChild;for(;n;)e(n),n=n.nextSibling;vo(t)&&e(t.shadowRoot)}function Sl(t){return vl(t)?t.host:t.parentNode}const A={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:ie.ALLOW,MASK:ie.MASK,MASK_USER_INPUT:ie.MASK_USER_INPUT},El="data-dd-privacy",xp="hidden",wl="dd-privacy-",An="***",kp="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",Tl={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},Cl="x";function So(t,e,n){if(n&&n.has(t))return n.get(t);const r=Sl(t),s=r?So(r,e,n):e,o=Il(t),i=Al(o,s);return n&&n.set(t,i),i}function Al(t,e){switch(e){case A.HIDDEN:case A.IGNORE:return e}switch(t){case A.ALLOW:case A.MASK:case A.MASK_USER_INPUT:case A.HIDDEN:case A.IGNORE:return t;default:return e}}function Il(t){if(Qt(t)){if(t.tagName==="BASE")return A.ALLOW;if(t.tagName==="INPUT"){const e=t;if(e.type==="password"||e.type==="email"||e.type==="tel"||e.type==="hidden")return A.MASK;const n=e.getAttribute("autocomplete");if(n&&(n.startsWith("cc-")||n.endsWith("-password")))return A.MASK}if(t.matches(zt(A.HIDDEN)))return A.HIDDEN;if(t.matches(zt(A.MASK)))return A.MASK;if(t.matches(zt(A.MASK_USER_INPUT)))return A.MASK_USER_INPUT;if(t.matches(zt(A.ALLOW)))return A.ALLOW;if(kl(t))return A.IGNORE}}function Rl(t,e){switch(e){case A.MASK:case A.HIDDEN:case A.IGNORE:return!0;case A.MASK_USER_INPUT:return yo(t)?wr(t.parentNode):wr(t);default:return!1}}function wr(t){if(!t||t.nodeType!==t.ELEMENT_NODE)return!1;const e=t;if(e.tagName==="INPUT")switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!Tl[e.tagName]}const xl=t=>t.replace(/\S/g,Cl);function Op(t,e,n){var r;const s=(r=t.parentElement)===null||r===void 0?void 0:r.tagName;let o=t.textContent||"";if(e&&!o.trim())return;const i=n;if(s==="SCRIPT")o=An;else if(i===A.HIDDEN)o=An;else if(Rl(t,i))if(s==="DATALIST"||s==="SELECT"||s==="OPTGROUP"){if(!o.trim())return}else s==="OPTION"?o=An:o=xl(o);return o}function kl(t){if(t.nodeName==="SCRIPT")return!0;if(t.nodeName==="LINK"){const n=e("rel");return/preload|prefetch/i.test(n)&&e("as")==="script"||n==="shortcut icon"||n==="icon"}if(t.nodeName==="META"){const n=e("name"),r=e("rel"),s=e("property");return/^msapplication-tile(image|color)$/.test(n)||n==="application-name"||r==="icon"||r==="apple-touch-icon"||r==="shortcut icon"||n==="keywords"||n==="description"||/^(og|twitter|fb):/.test(s)||/^(og|twitter):/.test(n)||n==="pinterest"||n==="robots"||n==="googlebot"||n==="bingbot"||t.hasAttribute("http-equiv")||n==="author"||n==="generator"||n==="framework"||n==="publisher"||n==="progid"||/^article:/.test(s)||/^product:/.test(s)||n==="google-site-verification"||n==="yandex-verification"||n==="csrf-token"||n==="p:domain_verify"||n==="verify-v1"||n==="verification"||n==="shopify-checkout-api-token"}function e(n){return(t.getAttribute(n)||"").toLowerCase()}return!1}function zt(t){return`[${El}="${t}"], .${wl}${t}`}const rr="data-dd-action-name",Ol="Masked Element";function Ll(t,{enablePrivacyForActionName:e,actionNameAttribute:n},r){const s=Tr(t,rr)||n&&Tr(t,n);return s?{name:s,nameSource:"custom_attribute"}:r===A.MASK?{name:Ol,nameSource:"mask_placeholder"}:Cr(t,n,Nl,e)||Cr(t,n,Dl,e)||{name:"",nameSource:"blank"}}function Tr(t,e){const n=t.closest(`[${e}]`);if(!n)return;const r=n.getAttribute(e);return wo(Eo(r.trim()))}const Nl=[(t,e)=>{if("labels"in t&&t.labels&&t.labels.length>0)return Le(t.labels[0],e)},t=>{if(t.nodeName==="INPUT"){const e=t,n=e.getAttribute("type");if(n==="button"||n==="submit"||n==="reset")return{name:e.value,nameSource:"text_content"}}},(t,e,n)=>{if(t.nodeName==="BUTTON"||t.nodeName==="LABEL"||t.getAttribute("role")==="button")return Le(t,e,n)},t=>re(t,"aria-label"),(t,e,n)=>{const r=t.getAttribute("aria-labelledby");if(r)return{name:r.split(/\s+/).map(s=>Pl(t,s)).filter(s=>!!s).map(s=>To(s,e,n)).join(" "),nameSource:"text_content"}},t=>re(t,"alt"),t=>re(t,"name"),t=>re(t,"title"),t=>re(t,"placeholder"),(t,e)=>{if("options"in t&&t.options.length>0)return Le(t.options[0],e)}],Dl=[(t,e,n)=>Le(t,e,n)],Ml=10;function Cr(t,e,n,r){let s=t,o=0;for(;o<=Ml&&s&&s.nodeName!=="BODY"&&s.nodeName!=="HTML"&&s.nodeName!=="HEAD";){for(const i of n){const a=i(s,e,r);if(a){const{name:c,nameSource:l}=a,u=c&&c.trim();if(u)return{name:wo(Eo(u)),nameSource:l}}}if(s.nodeName==="FORM")break;s=s.parentElement,o+=1}}function Eo(t){return t.replace(/\s+/g," ")}function wo(t){return t.length>100?`${Qr(t,100)} [...]`:t}function Pl(t,e){return t.ownerDocument?t.ownerDocument.getElementById(e):null}function re(t,e){return{name:t.getAttribute(e)||"",nameSource:"standard_attribute"}}function Le(t,e,n){return{name:To(t,e,n)||"",nameSource:"text_content"}}function To(t,e,n){if(!t.isContentEditable){if("innerText"in t){let r=t.innerText;const s=o=>{const i=t.querySelectorAll(o);for(let a=0;a<i.length;a+=1){const c=i[a];if("innerText"in c){const l=c.innerText;l&&l.trim().length>0&&(r=r.replace(l,""))}}};return s(`[${rr}]`),e&&s(`[${e}]`),n&&s(`${zt(A.HIDDEN)}, ${zt(A.MASK)}`),r}return t.textContent}}const Ul=[rr,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],Fl=[Ao,Vl],Bl=[Ao,zl,$l];function ye(t,e){if(!t.isConnected)return;let n,r=t;for(;r&&r.nodeName!=="HTML";){const s=Ar(r,Fl,Hl,e,n);if(s)return s;n=Ar(r,Bl,jl,e,n)||tn(Gl(r),n),r=r.parentElement}return n}function Co(t){return/[0-9]/.test(t)}function Vl(t){if(t.id&&!Co(t.id))return`#${CSS.escape(t.id)}`}function zl(t){if(t.tagName==="BODY")return;const e=t.classList;for(let n=0;n<e.length;n+=1){const r=e[n];if(!Co(r))return`${CSS.escape(t.tagName)}.${CSS.escape(r)}`}}function $l(t){return CSS.escape(t.tagName)}function Ao(t,e){if(e){const r=n(e);if(r)return r}for(const r of Ul){const s=n(r);if(s)return s}function n(r){if(t.hasAttribute(r))return`${CSS.escape(t.tagName)}[${r}="${CSS.escape(t.getAttribute(r))}"]`}}function Gl(t){let e=t.parentElement.firstElementChild,n=1;for(;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return`${CSS.escape(t.tagName)}:nth-of-type(${n})`}function Ar(t,e,n,r,s){for(const o of e){const i=o(t,r);if(i&&n(t,i,s))return tn(i,s)}}function Hl(t,e,n){return t.ownerDocument.querySelectorAll(tn(e,n)).length===1}function jl(t,e,n){let r;if(n===void 0)r=i=>i.matches(e);else{const i=tn(`${e}:scope`,n);r=a=>a.querySelector(i)!==null}let o=t.parentElement.firstElementChild;for(;o;){if(o!==t&&r(o))return!1;o=o.nextElementSibling}return!0}function tn(t,e){return e?`${t}>${e}`:t}const Io=$,Kl=100;function ql(t,e){const n=[];let r=0,s;o(t);function o(c){c.stopObservable.subscribe(i),n.push(c),q(s),s=V(a,Io)}function i(){r===1&&n.every(c=>c.isStopped())&&(r=2,e(n))}function a(){q(s),r===0&&(r=1,i())}return{tryAppend:c=>r!==0?!1:n.length>0&&!Yl(n[n.length-1].event,c.event)?(a(),!1):(o(c),!0),stop:()=>{a()}}}function Yl(t,e){return t.target===e.target&&Wl(t,e)<=Kl&&t.timeStamp-e.timeStamp<=Io}function Wl(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}function Xl(t,{onPointerDown:e,onPointerUp:n}){let r,s={selection:!1,input:!1,scroll:!1},o;const i=[k(t,window,"pointerdown",a=>{Rr(a)&&(r=Ir(),s={selection:!1,input:!1,scroll:!1},o=e(a))},{capture:!0}),k(t,window,"selectionchange",()=>{(!r||!Ir())&&(s.selection=!0)},{capture:!0}),k(t,window,"scroll",()=>{s.scroll=!0},{capture:!0,passive:!0}),k(t,window,"pointerup",a=>{if(Rr(a)&&o){const c=s;n(o,a,()=>c),o=void 0}},{capture:!0}),k(t,window,"input",()=>{s.input=!0},{capture:!0})];return{stop:()=>{i.forEach(a=>a.stop())}}}function Ir(){const t=window.getSelection();return!t||t.isCollapsed}function Rr(t){return t.target instanceof Element&&t.isPrimary!==!1}const xr=3;function Jl(t,e){if(Ql(t))return e.addFrustration("rage_click"),t.some(kr)&&e.addFrustration("dead_click"),e.hasError&&e.addFrustration("error_click"),{isRage:!0};const n=t.some(r=>r.getUserActivity().selection);return t.forEach(r=>{r.hasError&&r.addFrustration("error_click"),kr(r)&&!n&&r.addFrustration("dead_click")}),{isRage:!1}}function Ql(t){if(t.some(e=>e.getUserActivity().selection||e.getUserActivity().scroll))return!1;for(let e=0;e<t.length-(xr-1);e+=1)if(t[e+xr-1].event.timeStamp-t[e].event.timeStamp<=$)return!0;return!1}const Zl='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function kr(t){return t.hasPageActivity||t.getUserActivity().input||t.getUserActivity().scroll?!1:!t.event.target.matches(Zl)}const Ro=10*$,ae=new Map;function td(t){const e=ae.get(t);return ae.delete(t),e}function xo(t,e){ae.set(t,e),ae.forEach((n,r)=>{F(r,W())>Ro&&ae.delete(r)})}const ed=5*H;function nd(t,e,n,r){const s=Jt({expireDelay:ed}),o=new C;let i;t.subscribe(10,()=>{s.reset()}),t.subscribe(5,u);const{stop:a}=Xl(r,{onPointerDown:d=>rd(r,t,e,d,n),onPointerUp:({clickActionBase:d,hadActivityOnPointerDown:f},m,p)=>{sd(r,t,e,n,s,o,l,d,m,p,f)}});return{stop:()=>{u(),o.notify(),a()},actionContexts:{findActionId:d=>s.findAll(d)}};function l(d){if(!i||!i.tryAppend(d)){const f=d.clone();i=ql(d,m=>{id(m,f)})}}function u(){i&&i.stop()}}function rd(t,e,n,r,s){const o=t.enablePrivacyForActionName?So(r.target,t.defaultPrivacyLevel):A.ALLOW;if(o===A.HIDDEN)return;const i=od(r,o,t);let a=!1;return nr(e,n,s,t,c=>{a=c.hadActivity},bo),{clickActionBase:i,hadActivityOnPointerDown:()=>a}}function sd(t,e,n,r,s,o,i,a,c,l,u){var d;const f=ko(e,s,l,a,c);i(f);const m=(d=a==null?void 0:a.target)===null||d===void 0?void 0:d.selector;m&&xo(c.timeStamp,m);const{stop:p}=nr(e,n,r,t,h=>{h.hadActivity&&h.end<f.startClocks.timeStamp?f.discard():h.hadActivity?f.stop(h.end):u()?f.stop(f.startClocks.timeStamp):f.stop()},Ro),g=e.subscribe(5,({endClocks:h})=>{f.stop(h.timeStamp)}),b=o.subscribe(()=>{f.stop()});f.stopObservable.subscribe(()=>{g.unsubscribe(),p(),b.unsubscribe()})}function od(t,e,n){const r=t.target.getBoundingClientRect(),s=ye(t.target,n.actionNameAttribute);s&&xo(t.timeStamp,s);const o=Ll(t.target,n,e);return{type:"click",target:{width:Math.round(r.width),height:Math.round(r.height),selector:s},position:{x:Math.round(t.clientX-r.left),y:Math.round(t.clientY-r.top)},name:o.name,nameSource:o.nameSource}}function ko(t,e,n,r,s){const o=B(),i=z(),a=e.add(o,i.relative),c=go({lifeCycle:t,isChildEvent:p=>p.action!==void 0&&(Array.isArray(p.action.id)?p.action.id.includes(o):p.action.id===o)});let l=0,u;const d=[],f=new C;function m(p){l===0&&(u=p,l=1,u?a.close(je(u)):a.remove(),c.stop(),f.notify())}return{event:s,stop:m,stopObservable:f,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return u!==void 0},getUserActivity:n,addFrustration:p=>{d.push(p)},startClocks:i,isStopped:()=>l===1||l===2,clone:()=>ko(t,e,n,r,s),validate:p=>{if(m(),l!==1)return;const{resourceCount:g,errorCount:b,longTaskCount:h}=c.eventCounts,y={duration:u&&F(i.timeStamp,u),startClocks:i,id:o,frustrationTypes:d,counts:{resourceCount:g,errorCount:b,longTaskCount:h},events:p??[s],event:s,...r};t.notify(0,y),l=2},discard:()=>{m(),l=2}}}function id(t,e){const{isRage:n}=Jl(t,e);n?(t.forEach(r=>r.discard()),e.stop(U()),e.validate(t.map(r=>r.event))):(e.discard(),t.forEach(r=>r.validate()))}function ad(t,e,n,r,s){t.subscribe(0,a=>t.notify(12,Or(a))),e.register(0,({startTime:a,eventType:c})=>{if(c!=="error"&&c!=="resource"&&c!=="long_task")return;const l=o.findActionId(a);if(l)return{type:c,action:{id:l}}});let o={findActionId:I},i=I;return s.trackUserInteractions&&({actionContexts:o,stop:i}=nd(t,n,r,s)),{addAction:(a,c)=>{t.notify(12,{savedCommonContext:c,...Or(a)})},actionContexts:o,stop:i}}function Or(t){const e=Ae(t)?{action:{id:t.id,loading_time:_o(E(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position,name_source:t.nameSource}}}:void 0,n=G({action:{id:B(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action"},e),r=Ae(t)?t.duration:void 0,s=Ae(t)?void 0:t.context,o=Ae(t)?{events:t.events}:{handlingStack:t.handlingStack};return{customerContext:s,rawRumEvent:n,duration:r,startTime:t.startClocks.relative,domainContext:o}}function Ae(t){return t.type!=="custom"}function cd(t){const e=Ys([O.error]).subscribe(n=>t.notify(n.error));return{stop:()=>{e.unsubscribe()}}}function ud(t,e){const n=Ts(t,[Kt.cspViolation,Kt.intervention]).subscribe(r=>e.notify(r));return{stop:()=>{n.unsubscribe()}}}function ld(t,e){const n=new C;return cd(n),Ss(n),ud(e,n),n.subscribe(r=>t.notify(14,{error:r})),dd(t)}function dd(t){return t.subscribe(14,({error:e,customerContext:n,savedCommonContext:r})=>{n=G(e.context,n),t.notify(12,{customerContext:n,savedCommonContext:r,...fd(e)})}),{addError:({error:e,handlingStack:n,componentStack:r,startClocks:s,context:o},i)=>{const a=lt(e)?ot(e):void 0,c=qn({stackTrace:a,originalError:e,handlingStack:n,componentStack:r,startClocks:s,nonErrorPrefix:"Provided",source:j.CUSTOM,handling:"handled"});t.notify(14,{customerContext:o,savedCommonContext:i,error:c})}}}function fd(t){const e={date:t.startClocks.timeStamp,error:{id:B(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,component_stack:t.componentStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:"error"},n={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:e,startTime:t.startClocks.relative,domainContext:n}}const Lr=new WeakSet;function pd(t){if(!performance||!("getEntriesByName"in performance))return;const e=performance.getEntriesByName(t.url,"resource");if(!e.length||!("toJSON"in e[0]))return;const n=e.filter(r=>!Lr.has(r)).filter(r=>lo(r)&&fo(r)).filter(r=>md(r,t.startClocks.relative,Oo({startTime:t.startClocks.relative,duration:t.duration})));if(n.length===1)return Lr.add(n[0]),n[0].toJSON()}function Oo(t){return qt(t.startTime,t.duration)}function md(t,e,n){return t.startTime>=e-1&&Oo(t)<=qt(n,1)}const hd=2*H;function _d(t){const e=gd(t)||bd(t);if(!(!e||e.traceTime<=Y()-hd))return e.traceId}function gd(t){const e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return Lo(e&&e.content,n&&n.content)}function bd(t){const e=yd(t);if(e)return Lo(ue(e,"trace-id"),ue(e,"trace-time"))}function Lo(t,e){const n=e&&Number(e);if(!(!t||!n))return{traceId:t,traceTime:n}}function yd(t){for(let e=0;e<t.childNodes.length;e+=1){const n=Nr(t.childNodes[e]);if(n)return n}if(t.body)for(let e=t.body.childNodes.length-1;e>=0;e-=1){const n=t.body.childNodes[e],r=Nr(n);if(r)return r;if(!yo(n))break}}function Nr(t){if(t&&yl(t)){const e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function No(){if(Ze(R.NAVIGATION)){const n=performance.getEntriesByType(R.NAVIGATION)[0];if(n)return n}const t=vd(),e={entryType:R.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.loadEventEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,workerStart:0,toJSON:()=>({...e,toJSON:void 0}),...t};return e}function vd(){const t={},e=performance.timing;for(const n in e)if(me(e[n])){const r=n,s=e[r];t[r]=s===0?0:je(s)}return t}function Sd(t,e,n=No){Jn(t,"interactive",()=>{const r=n(),s=Object.assign(r.toJSON(),{entryType:R.RESOURCE,initiatorType:co,duration:r.responseEnd,traceId:_d(document),toJSON:()=>({...s,toJSON:void 0})});e(s)})}function Ed(t,e,n,r=gc(),s=Sd){t.subscribe(8,a=>{i(()=>wd(a,e,n))});const o=st(e,{type:R.RESOURCE,buffered:!0}).subscribe(a=>{for(const c of a)tl(c)||i(()=>Dr(c,e))});s(e,a=>{i(()=>Dr(a,e))});function i(a){r.push(()=>{const c=a();c&&t.notify(12,c)})}return{stop:()=>{o.unsubscribe()}}}function wd(t,e,n){const r=pd(t),s=r?He(r.startTime):t.startClocks,o=Td(t,e);if(!e.trackResources&&!o)return;const i=t.type==="xhr"?"xhr":"fetch",a=r?Do(r):void 0,c=r?uo(r):Ad(n,s,t.duration),l=G({date:s.timeStamp,resource:{id:B(),type:i,duration:E(c),method:t.method,status_code:t.status,protocol:r&&po(r),url:ol(t.url)?il(t.url):t.url,delivery_type:r&&mo(r)},type:"resource",_dd:{discarded:!e.trackResources}},o,a);return{startTime:s.relative,duration:c,rawRumEvent:l,domainContext:{performanceEntry:r,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error,isAborted:t.isAborted,handlingStack:t.handlingStack}}}function Dr(t,e){const n=He(t.startTime),r=Cd(t,e);if(!e.trackResources&&!r)return;const s=Zu(t),o=Do(t),i=uo(t),a=G({date:n.timeStamp,resource:{id:B(),type:s,duration:E(i),url:t.name,status_code:Id(t.responseStatus),protocol:po(t),delivery_type:mo(t)},type:"resource",_dd:{discarded:!e.trackResources}},r,o);return{startTime:n.relative,duration:i,rawRumEvent:a,domainContext:{performanceEntry:t}}}function Do(t){const{renderBlockingStatus:e}=t;return{resource:{render_blocking_status:e,...rl(t),...el(t)}}}function Td(t,e){if(t.traceSampled&&t.traceId&&t.spanId)return{_dd:{span_id:t.spanId.toString(),trace_id:t.traceId.toString(),rule_psr:e.rulePsr}}}function Cd(t,e){if(t.traceId)return{_dd:{trace_id:t.traceId,span_id:so().toString(),rule_psr:e.rulePsr}}}function Ad(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:n}function Id(t){return t===0?void 0:t}function Rd(t,e,n){const{stop:r,eventCounts:s}=go({lifeCycle:t,isChildEvent:o=>o.view.id===e,onChange:n});return{stop:r,eventCounts:s}}const xd=10*H;function kd(t,e,n){return{stop:st(t,{type:R.PAINT,buffered:!0}).subscribe(s=>{const o=s.find(i=>i.name==="first-contentful-paint"&&i.startTime<e.timeStamp&&i.startTime<xd);o&&n(o.startTime)}).unsubscribe}}function Od(t,e,n){const r=st(t,{type:R.FIRST_INPUT,buffered:!0}).subscribe(s=>{const o=s.find(i=>i.startTime<e.timeStamp);if(o){const i=F(o.startTime,o.processingStart);let a;o.target&&Qt(o.target)&&(a=ye(o.target,t.actionNameAttribute)),n({delay:i>=0?i:0,time:o.startTime,targetSelector:a})}});return{stop:()=>{r.unsubscribe()}}}function Ld(t,e,n=No){return Md(t,()=>{const r=n();Dd(r)||e(Nd(r))})}function Nd(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=W()?t.responseStart:void 0}}function Dd(t){return t.loadEventEnd<=0}function Md(t,e){let n;const{stop:r}=Jn(t,"complete",()=>{n=V(()=>e())});return{stop:()=>{r(),q(n)}}}const Pd=10*H;function Ud(t,e,n,r){let s=1/0;const{stop:o}=gt(t,n,["pointerdown","keydown"],c=>{s=c.timeStamp},{capture:!0,once:!0});let i=0;const a=st(t,{type:R.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe(c=>{const l=li(c,u=>u.entryType===R.LARGEST_CONTENTFUL_PAINT&&u.startTime<s&&u.startTime<e.timeStamp&&u.startTime<Pd&&u.size>i);if(l){let u;l.element&&(u=ye(l.element,t.actionNameAttribute)),r({value:l.startTime,targetSelector:u,resourceUrl:Fd(l)}),i=l.size}});return{stop:()=>{o(),a.unsubscribe()}}}function Fd(t){return t.url===""?void 0:t.url}function Mo(t,e=window){let n,r;return document.visibilityState==="hidden"?n=0:(n=1/0,{stop:r}=gt(t,e,["pagehide","visibilitychange"],s=>{(s.type==="pagehide"||document.visibilityState==="hidden")&&(n=s.timeStamp,r())},{capture:!0})),{get timeStamp(){return n},stop(){r==null||r()}}}function Bd(t,e,n){const r={},{stop:s}=Ld(t,u=>{e(u.loadEvent),r.navigationTimings=u,n()}),o=Mo(t),{stop:i}=kd(t,o,u=>{r.firstContentfulPaint=u,n()}),{stop:a}=Ud(t,o,window,u=>{r.largestContentfulPaint=u,n()}),{stop:c}=Od(t,o,u=>{r.firstInput=u,n()});function l(){s(),i(),a(),c(),o.stop()}return{stop:l,initialViewMetrics:r}}function Vd(t,e,n){if(!jd())return{stop:I};let r=0,s;n({value:0});const o=Hd(),i=st(t,{type:R.LAYOUT_SHIFT,buffered:!0}).subscribe(a=>{var c;for(const l of a){if(l.hadRecentInput||l.startTime<e)continue;const{cumulatedValue:u,isMaxValue:d}=o.update(l);if(d){const f=zd(l.sources);s={target:f!=null&&f.node?new WeakRef(f.node):void 0,time:F(e,l.startTime),previousRect:f==null?void 0:f.previousRect,currentRect:f==null?void 0:f.currentRect,devicePixelRatio:window.devicePixelRatio}}if(u>r){r=u;const f=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.deref();n({value:De(r,4),targetSelector:f&&ye(f,t.actionNameAttribute),time:s==null?void 0:s.time,previousRect:s!=null&&s.previousRect?Mr(s.previousRect):void 0,currentRect:s!=null&&s.currentRect?Mr(s.currentRect):void 0,devicePixelRatio:s==null?void 0:s.devicePixelRatio})}}});return{stop:()=>{i.unsubscribe()}}}function zd(t){return t.find(e=>!!e.node&&Qt(e.node))}function Mr({x:t,y:e,width:n,height:r}){return{x:t,y:e,width:n,height:r}}const $d=5*$,Gd=$;function Hd(){let t=0,e,n,r=0;return{update:s=>{const o=e===void 0||s.startTime-n>=Gd||s.startTime-e>=$d;let i;return o?(e=n=s.startTime,r=t=s.value,i=!0):(t+=s.value,n=s.startTime,i=s.value>r,i&&(r=s.value)),{cumulatedValue:t,isMaxValue:i}}}}function jd(){return Ze(R.LAYOUT_SHIFT)&&"WeakRef"in window}let Ne,Po=0,In=1/0,Rn=0;function Kd(){"interactionCount"in performance||Ne||(Ne=new window.PerformanceObserver(_(t=>{t.getEntries().forEach(e=>{const n=e;n.interactionId&&(In=Math.min(In,n.interactionId),Rn=Math.max(Rn,n.interactionId),Po=(Rn-In)/7+1)})})),Ne.observe({type:"event",buffered:!0,durationThreshold:0}))}const Pr=()=>Ne?Po:window.performance.interactionCount||0,Ur=10,qd=1*H;function Yd(t,e,n){if(!Jd())return{getInteractionToNextPaint:()=>{},setViewEnd:I,stop:I};const{getViewInteractionCount:r,stopViewInteractionCount:s}=Xd(n);let o=1/0;const i=Wd(r);let a=-1,c,l;function u(m){for(const g of m)g.interactionId&&g.startTime>=e&&g.startTime<=o&&i.process(g);const p=i.estimateP98Interaction();p&&p.duration!==a&&(a=p.duration,l=F(e,p.startTime),c=td(p.startTime),!c&&p.target&&Qt(p.target)&&(c=ye(p.target,t.actionNameAttribute)))}const d=st(t,{type:R.FIRST_INPUT,buffered:!0}).subscribe(u),f=st(t,{type:R.EVENT,durationThreshold:40,buffered:!0}).subscribe(u);return{getInteractionToNextPaint:()=>{if(a>=0)return{value:Math.min(a,qd),targetSelector:c,time:l};if(r())return{value:0}},setViewEnd:m=>{o=m,s()},stop:()=>{f.unsubscribe(),d.unsubscribe()}}}function Wd(t){const e=[];function n(){e.sort((r,s)=>s.duration-r.duration).splice(Ur)}return{process(r){const s=e.findIndex(i=>r.interactionId===i.interactionId),o=e[e.length-1];s!==-1?r.duration>e[s].duration&&(e[s]=r,n()):(e.length<Ur||r.duration>o.duration)&&(e.push(r),n())},estimateP98Interaction(){const r=Math.min(e.length-1,Math.floor(t()/50));return e[r]}}}function Xd(t){Kd();const e=t==="initial_load"?0:Pr();let n={stopped:!1};function r(){return Pr()-e}return{getViewInteractionCount:()=>n.stopped?n.interactionCount:r(),stopViewInteractionCount:()=>{n={stopped:!0,interactionCount:r()}}}}function Jd(){return Ze(R.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function Qd(t,e,n,r,s,o,i){let a=s==="initial_load",c=!0;const l=[],u=Mo(r);function d(){if(!c&&!a&&l.length>0){const m=Math.max(...l);m<u.timeStamp&&i(m)}}const{stop:f}=nr(t,e,n,r,m=>{c&&(c=!1,m.hadActivity&&l.push(F(o.timeStamp,m.end)),d())});return{stop:()=>{f(),u.stop()},setLoadEvent:m=>{a&&(a=!1,l.push(m),d())}}}function Lp(){let t;const e=window.visualViewport;return e?t=e.pageLeft-e.offsetLeft:window.scrollX!==void 0?t=window.scrollX:t=window.pageXOffset||0,Math.round(t)}function Zd(){let t;const e=window.visualViewport;return e?t=e.pageTop-e.offsetTop:window.scrollY!==void 0?t=window.scrollY:t=window.pageYOffset||0,Math.round(t)}let xn;function tf(t){return xn||(xn=ef(t)),xn}function ef(t){return new C(e=>{const{throttled:n}=_e(()=>{e.notify(sr())},200);return k(t,window,"resize",n,{capture:!0,passive:!0}).stop})}function sr(){const t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}const nf=$;function rf(t,e,n,r=of(t)){let s=0,o=0,i=0;const a=r.subscribe(({scrollDepth:c,scrollTop:l,scrollHeight:u})=>{let d=!1;if(c>s&&(s=c,d=!0),u>o){o=u;const f=W();i=F(e.relative,f),d=!0}d&&n({maxDepth:Math.min(s,o),maxDepthScrollTop:l,maxScrollHeight:o,maxScrollHeightTime:i})});return{stop:()=>a.unsubscribe()}}function sf(){const t=Zd(),{height:e}=sr(),n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),r=Math.round(e+t);return{scrollHeight:n,scrollDepth:r,scrollTop:t}}function of(t,e=nf){return new C(n=>{function r(){n.notify(sf())}if(window.ResizeObserver){const s=_e(r,e,{leading:!1,trailing:!0}),o=document.scrollingElement||document.documentElement,i=new ResizeObserver(_(s.throttled));o&&i.observe(o);const a=k(t,window,"scroll",s.throttled,{passive:!0});return()=>{s.cancel(),i.disconnect(),a.stop()}}})}function af(t,e,n,r,s,o,i){const a={},{stop:c,setLoadEvent:l}=Qd(t,e,n,r,o,i,g=>{a.loadingTime=g,s()}),{stop:u}=rf(r,i,g=>{a.scroll=g}),{stop:d}=Vd(r,i.relative,g=>{a.cumulativeLayoutShift=g,s()}),{stop:f,getInteractionToNextPaint:m,setViewEnd:p}=Yd(r,i.relative,o);return{stop:()=>{c(),d(),u()},stopINPTracking:f,setLoadEvent:l,setViewEnd:p,getCommonViewMetrics:()=>(a.interactionToNextPaint=m(),a)}}const cf=3e3,uf=5*H,lf=5*H;function df(t,e,n,r,s,o,i,a){const c=new Set;let l=d("initial_load",qr(),a);f();let u;i&&(u=m(o));function d(p,g,b){const h=ff(e,n,r,s,t,p,g,b);return c.add(h),h.stopObservable.subscribe(()=>{c.delete(h)}),h}function f(){e.subscribe(10,()=>{l=d("route_change",void 0,{name:l.name,service:l.service,version:l.version,context:l.contextManager.getContext()})}),e.subscribe(9,()=>{l.end({sessionIsActive:!1})}),e.subscribe(11,p=>{p.reason===$t.UNLOADING&&l.end()})}function m(p){return p.subscribe(({oldLocation:g,newLocation:b})=>{mf(g,b)&&(l.end(),l=d("route_change"))})}return{addTiming:(p,g=U())=>{l.addTiming(p,g)},startView:(p,g)=>{l.end({endClocks:g}),l=d("route_change",g,p)},setViewContext:p=>{l.contextManager.setContext(p)},setViewContextProperty:(p,g)=>{l.contextManager.setContextProperty(p,g)},setViewName:p=>{l.setViewName(p)},getViewContext:()=>l.contextManager.getContext(),stop:()=>{u&&u.unsubscribe(),l.end(),c.forEach(p=>p.stop())}}}function ff(t,e,n,r,s,o,i=z(),a){const c=B(),l=new C,u={};let d=0,f;const m=ce(s),p=ht();let g=!0,b=a==null?void 0:a.name;const h=(a==null?void 0:a.service)||r.service,y=(a==null?void 0:a.version)||r.version,S=a==null?void 0:a.context;S&&p.setContext(S);const M={id:c,name:b,startClocks:i,service:h,version:y,context:S};t.notify(1,M),t.notify(2,M);const{throttled:N,cancel:it}=_e(yt,cf,{leading:!1}),{setLoadEvent:v,setViewEnd:Q,stop:Mt,stopINPTracking:nn,getCommonViewMetrics:rn}=af(t,e,n,r,bt,o,i),{stop:sn,initialViewMetrics:on}=o==="initial_load"?Bd(r,v,bt):{stop:I,initialViewMetrics:{}},{stop:an,eventCounts:cn}=Rd(t,c,bt),un=Yt(yt,uf);yt(),p.changeObservable.subscribe(bt);function ve(){t.notify(3,{id:c,name:b,context:p.getContext(),startClocks:i})}function bt(){ve(),N()}function yt(){it(),ve(),d+=1;const Z=f===void 0?U():f.timeStamp;t.notify(4,{customTimings:u,documentVersion:d,id:c,name:b,service:h,version:y,context:p.getContext(),loadingType:o,location:m,startClocks:i,commonViewMetrics:rn(),initialViewMetrics:on,duration:F(i.timeStamp,Z),isActive:f===void 0,sessionIsActive:g,eventCounts:cn})}return{get name(){return b},service:h,version:y,contextManager:p,stopObservable:l,end(Z={}){var J,vt;f||(f=(J=Z.endClocks)!==null&&J!==void 0?J:z(),g=(vt=Z.sessionIsActive)!==null&&vt!==void 0?vt:!0,t.notify(5,{endClocks:f}),t.notify(6,{endClocks:f}),Ke(un),Q(f.relative),Mt(),yt(),V(()=>{this.stop()},lf))},stop(){sn(),an(),nn(),l.notify()},addTiming(Z,J){if(f)return;const vt=Qo(J)?J:F(i.timeStamp,J);u[pf(Z)]=vt,bt()},setViewName(Z){b=Z,yt()}}}function pf(t){const e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return e!==t&&T.warn(`Invalid timing name: ${t}, sanitized to: ${e}`),e}function mf(t,e){return t.pathname!==e.pathname||!hf(e.hash)&&Fr(e.hash)!==Fr(t.hash)}function hf(t){const e=t.substring(1);return e!==""&&!!document.getElementById(e)}function Fr(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function _f(t,e,n,r,s,o,i,a,c,l){return t.subscribe(4,u=>t.notify(12,gf(u,n,a))),e.register(0,({startTime:u,eventType:d})=>{const{service:f,version:m,id:p,name:g,context:b}=c.findView(u);return{type:d,service:f,version:m,context:b,view:{id:p,name:g}}}),df(r,t,s,o,n,i,!n.trackViewsManually,l)}function gf(t,e,n){var r,s,o,i,a,c,l,u,d,f,m,p,g,b,h,y,S,M;const N=n.getReplayStats(t.id),it=(s=(r=t.commonViewMetrics)===null||r===void 0?void 0:r.cumulativeLayoutShift)===null||s===void 0?void 0:s.devicePixelRatio,v={_dd:{document_version:t.documentVersion,replay_stats:N,cls:it?{device_pixel_ratio:it}:void 0,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:(o=t.commonViewMetrics.cumulativeLayoutShift)===null||o===void 0?void 0:o.value,cumulative_layout_shift_time:E((i=t.commonViewMetrics.cumulativeLayoutShift)===null||i===void 0?void 0:i.time),cumulative_layout_shift_target_selector:(a=t.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.targetSelector,first_byte:E((c=t.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.firstByte),dom_complete:E((l=t.initialViewMetrics.navigationTimings)===null||l===void 0?void 0:l.domComplete),dom_content_loaded:E((u=t.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domContentLoaded),dom_interactive:E((d=t.initialViewMetrics.navigationTimings)===null||d===void 0?void 0:d.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:E(t.initialViewMetrics.firstContentfulPaint),first_input_delay:E((f=t.initialViewMetrics.firstInput)===null||f===void 0?void 0:f.delay),first_input_time:E((m=t.initialViewMetrics.firstInput)===null||m===void 0?void 0:m.time),first_input_target_selector:(p=t.initialViewMetrics.firstInput)===null||p===void 0?void 0:p.targetSelector,interaction_to_next_paint:E((g=t.commonViewMetrics.interactionToNextPaint)===null||g===void 0?void 0:g.value),interaction_to_next_paint_time:E((b=t.commonViewMetrics.interactionToNextPaint)===null||b===void 0?void 0:b.time),interaction_to_next_paint_target_selector:(h=t.commonViewMetrics.interactionToNextPaint)===null||h===void 0?void 0:h.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:E((y=t.initialViewMetrics.largestContentfulPaint)===null||y===void 0?void 0:y.value),largest_contentful_paint_target_selector:(S=t.initialViewMetrics.largestContentfulPaint)===null||S===void 0?void 0:S.targetSelector,load_event:E((M=t.initialViewMetrics.navigationTimings)===null||M===void 0?void 0:M.loadEvent),loading_time:_o(E(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},performance:bf(t.commonViewMetrics,t.initialViewMetrics),resource:{count:t.eventCounts.resourceCount},time_spent:E(t.duration)},display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:E(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:N?!0:void 0,is_active:t.sessionIsActive?void 0:!1},privacy:{replay_level:e.defaultPrivacyLevel}};return et(t.customTimings)||(v.view.custom_timings=ei(t.customTimings,E)),{rawRumEvent:v,startTime:t.startClocks.relative,duration:t.duration,domainContext:{location:t.location}}}function bf({cumulativeLayoutShift:t,interactionToNextPaint:e},{firstContentfulPaint:n,firstInput:r,largestContentfulPaint:s}){return{cls:t&&{score:t.value,timestamp:E(t.time),target_selector:t.targetSelector,previous_rect:t.previousRect,current_rect:t.currentRect},fcp:n&&{timestamp:E(n)},fid:r&&{duration:E(r.delay),timestamp:E(r.time),target_selector:r.targetSelector},inp:e&&{duration:E(e.value),timestamp:E(e.time),target_selector:e.targetSelector},lcp:s&&{timestamp:E(s.value),target_selector:s.targetSelector,resource_url:s.resourceUrl}}}const yf="rum";function vf(t,e,n){const r=Ds(t,yf,s=>Ef(t,s),n);return r.expireObservable.subscribe(()=>{e.notify(9)}),r.renewObservable.subscribe(()=>{e.notify(10)}),r.sessionStateUpdateObservable.subscribe(({previousState:s,newState:o})=>{if(!s.forcedReplay&&o.forcedReplay){const i=r.findSession();i&&(i.isReplayForced=!0)}}),{findTrackedSession:s=>{const o=r.findSession(s);if(!(!o||!Uo(o.trackingType)))return{id:o.id,sessionReplay:o.trackingType==="1"?1:o.isReplayForced?2:0,anonymousId:o.anonymousId}},expire:r.expire,expireObservable:r.expireObservable,setForcedReplay:()=>r.updateSessionState({forcedReplay:"1"})}}function Sf(){const t={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplay:Hs("records")?1:0};return{findTrackedSession:()=>t,expire:I,expireObservable:new C,setForcedReplay:I}}function Ef(t,e){let n;return wf(e)?n=e:mt(t.sessionSampleRate)?mt(t.sessionReplaySampleRate)?n="1":n="2":n="0",{trackingType:n,isTracked:Uo(n)}}function wf(t){return t==="0"||t==="1"||t==="2"}function Uo(t){return t==="2"||t==="1"}function Tf(t,e,n,r,s,o,i){const a=t.replica,c=Xn(t,{endpoint:t.rumEndpointBuilder,encoder:i(2)},a&&{endpoint:a.rumEndpointBuilder,transformMessage:l=>G(l,{application:{id:a.applicationId}}),encoder:i(3)},r,s,o);return e.subscribe(13,l=>{l.type==="view"?c.upsert(l,l.view.id):c.add(l)}),n.subscribe(l=>c.add(l,Ls(t))),c}function Cf(t){const e=Dt();t.subscribe(13,n=>{e.send("rum",n)})}const Af=xt;function If(t,e,n,r){const s=Jt({expireDelay:Af});let o;t.subscribe(1,({startClocks:c})=>{const l=r.href;s.add(a({url:l,referrer:o||document.referrer}),c.relative),o=l}),t.subscribe(6,({endClocks:c})=>{s.closeActive(c.relative)});const i=n.subscribe(({newLocation:c})=>{const l=s.find();if(l){const u=W();s.closeActive(u),s.add(a({url:c.href,referrer:l.referrer}),u)}});function a({url:c,referrer:l}){return{url:c,referrer:l}}return e.register(0,({startTime:c,eventType:l})=>{const{url:u,referrer:d}=s.find(c);return{type:l,view:{url:u,referrer:d}}}),{findUrl:c=>s.find(c),getAllEntries:()=>s.getAllEntries(),getDeletedEntries:()=>s.getDeletedEntries(),stop:()=>{i.unsubscribe(),s.stop()}}}function Rf(t,e){let n=ce(e);return new C(r=>{const{stop:s}=xf(t,i),{stop:o}=kf(t,i);function i(){if(n.href===e.href)return;const a=ce(e);r.notify({newLocation:a,oldLocation:n}),n=a}return()=>{s(),o()}})}function xf(t,e){const{stop:n}=nt(Br("pushState"),"pushState",({onPostCall:o})=>{o(e)}),{stop:r}=nt(Br("replaceState"),"replaceState",({onPostCall:o})=>{o(e)}),{stop:s}=k(t,window,"popstate",e);return{stop:()=>{n(),r(),s()}}}function kf(t,e){return k(t,window,"hashchange",e)}function Br(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}const Of=xt;function Lf(t,e,n,r){const s=Jt({expireDelay:Of});return t.subscribe(1,({startClocks:o})=>{s.add({},o.relative),r.resetCustomerData()}),t.subscribe(6,({endClocks:o})=>{s.closeActive(o.relative)}),e.register(0,({startTime:o,eventType:i})=>{if(!n.trackFeatureFlagsForEvents.concat(["view","error"]).includes(i))return;const c=s.find(o);if(!(!c||et(c)))return{type:i,feature_flags:c}}),{addFeatureFlagEvaluation:(o,i)=>{const a=s.find();a&&(a[o]=i,r.updateCustomerData(a))},stop:()=>r.stop()}}const Nf=10*$;let at,Et,Fn;function Df(t,e,n,r,s){e.enabled&&mt(t.customerDataTelemetrySampleRate)&&(Fo(),Vr(),n.subscribe(13,i=>{Fn=!0,se(Et.globalContextBytes,r.getOrCreateTracker(2).getBytesCount()),se(Et.userContextBytes,r.getOrCreateTracker(1).getBytesCount()),se(Et.featureFlagBytes,["view","error"].includes(i.type)?r.getOrCreateTracker(0).getBytesCount():0)}),s.subscribe(({bytesCount:i,messagesCount:a})=>{Fn&&(at.batchCount+=1,se(at.batchBytesCount,i),se(at.batchMessagesCount,a),kn(at.globalContextBytes,Et.globalContextBytes),kn(at.userContextBytes,Et.userContextBytes),kn(at.featureFlagBytes,Et.featureFlagBytes),Vr())}),Yt(Mf,Nf))}function Mf(){at.batchCount!==0&&(Nt("Customer data measures",at),Fo())}function ft(){return{min:1/0,max:0,sum:0}}function se(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function kn(t,e){t.sum+=e.sum,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)}function Fo(){at={batchCount:0,batchBytesCount:ft(),batchMessagesCount:ft(),globalContextBytes:ft(),userContextBytes:ft(),featureFlagBytes:ft()}}function Vr(){Fn=!1,Et={globalContextBytes:ft(),userContextBytes:ft(),featureFlagBytes:ft()}}const Pf=4e3,Uf=500,Ff=xt;function Bf(t,e,n=Uf){const r=Jt({expireDelay:Ff,maxEntries:Pf});let s;i(Bo(),W());const{stop:o}=gt(e,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],c=>{i(zf(c),c.timeStamp)},{capture:!0});function i(c,l=W()){c!==s&&(s=c,r.closeActive(l),r.add({state:s,startTime:l},l))}function a(c,l,u){return r.findAll(l,u).some(d=>d.state===c)}return t.register(0,({startTime:c,duration:l=0,eventType:u})=>{if(u==="view"){const d=r.findAll(c,l);return{type:u,_dd:{page_states:Vf(d,c,n)}}}if(u==="action"||u==="error")return{type:u,view:{in_foreground:a("active",c,0)}}}),{wasInPageStateDuringPeriod:a,addPageState:i,stop:()=>{o(),r.stop()}}}function Vf(t,e,n){if(t.length!==0)return t.slice(-n).reverse().map(({state:r,startTime:s})=>({state:r,start:E(F(e,s))}))}function zf(t){return t.type==="freeze"?"frozen":t.type==="pagehide"?t.persisted?"frozen":"terminated":Bo()}function Bo(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function $f(t){let e;const n=requestAnimationFrame(_(()=>{e=sr()})),r=tf(t).subscribe(s=>{e=s}).unsubscribe;return{get:()=>e?{viewport:e}:void 0,stop:()=>{r(),n&&cancelAnimationFrame(n)}}}function Gf(t,e){const n=window.cookieStore?Hf(t):Kf;return new C(r=>n(e,s=>r.notify(s)))}function Hf(t){return(e,n)=>k(t,window.cookieStore,"change",s=>{const o=s.changed.find(i=>i.name===e)||s.deleted.find(i=>i.name===e);o&&n(o.value)}).stop}const jf=$;function Kf(t,e){const n=ue(document.cookie,t),r=Yt(()=>{const s=ue(document.cookie,t);s!==n&&e(s)},jf);return()=>{Ke(r)}}const zr="datadog-ci-visibility-test-execution-id";function qf(t,e,n=Gf(t,zr)){var r;let s=pt(zr)||((r=window.Cypress)===null||r===void 0?void 0:r.env("traceId"));const o=n.subscribe(i=>{s=i});return e.register(0,({eventType:i})=>{if(typeof s=="string")return{type:i,session:{type:"ci_test"},ci_test:{test_execution_id:s}}}),{stop:()=>{o.unsubscribe()}}}function Yf(t,e){const n=st(e,{type:R.LONG_ANIMATION_FRAME,buffered:!0}).subscribe(r=>{for(const s of r){const o=He(s.startTime),i={date:o.timeStamp,long_task:{id:B(),entry_type:"long-animation-frame",duration:E(s.duration),blocking_duration:E(s.blockingDuration),first_ui_event_timestamp:E(s.firstUIEventTimestamp),render_start:E(s.renderStart),style_and_layout_start:E(s.styleAndLayoutStart),start_time:E(s.startTime),scripts:s.scripts.map(a=>({duration:E(a.duration),pause_duration:E(a.pauseDuration),forced_style_and_layout_duration:E(a.forcedStyleAndLayoutDuration),start_time:E(a.startTime),execution_start:E(a.executionStart),source_url:a.sourceURL,source_function_name:a.sourceFunctionName,source_char_position:a.sourceCharPosition,invoker:a.invoker,invoker_type:a.invokerType,window_attribution:a.windowAttribution}))},type:"long_task",_dd:{discarded:!1}};t.notify(12,{rawRumEvent:i,startTime:o.relative,duration:s.duration,domainContext:{performanceEntry:s}})}});return{stop:()=>n.unsubscribe()}}function Wf(t,e){const n=st(e,{type:R.LONG_TASK,buffered:!0}).subscribe(r=>{for(const s of r){if(s.entryType!==R.LONG_TASK||!e.trackLongTasks)break;const o=He(s.startTime),i={date:o.timeStamp,long_task:{id:B(),entry_type:"long-task",duration:E(s.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(12,{rawRumEvent:i,startTime:o.relative,duration:s.duration,domainContext:{performanceEntry:s}})}});return{stop(){n.unsubscribe()}}}function Xf(){const t={};return{register(e,n){return t[e]||(t[e]=[]),t[e].push(n),{unregister:()=>{t[e]=t[e].filter(r=>r!==n)}}},triggerHook(e,n){const s=(t[e]||[]).map(o=>o(n));return G(...s)}}}function Jf(t){t.register(0,({eventType:e})=>{const n=Js(),r=Qs();if(!(!n||!r))return{type:e,session:{type:"synthetics"},synthetics:{test_id:n,result_id:r,injected:Je()}}})}function Qf(t,e,n,r,s,o,i,a){var c;const l=[],u=new Wu,d=Xf();u.subscribe(13,P=>Yn("rum",P));const f=Zf(t);f.setContextProvider(()=>{var P,ln;return{application:{id:t.applicationId},session:{id:(P=b.findTrackedSession())===null||P===void 0?void 0:P.id},view:{id:(ln=M.findView())===null||ln===void 0?void 0:ln.id},action:{id:Mt.findActionId()}}});const m=P=>{u.notify(14,{error:P}),Nt("Error reported to customer",{"error.message":P.message})},p=js(t),g=p.subscribe(P=>{u.notify(11,P)});l.push(()=>g.unsubscribe());const b=rt()?Sf():vf(t,u,i);if(rt())Cf(u);else{const P=Tf(t,u,f.observable,m,p,b.expireObservable,o);l.push(()=>P.stop()),Df(t,f,u,n,P.flushObservable)}const h=zu(),y=Rf(t,location),S=Bf(d,t),M=Ju(u),N=If(u,d,y,location),it=Lf(u,d,t,n.getOrCreateTracker(0));l.push(()=>it.stop());const{observable:v,stop:Q}=Gu();l.push(Q);const{actionContexts:Mt,addAction:nn,stop:rn}=tp(u,d,t,b,S,h,v,N,M,r,m);l.push(rn),Os();const{addTiming:sn,startView:on,setViewName:an,setViewContext:cn,setViewContextProperty:un,getViewContext:ve,stop:bt}=_f(u,d,t,location,h,v,y,e,M,s);l.push(bt);const{stop:yt}=Ed(u,t,S);if(l.push(yt),t.trackLongTasks)if(!((c=PerformanceObserver.supportedEntryTypes)===null||c===void 0)&&c.includes(R.LONG_ANIMATION_FRAME)){const{stop:P}=Yf(u,t);l.push(P)}else Wf(u,t);const{addError:Z}=ld(u,t);al(u,t,b);const J=bu(u,S,a),vt=Yu(t.applicationId,b,M,Mt,N);return{addAction:nn,addError:Z,addTiming:sn,addFeatureFlagEvaluation:it.addFeatureFlagEvaluation,startView:on,setViewContext:cn,setViewContextProperty:un,getViewContext:ve,setViewName:an,lifeCycle:u,viewHistory:M,session:b,stopSession:()=>b.expire(),getInternalContext:vt.get,startDurationVital:J.startDurationVital,stopDurationVital:J.stopDurationVital,addDurationVital:J.addDurationVital,stop:()=>{l.forEach(P=>P())}}}function Zf(t){const e=ks("browser-rum-sdk",t);if(rt()){const n=Dt();e.observable.subscribe(r=>n.send("internal_telemetry",r))}return e}function tp(t,e,n,r,s,o,i,a,c,l,u){const d=ad(t,e,o,i,n),f=$f(n),m=qf(n,e);return Jf(e),Ku(n,t,e,r,c,a,f,l,u),{pageStateHistory:s,addAction:d.addAction,actionContexts:d.actionContexts,stop:()=>{d.stop(),m.stop(),f.stop(),c.stop(),s.stop(),a.stop()}}}function ep(t,{session:e,viewContext:n,errorType:r}){const s=e?e.id:"no-session-id",o=[];r!==void 0&&o.push(`error-type=${r}`),n&&(o.push(`seed=${n.id}`),o.push(`from=${n.startClocks.timeStamp}`));const i=np(t),a=`/rum/replay/sessions/${s}`;return`${i}${a}?${o.join("&")}`}function np(t){const e=t.site,n=t.subdomain||rp(t);return`https://${n?`${n}.`:""}${e}`}function rp(t){switch(t.site){case At:case Fi:return"app";case us:return"dd";default:return}}const sp=1e3;let K;function Np(t){return en(t).segments_count}function Dp(t){en(t).segments_count+=1}function Mp(t){en(t).records_count+=1}function Pp(t,e){en(t).segments_total_raw_size+=e}function op(t){return K==null?void 0:K.get(t)}function en(t){K||(K=new Map);let e;return K.has(t)?e=K.get(t):(e={records_count:0,segments_count:0,segments_total_raw_size:0},K.set(t,e),K.size>sp&&ip()),e}function ip(){if(!K)return;const t=K.keys().next().value;t&&K.delete(t)}function Vo(t,e,n){let r=0,s=[],o,i=0;const a=[],{stop:c}=k(t,e,"message",({data:d})=>{if(d.type!=="wrote"||d.streamId!==n)return;r+=d.additionalBytesCount,s.push(d.result),o=d.trailer;const f=a.shift();f&&f.id===d.id?f.writeCallback?f.writeCallback(d.result.byteLength):f.finishCallback&&f.finishCallback():(c(),Nt("Worker responses received out of order."))});function l(){const d=s.length===0?new Uint8Array(0):ti(s.concat(o)),f={rawBytesCount:r,output:d,outputBytesCount:d.byteLength,encoding:"deflate"};return r=0,s=[],f}function u(){i>0&&(e.postMessage({action:"reset",streamId:n}),i=0)}return{isAsync:!0,get isEmpty(){return i===0},write(d,f){e.postMessage({action:"write",id:i,data:d,streamId:n}),a.push({id:i,writeCallback:f,data:d}),i+=1},finish(d){u(),a.length?(a.forEach(f=>{delete f.writeCallback}),a[a.length-1].finishCallback=()=>d(l())):d(l())},finishSync(){u();const d=a.map(f=>(delete f.writeCallback,delete f.finishCallback,f.data)).join("");return{...l(),pendingData:d}},estimateEncodedBytesCount(d){return d.length/8},stop(){c()}}}function zo({configuredUrl:t,error:e,source:n,scriptType:r}){if(T.error(`${n} failed to start: an error occurred while initializing the ${r}:`,e),e instanceof Event||e instanceof Error&&ap(e.message)){let s;t?s=`Please make sure the ${r} URL ${t} is correct and CSP is correctly configured.`:s="Please make sure CSP is correctly configured.",T.error(`${s} See documentation at ${$e}/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay`)}else r==="worker"&&We(e)}function ap(t){return t.includes("Content Security Policy")||t.includes("requires 'TrustedScriptURL'")}const cp=30*$;function $o(t){return new Worker(t.workerUrl||URL.createObjectURL(new Blob(['(()=>{"use strict";function t(t){const e=t.reduce(((t,e)=>t+e.length),0),a=new Uint8Array(e);let n=0;for(const e of t)a.set(e,n),n+=e.length;return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),h=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},U=function(t,e,a){var n,r,s=new Array(16),h=0;for(n=1;n<=i;n++)s[n]=h=h+a[n-1]<<1;for(r=0;r<=e;r++){var l=t[2*r+1];0!==l&&(t[2*r]=A(s[l]++,l))}},I=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},B=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},E=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},S=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&E(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!E(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},C=function(t,e,n){var r,i,l,_,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(l=f[i],x(t,l+a+1,e),0!==(_=s[l])&&(i-=c[l],z(t,i,_)),r--,l=y(r),x(t,l,n),0!==(_=h[l])&&(r-=v[l],z(t,r,_)))}while(o<t.last_lit);x(t,256,e)},D=function(t,e){var a,n,r,s=e.dyn_tree,h=e.stat_desc.static_tree,l=e.stat_desc.has_stree,_=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<_;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,l&&(t.static_len-=h[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)S(t,s,a);r=_;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],S(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,S(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,h,l,_=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(_[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=_[2*_[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),_[2*n+1]=s,n>o||(t.bl_count[s]++,h=0,n>=c&&(h=f[n-c]),l=_[2*n],t.opt_len+=l*(s+h),u&&(t.static_len+=l*(d[2*n+1]+h)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(_[2*r+1]!==s&&(t.opt_len+=(s-_[2*r+1])*_[2*r],_[2*r+1]=s),n--)}}(t,e),U(s,o,t.bl_count)},j=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(h<_?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4))},M=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++h<l&&r===s)){if(h<_)do{x(t,r,t.bl_tree)}while(0!=--h);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),h--),x(t,16,t.bl_tree),z(t,h-3,2)):h<=10?(x(t,17,t.bl_tree),z(t,h-3,3)):(x(t,18,t.bl_tree),z(t,h-11,7));h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4)}},L=!1,T=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){B(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},H=function(t,e,n,r){var i,s,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),h=function(t){var e;for(j(t,t.dyn_ltree,t.l_desc.max_code),j(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*_[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?T(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),C(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*_[r]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),C(t,t.dyn_ltree,t.dyn_dtree)),I(t),r&&B(t)},R={_tr_init:function(t){L||(!function(){var t,e,a,_,m,y=new Array(16);for(a=0,_=0;_<28;_++)for(c[_]=a,t=0;t<1<<s[_];t++)f[a++]=_;for(f[a-1]=_,m=0,_=0;_<16;_++)for(v[_]=m,t=0;t<1<<h[_];t++)u[m++]=_;for(m>>=7;_<r;_++)for(v[_]=m<<7,t=0;t<1<<h[_]-7;t++)u[256+m++]=_;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(U(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,h,0,r,i),w=new b(new Array(0),l,0,19,7)}(),L=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,I(t)},_tr_stored_block:T,_tr_flush_block:H,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},K=function(t,e,a,n){for(var r=65535&t,i=t>>>16&65535,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16},N=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),O=function(t,e,a,n){var r=N,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return~t},q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},F=0,G=2,J=3,P=4,Q=0,V=1,W=-1,X=0,Y=8,Z=R._tr_init,$=R._tr_stored_block,tt=R._tr_flush_block,et=R._tr_tally,at=R._tr_align,nt=F,rt=1,it=J,st=P,ht=5,lt=Q,_t=V,ot=-2,dt=-3,ut=-5,ft=W,ct=1,pt=2,gt=3,wt=4,vt=X,bt=2,mt=Y,yt=258,kt=262,zt=103,xt=113,At=666,Ut=function(t,e){return t.msg=q[e],e},It=function(t){return(t<<1)-(t>4?9:0)},Bt=function(t){for(var e=t.length;--e>=0;)t[e]=0},Et=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},St=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Ct=function(t,e){tt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,St(t.strm)},Dt=function(t,e){t.pending_buf[t.pending++]=e},jt=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Mt=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-kt?t.strstart-(t.w_size-kt):0,_=t.window,o=t.w_mask,d=t.prev,u=t.strstart+yt,f=_[i+s-1],c=_[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(a=e)+s]===c&&_[a+s-1]===f&&_[a]===_[i]&&_[++a]===_[i+1]){i+=2,a++;do{}while(_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&i<u);if(n=yt-(u-i),i=u-yt,n>s){if(t.match_start=e,s=n,n>=h)break;f=_[i+s-1],c=_[i+s]}}}while((e=d[e&o])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},Lt=function(t){var e,a,n,r,i,s,h,l,_,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-kt)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,h=t.window,l=t.strstart+t.lookahead,_=r,o=void 0,(o=s.avail_in)>_&&(o=_),a=0===o?0:(s.avail_in-=o,h.set(s.input.subarray(s.next_in,s.next_in+o),l),1===s.state.wrap?s.adler=K(s.adler,h,o,l):2===s.state.wrap&&(s.adler=O(s.adler,h,o,l)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Et(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Et(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<kt&&0!==t.strm.avail_in)},Tt=function(t,e){for(var a,n;;){if(t.lookahead<kt){if(Lt(t),t.lookahead<kt&&e===nt)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-kt&&(t.match_length=Mt(t,a)),t.match_length>=3)if(n=et(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Et(t,t.ins_h,t.window[t.strstart+1]);else n=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2},Ht=function(t,e){for(var a,n,r;;){if(t.lookahead<kt){if(Lt(t),t.lookahead<kt&&e===nt)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-kt&&(t.match_length=Mt(t,a),t.match_length<=5&&(t.strategy===ct||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=et(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Ct(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=et(t,0,t.window[t.strstart-1]))&&Ct(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=et(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Kt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Lt(t),0===t.lookahead&&e===nt)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Ct(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-kt&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Ct(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Tt),new Rt(4,5,16,8,Tt),new Rt(4,6,32,32,Tt),new Rt(4,4,16,16,Ht),new Rt(8,16,32,32,Ht),new Rt(8,16,128,128,Ht),new Rt(8,32,128,256,Ht),new Rt(32,128,258,1024,Ht),new Rt(32,258,258,4096,Ht)];function Nt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Bt(this.dyn_ltree),Bt(this.dyn_dtree),Bt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Bt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Bt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ot=function(t){if(!t||!t.state)return Ut(t,ot);t.total_in=t.total_out=0,t.data_type=bt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:xt,t.adler=2===e.wrap?0:1,e.last_flush=nt,Z(e),lt},qt=function(t){var e,a=Ot(t);return a===lt&&((e=t.state).window_size=2*e.w_size,Bt(e.head),e.max_lazy_match=Kt[e.level].max_lazy,e.good_match=Kt[e.level].good_length,e.nice_match=Kt[e.level].nice_length,e.max_chain_length=Kt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Ft=function(t,e,a,n,r,i){if(!t)return ot;var s=1;if(e===ft&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==mt||n<8||n>15||e<0||e>9||i<0||i>wt)return Ut(t,ot);8===n&&(n=9);var h=new Nt;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=i,h.method=a,qt(t)},Gt={deflateInit:function(t,e){return Ft(t,e,mt,15,8,vt)},deflateInit2:Ft,deflateReset:qt,deflateResetKeep:Ot,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?ot:(t.state.gzhead=e,lt):ot},deflate:function(t,e){var a,n;if(!t||!t.state||e>ht||e<0)return t?Ut(t,ot):ot;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===At&&e!==st)return Ut(t,0===t.avail_out?ut:ot);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Dt(r,31),Dt(r,139),Dt(r,8),r.gzhead?(Dt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Dt(r,255&r.gzhead.time),Dt(r,r.gzhead.time>>8&255),Dt(r,r.gzhead.time>>16&255),Dt(r,r.gzhead.time>>24&255),Dt(r,9===r.level?2:r.strategy>=pt||r.level<2?4:0),Dt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Dt(r,255&r.gzhead.extra.length),Dt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=O(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,9===r.level?2:r.strategy>=pt||r.level<2?4:0),Dt(r,3),r.status=xt);else{var s=mt+(r.w_bits-8<<4)<<8;s|=(r.strategy>=pt||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=xt,jt(r,s),0!==r.strstart&&(jt(r,t.adler>>>16),jt(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),St(t),a=r.pending,r.pending!==r.pending_buf_size));)Dt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),St(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Dt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),St(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Dt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=zt)}else r.status=zt;if(r.status===zt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&St(t),r.pending+2<=r.pending_buf_size&&(Dt(r,255&t.adler),Dt(r,t.adler>>8&255),t.adler=0,r.status=xt)):r.status=xt),0!==r.pending){if(St(t),0===t.avail_out)return r.last_flush=-1,lt}else if(0===t.avail_in&&It(e)<=It(i)&&e!==st)return Ut(t,ut);if(r.status===At&&0!==t.avail_in)return Ut(t,ut);if(0!==t.avail_in||0!==r.lookahead||e!==nt&&r.status!==At){var h=r.strategy===pt?function(t,e){for(var a;;){if(0===t.lookahead&&(Lt(t),0===t.lookahead)){if(e===nt)return 1;break}if(t.match_length=0,a=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===gt?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=yt){if(Lt(t),t.lookahead<=yt&&e===nt)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+yt;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=yt-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=et(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(r,e):Kt[r.level].func(r,e);if(3!==h&&4!==h||(r.status=At),1===h||3===h)return 0===t.avail_out&&(r.last_flush=-1),lt;if(2===h&&(e===rt?at(r):e!==ht&&($(r,0,0,!1),e===it&&(Bt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),St(t),0===t.avail_out))return r.last_flush=-1,lt}return e!==st?lt:r.wrap<=0?_t:(2===r.wrap?(Dt(r,255&t.adler),Dt(r,t.adler>>8&255),Dt(r,t.adler>>16&255),Dt(r,t.adler>>24&255),Dt(r,255&t.total_in),Dt(r,t.total_in>>8&255),Dt(r,t.total_in>>16&255),Dt(r,t.total_in>>24&255)):(jt(r,t.adler>>>16),jt(r,65535&t.adler)),St(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?lt:_t)},deflateEnd:function(t){if(!t||!t.state)return ot;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==zt&&e!==xt&&e!==At?Ut(t,ot):(t.state=null,e===xt?Ut(t,dt):lt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return ot;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return ot;if(1===r&&(t.adler=K(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(Bt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,h=t.next_in,l=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Lt(n);n.lookahead>=3;){var _=n.strstart,o=n.lookahead-2;do{n.ins_h=Et(n,n.ins_h,n.window[_+3-1]),n.prev[_&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=_,_++}while(--o);n.strstart=_,n.lookahead=2,Lt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=s,n.wrap=r,lt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Jt=new Uint8Array(256),Pt=0;Pt<256;Pt++)Jt[Pt]=Pt>=252?6:Pt>=248?5:Pt>=240?4:Pt>=224?3:Pt>=192?2:1;Jt[254]=Jt[254]=1;var Qt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Vt=Object.prototype.toString,Wt=F,Xt=G,Yt=J,Zt=P,$t=Q,te=V,ee=W,ae=X,ne=Y;function re(){this.options={level:ee,method:ne,chunkSize:16384,windowBits:15,memLevel:8,strategy:ae};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qt,this.strm.avail_out=0;var e=Gt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==$t)throw new Error(q[e]);if(t.header&&Gt.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Vt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Gt.deflateSetDictionary(this.strm,a))!==$t)throw new Error(q[e]);this._dict_set=!0}}function ie(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function se(t){const e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}re.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Zt:Wt,"[object ArrayBuffer]"===Vt.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Xt||n===Yt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Gt.deflate(r,n))===te)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Gt.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===$t;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},re.prototype.onData=function(t){this.chunks.push(t)},re.prototype.onEnd=function(t){t===$t&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,h=t.length;i<h;i++){var l=t[i];r.set(l,s),s+=l.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e=self){try{const a=new Map;e.addEventListener("message",(n=>{try{const r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"6.5.1"};case"write":{let n=e.get(a.streamId);n||(n=new re,e.set(a.streamId,n));const r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,n,r,i,s=t.length,h=0;for(r=0;r<s;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(h),i=0,r=0;i<h;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,G),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:se(n),additionalBytesCount:i.length}}case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){ie(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){ie(e,t)}}()})();'])))}let L={status:0};function Go(t,e,n,r=$o){switch(L.status===0&&up(t,e,r),L.status){case 1:return L.initializationFailureCallbacks.push(n),L.worker;case 3:return L.worker}}function $r(){return L.status}function up(t,e,n=$o){try{const r=n(t),{stop:s}=k(t,r,"error",a=>{On(t,e,a)}),{stop:o}=k(t,r,"message",({data:a})=>{a.type==="errored"?On(t,e,a.error,a.streamId):a.type==="initialized"&&dp(a.version)});r.postMessage({action:"init"}),V(()=>lp(e),cp),L={status:1,worker:r,stop:()=>{s(),o()},initializationFailureCallbacks:[]}}catch(r){On(t,e,r)}}function lp(t){L.status===1&&(T.error(`${t} failed to start: a timeout occurred while initializing the Worker`),L.initializationFailureCallbacks.forEach(e=>e()),L={status:2})}function dp(t){L.status===1&&(L={status:3,worker:L.worker,stop:L.stop,version:t})}function On(t,e,n,r){L.status===1||L.status===0?(zo({configuredUrl:t.workerUrl,error:n,source:e,scriptType:"worker"}),L.status===1&&L.initializationFailureCallbacks.forEach(s=>s()),L={status:2}):We(n,{worker_version:L.status===3&&L.version,stream_id:r})}function Ho(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function fp(t,e,n,r){const s=e.findTrackedSession(),o=pp(s,r),i=n.findView();return ep(t,{viewContext:i,errorType:o,session:s})}function pp(t,e){if(!Ho())return"browser-not-supported";if(!t)return"rum-not-tracked";if(t.sessionReplay===0)return"incorrect-session-plan";if(!e)return"replay-not-started"}function mp(t,e,n,r,s,o){let i=0,a;e.subscribe(9,()=>{(i===2||i===3)&&(u(),i=1)}),e.subscribe(11,d=>{d.reason===$t.UNLOADING&&u()}),e.subscribe(10,()=>{i===1&&l()});const c=async()=>{const[d]=await Promise.all([s(),sc(t,"interactive")]);if(i!==2)return;const f=o();if(!f||!d){i=0;return}({stop:a}=d(e,t,n,r,f)),i=3};function l(d){const f=n.findTrackedSession();if(hp(f,d)){i=1;return}_p(i)||(i=2,c().catch(Xr),gp(f,d)&&n.setForcedReplay())}function u(){i===3&&(a==null||a()),i=0}return{start:l,stop:u,getSessionReplayLink(){return fp(t,n,r,i!==0)},isRecording:()=>i===3}}function hp(t,e){return!t||t.sessionReplay===0&&(!e||!e.force)}function _p(t){return t===2||t===3}function gp(t,e){return e&&e.force&&t.sessionReplay===0}function bp(){let t=0;return{strategy:{start(){t=1},stop(){t=2},isRecording:()=>!1,getSessionReplayLink:I},shouldStartImmediately(e){return t===1||t===0&&!e.startSessionReplayRecordingManually}}}function yp(t,e){if(rt()&&!Hs("records")||!Ho())return{start:I,stop:I,getReplayStats:()=>{},onRumStart:I,isRecording:()=>!1,getSessionReplayLink:()=>{}};let{strategy:n,shouldStartImmediately:r}=bp();return{start:o=>n.start(o),stop:()=>n.stop(),getSessionReplayLink:()=>n.getSessionReplayLink(),onRumStart:s,isRecording:()=>$r()===3&&n.isRecording(),getReplayStats:o=>$r()===3?op(o):void 0};function s(o,i,a,c,l){let u;function d(){return u||(l??(l=Go(i,"Datadog Session Replay",()=>{n.stop()},e)),l&&(u=Vo(i,l,1))),u}n=mp(i,o,a,c,t,d),r(i)&&n.start()}}async function vp(t=Sp){try{return await t()}catch(e){zo({error:e,source:"Recorder",scriptType:"module"})}}async function Sp(){return(await jo(()=>import("./startRecording-DpGgd9b1.js"),__vite__mapDeps([0,1,2]))).startRecording}const Ep=yp(vp),wp=Bu(Qf,Ep,{startDeflateWorker:Go,createDeflateEncoder:Vo});ws(ut(),"DD_RUM",wp);export{I as A,nt as B,An as C,Ap as D,fc as E,$u as F,_ as G,sr as H,Yn as I,Mp as J,Np as K,Dp as L,Pp as M,A as N,ec as O,El as P,q as Q,V as R,Ul as S,$ as T,Dt as U,Wa as V,rt as W,hu as a,jn as b,kp as c,wp as d,ol as e,il as f,Sl as g,Cp as h,vl as i,Il as j,xp as k,Ip as l,Op as m,Rp as n,vo as o,_e as p,gt as q,Al as r,Rl as s,U as t,Nt as u,So as v,Zd as w,Lp as x,k as y,tf as z};
//# sourceMappingURL=datadog-C9aBYUlz.js.map
